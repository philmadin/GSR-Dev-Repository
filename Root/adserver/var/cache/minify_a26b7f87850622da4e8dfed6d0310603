(function(){var _jQuery=window.jQuery,_$=window.$;var jQuery=window.jQuery=window.$=function(selector,context){return new jQuery.fn.init(selector,context);};var quickExpr=/^[^<]*(<(.|\s)+>)[^>]*$|^#(\w+)$/,isSimple=/^.[^:#\[\.]*$/,undefined;jQuery.fn=jQuery.prototype={init:function(selector,context){selector=selector||document;if(selector.nodeType){this[0]=selector;this.length=1;return this;}
if(typeof selector=="string"){var match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1])
selector=jQuery.clean([match[1]],context);else{var elem=document.getElementById(match[3]);if(elem){if(elem.id!=match[3])
return jQuery().find(selector);return jQuery(elem);}
selector=[];}}else
return jQuery(context).find(selector);}else if(jQuery.isFunction(selector))
return jQuery(document)[jQuery.fn.ready?"ready":"load"](selector);return this.setArray(jQuery.makeArray(selector));},jquery:"1.2.6",size:function(){return this.length;},length:0,get:function(num){return num==undefined?jQuery.makeArray(this):this[num];},pushStack:function(elems){var ret=jQuery(elems);ret.prevObject=this;return ret;},setArray:function(elems){this.length=0;Array.prototype.push.apply(this,elems);return this;},each:function(callback,args){return jQuery.each(this,callback,args);},index:function(elem){var ret=-1;return jQuery.inArray(elem&&elem.jquery?elem[0]:elem,this);},attr:function(name,value,type){var options=name;if(name.constructor==String)
if(value===undefined)
return this[0]&&jQuery[type||"attr"](this[0],name);else{options={};options[name]=value;}
return this.each(function(i){for(name in options)
jQuery.attr(type?this.style:this,name,jQuery.prop(this,options[name],type,i,name));});},css:function(key,value){if((key=='width'||key=='height')&&parseFloat(value)<0)
value=undefined;return this.attr(key,value,"curCSS");},text:function(text){if(typeof text!="object"&&text!=null)
return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));var ret="";jQuery.each(text||this,function(){jQuery.each(this.childNodes,function(){if(this.nodeType!=8)
ret+=this.nodeType!=1?this.nodeValue:jQuery.fn.text([this]);});});return ret;},wrapAll:function(html){if(this[0])
jQuery(html,this[0].ownerDocument).clone().insertBefore(this[0]).map(function(){var elem=this;while(elem.firstChild)
elem=elem.firstChild;return elem;}).append(this);return this;},wrapInner:function(html){return this.each(function(){jQuery(this).contents().wrapAll(html);});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},append:function(){return this.domManip(arguments,true,false,function(elem){if(this.nodeType==1)
this.appendChild(elem);});},prepend:function(){return this.domManip(arguments,true,true,function(elem){if(this.nodeType==1)
this.insertBefore(elem,this.firstChild);});},before:function(){return this.domManip(arguments,false,false,function(elem){this.parentNode.insertBefore(elem,this);});},after:function(){return this.domManip(arguments,false,true,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});},end:function(){return this.prevObject||jQuery([]);},find:function(selector){var elems=jQuery.map(this,function(elem){return jQuery.find(selector,elem);});return this.pushStack(/[^+>] [^+>]/.test(selector)||selector.indexOf("..")>-1?jQuery.unique(elems):elems);},clone:function(events){var ret=this.map(function(){if(jQuery.browser.msie&&!jQuery.isXMLDoc(this)){var clone=this.cloneNode(true),container=document.createElement("div");container.appendChild(clone);return jQuery.clean([container.innerHTML])[0];}else
return this.cloneNode(true);});var clone=ret.find("*").andSelf().each(function(){if(this[expando]!=undefined)
this[expando]=null;});if(events===true)
this.find("*").andSelf().each(function(i){if(this.nodeType==3)
return;var events=jQuery.data(this,"events");for(var type in events)
for(var handler in events[type])
jQuery.event.add(clone[i],type,events[type][handler],events[type][handler].data);});return ret;},filter:function(selector){return this.pushStack(jQuery.isFunction(selector)&&jQuery.grep(this,function(elem,i){return selector.call(elem,i);})||jQuery.multiFilter(selector,this));},not:function(selector){if(selector.constructor==String)
if(isSimple.test(selector))
return this.pushStack(jQuery.multiFilter(selector,this,true));else
selector=jQuery.multiFilter(selector,this);var isArrayLike=selector.length&&selector[selector.length-1]!==undefined&&!selector.nodeType;return this.filter(function(){return isArrayLike?jQuery.inArray(this,selector)<0:this!=selector;});},add:function(selector){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),typeof selector=='string'?jQuery(selector):jQuery.makeArray(selector))));},is:function(selector){return!!selector&&jQuery.multiFilter(selector,this).length>0;},hasClass:function(selector){return this.is("."+selector);},val:function(value){if(value==undefined){if(this.length){var elem=this[0];if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type=="select-one";if(index<0)
return null;for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery.browser.msie&&!option.attributes.value.specified?option.text:option.value;if(one)
return value;values.push(value);}}
return values;}else
return(this[0].value||"").replace(/\r/g,"");}
return undefined;}
if(value.constructor==Number)
value+='';return this.each(function(){if(this.nodeType!=1)
return;if(value.constructor==Array&&/radio|checkbox/.test(this.type))
this.checked=(jQuery.inArray(this.value,value)>=0||jQuery.inArray(this.name,value)>=0);else if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(value);jQuery("option",this).each(function(){this.selected=(jQuery.inArray(this.value,values)>=0||jQuery.inArray(this.text,values)>=0);});if(!values.length)
this.selectedIndex=-1;}else
this.value=value;});},html:function(value){return value==undefined?(this[0]?this[0].innerHTML:null):this.empty().append(value);},replaceWith:function(value){return this.after(value).remove();},eq:function(i){return this.slice(i,i+1);},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},andSelf:function(){return this.add(this.prevObject);},data:function(key,value){var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length)
data=jQuery.data(this[0],key);return data===undefined&&parts[1]?this.data(parts[0]):data;}else
return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value);});},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});},domManip:function(args,table,reverse,callback){var clone=this.length>1,elems;return this.each(function(){if(!elems){elems=jQuery.clean(args,this.ownerDocument);if(reverse)
elems.reverse();}
var obj=this;if(table&&jQuery.nodeName(this,"table")&&jQuery.nodeName(elems[0],"tr"))
obj=this.getElementsByTagName("tbody")[0]||this.appendChild(this.ownerDocument.createElement("tbody"));var scripts=jQuery([]);jQuery.each(elems,function(){var elem=clone?jQuery(this).clone(true)[0]:this;if(jQuery.nodeName(elem,"script"))
scripts=scripts.add(elem);else{if(elem.nodeType==1)
scripts=scripts.add(jQuery("script",elem).remove());callback.call(obj,elem);}});scripts.each(evalScript);});}};jQuery.fn.init.prototype=jQuery.fn;function evalScript(i,elem){if(elem.src)
jQuery.ajax({url:elem.src,async:false,dataType:"script"});else
jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"");if(elem.parentNode)
elem.parentNode.removeChild(elem);}
function now(){return+new Date;}
jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options;if(target.constructor==Boolean){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!="object"&&typeof target!="function")
target={};if(length==i){target=this;--i;}
for(;i<length;i++)
if((options=arguments[i])!=null)
for(var name in options){var src=target[name],copy=options[name];if(target===copy)
continue;if(deep&&copy&&typeof copy=="object"&&!copy.nodeType)
target[name]=jQuery.extend(deep,src||(copy.length!=null?[]:{}),copy);else if(copy!==undefined)
target[name]=copy;}
return target;};var expando="jQuery"+now(),uuid=0,windowData={},exclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,defaultView=document.defaultView||{};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep)
window.jQuery=_jQuery;return jQuery;},isFunction:function(fn){return!!fn&&typeof fn!="string"&&!fn.nodeName&&fn.constructor!=Array&&/^[\s[]?function/.test(fn+"");},isXMLDoc:function(elem){return elem.documentElement&&!elem.body||elem.tagName&&elem.ownerDocument&&!elem.ownerDocument.body;},globalEval:function(data){data=jQuery.trim(data);if(data){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.browser.msie)
script.text=data;else
script.appendChild(document.createTextNode(data));head.insertBefore(script,head.firstChild);head.removeChild(script);}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()==name.toUpperCase();},cache:{},data:function(elem,name,data){elem=elem==window?windowData:elem;var id=elem[expando];if(!id)
id=elem[expando]=++uuid;if(name&&!jQuery.cache[id])
jQuery.cache[id]={};if(data!==undefined)
jQuery.cache[id][name]=data;return name?jQuery.cache[id][name]:id;},removeData:function(elem,name){elem=elem==window?windowData:elem;var id=elem[expando];if(name){if(jQuery.cache[id]){delete jQuery.cache[id][name];name="";for(name in jQuery.cache[id])
break;if(!name)
jQuery.removeData(elem);}}else{try{delete elem[expando];}catch(e){if(elem.removeAttribute)
elem.removeAttribute(expando);}
delete jQuery.cache[id];}},each:function(object,callback,args){var name,i=0,length=object.length;if(args){if(length==undefined){for(name in object)
if(callback.apply(object[name],args)===false)
break;}else
for(;i<length;)
if(callback.apply(object[i++],args)===false)
break;}else{if(length==undefined){for(name in object)
if(callback.call(object[name],name,object[name])===false)
break;}else
for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}
return object;},prop:function(elem,value,type,i,name){if(jQuery.isFunction(value))
value=value.call(elem,i);return value&&value.constructor==Number&&type=="curCSS"&&!exclude.test(name)?value+"px":value;},className:{add:function(elem,classNames){jQuery.each((classNames||"").split(/\s+/),function(i,className){if(elem.nodeType==1&&!jQuery.className.has(elem.className,className))
elem.className+=(elem.className?" ":"")+className;});},remove:function(elem,classNames){if(elem.nodeType==1)
elem.className=classNames!=undefined?jQuery.grep(elem.className.split(/\s+/),function(className){return!jQuery.className.has(classNames,className);}).join(" "):"";},has:function(elem,className){return jQuery.inArray(className,(elem.className||elem).toString().split(/\s+/))>-1;}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
callback.call(elem);for(var name in options)
elem.style[name]=old[name];},css:function(elem,name,force){if(name=="width"||name=="height"){var val,props={position:"absolute",visibility:"hidden",display:"block"},which=name=="width"?["Left","Right"]:["Top","Bottom"];function getWH(){val=name=="width"?elem.offsetWidth:elem.offsetHeight;var padding=0,border=0;jQuery.each(which,function(){padding+=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0;border+=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0;});val-=Math.round(padding+border);}
if(jQuery(elem).is(":visible"))
getWH();else
jQuery.swap(elem,props,getWH);return Math.max(0,val);}
return jQuery.curCSS(elem,name,force);},curCSS:function(elem,name,force){var ret,style=elem.style;function color(elem){if(!jQuery.browser.safari)
return false;var ret=defaultView.getComputedStyle(elem,null);return!ret||ret.getPropertyValue("color")=="";}
if(name=="opacity"&&jQuery.browser.msie){ret=jQuery.attr(style,"opacity");return ret==""?"1":ret;}
if(jQuery.browser.opera&&name=="display"){var save=style.outline;style.outline="0 solid black";style.outline=save;}
if(name.match(/float/i))
name=styleFloat;if(!force&&style&&style[name])
ret=style[name];else if(defaultView.getComputedStyle){if(name.match(/float/i))
name="float";name=name.replace(/([A-Z])/g,"-$1").toLowerCase();var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle&&!color(elem))
ret=computedStyle.getPropertyValue(name);else{var swap=[],stack=[],a=elem,i=0;for(;a&&color(a);a=a.parentNode)
stack.unshift(a);for(;i<stack.length;i++)
if(color(stack[i])){swap[i]=stack[i].style.display;stack[i].style.display="block";}
ret=name=="display"&&swap[stack.length-1]!=null?"none":(computedStyle&&computedStyle.getPropertyValue(name))||"";for(i=0;i<swap.length;i++)
if(swap[i]!=null)
stack[i].style.display=swap[i];}
if(name=="opacity"&&ret=="")
ret="1";}else if(elem.currentStyle){var camelCase=name.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!/^\d+(px)?$/i.test(ret)&&/^\d/.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=ret||0;ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft;}}
return ret;},clean:function(elems,context){var ret=[];context=context||document;if(typeof context.createElement=='undefined')
context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;jQuery.each(elems,function(i,elem){if(!elem)
return;if(elem.constructor==Number)
elem+='';if(typeof elem=="string"){elem=elem.replace(/(<(\w+)[^>]*?)\/>/g,function(all,front,tag){return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?all:front+"></"+tag+">";});var tags=jQuery.trim(elem).toLowerCase(),div=context.createElement("div");var wrap=!tags.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!tags.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||tags.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!tags.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||jQuery.browser.msie&&[1,"div<div>","</div>"]||[0,"",""];div.innerHTML=wrap[1]+elem+wrap[2];while(wrap[0]--)
div=div.lastChild;if(jQuery.browser.msie){var tbody=!tags.indexOf("<table")&&tags.indexOf("<tbody")<0?div.firstChild&&div.firstChild.childNodes:wrap[1]=="<table>"&&tags.indexOf("<tbody")<0?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j)
if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)
tbody[j].parentNode.removeChild(tbody[j]);if(/^\s/.test(elem))
div.insertBefore(context.createTextNode(elem.match(/^\s*/)[0]),div.firstChild);}
elem=jQuery.makeArray(div.childNodes);}
if(elem.length===0&&(!jQuery.nodeName(elem,"form")&&!jQuery.nodeName(elem,"select")))
return;if(elem[0]==undefined||jQuery.nodeName(elem,"form")||elem.options)
ret.push(elem);else
ret=jQuery.merge(ret,elem);});return ret;},attr:function(elem,name,value){if(!elem||elem.nodeType==3||elem.nodeType==8)
return undefined;var notxml=!jQuery.isXMLDoc(elem),set=value!==undefined,msie=jQuery.browser.msie;name=notxml&&jQuery.props[name]||name;if(elem.tagName){var special=/href|src|style/.test(name);if(name=="selected"&&jQuery.browser.safari)
elem.parentNode.selectedIndex;if(name in elem&&notxml&&!special){if(set){if(name=="type"&&jQuery.nodeName(elem,"input")&&elem.parentNode)
throw"type property can't be changed";elem[name]=value;}
if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name))
return elem.getAttributeNode(name).nodeValue;return elem[name];}
if(msie&&notxml&&name=="style")
return jQuery.attr(elem.style,"cssText",value);if(set)
elem.setAttribute(name,""+value);var attr=msie&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr;}
if(msie&&name=="opacity"){if(set){elem.zoom=1;elem.filter=(elem.filter||"").replace(/alpha\([^)]*\)/,"")+
(parseInt(value)+''=="NaN"?"":"alpha(opacity="+value*100+")");}
return elem.filter&&elem.filter.indexOf("opacity=")>=0?(parseFloat(elem.filter.match(/opacity=([^)]*)/)[1])/100)+'':"";}
name=name.replace(/-([a-z])/ig,function(all,letter){return letter.toUpperCase();});if(set)
elem[name]=value;return elem[name];},trim:function(text){return(text||"").replace(/^\s+|\s+$/g,"");},makeArray:function(array){var ret=[];if(array!=null){var i=array.length;if(i==null||array.split||array.setInterval||array.call)
ret[0]=array;else
while(i)
ret[--i]=array[i];}
return ret;},inArray:function(elem,array){for(var i=0,length=array.length;i<length;i++)
if(array[i]===elem)
return i;return-1;},merge:function(first,second){var i=0,elem,pos=first.length;if(jQuery.browser.msie){while(elem=second[i++])
if(elem.nodeType!=8)
first[pos++]=elem;}else
while(elem=second[i++])
first[pos++]=elem;return first;},unique:function(array){var ret=[],done={};try{for(var i=0,length=array.length;i<length;i++){var id=jQuery.data(array[i]);if(!done[id]){done[id]=true;ret.push(array[i]);}}}catch(e){ret=array;}
return ret;},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++)
if(!inv!=!callback(elems[i],i))
ret.push(elems[i]);return ret;},map:function(elems,callback){var ret=[];for(var i=0,length=elems.length;i<length;i++){var value=callback(elems[i],i);if(value!=null)
ret[ret.length]=value;}
return ret.concat.apply([],ret);}});var userAgent=navigator.userAgent.toLowerCase();jQuery.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)};var styleFloat=jQuery.browser.msie?"styleFloat":"cssFloat";jQuery.extend({boxModel:!jQuery.browser.msie||document.compatMode=="CSS1Compat",props:{"for":"htmlFor","class":"className","float":styleFloat,cssFloat:styleFloat,styleFloat:styleFloat,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing"}});jQuery.each({parent:function(elem){return elem.parentNode;},parents:function(elem){return jQuery.dir(elem,"parentNode");},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(selector){var ret=jQuery.map(this,fn);if(selector&&typeof selector=="string")
ret=jQuery.multiFilter(selector,ret);return this.pushStack(jQuery.unique(ret));};});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(){var args=arguments;return this.each(function(){for(var i=0,length=args.length;i<length;i++)
jQuery(args[i])[original](this);});};});jQuery.each({removeAttr:function(name){jQuery.attr(this,name,"");if(this.nodeType==1)
this.removeAttribute(name);},addClass:function(classNames){jQuery.className.add(this,classNames);},removeClass:function(classNames){jQuery.className.remove(this,classNames);},toggleClass:function(classNames){jQuery.className[jQuery.className.has(this,classNames)?"remove":"add"](this,classNames);},remove:function(selector){if(!selector||jQuery.filter(selector,[this]).r.length){jQuery("*",this).add(this).each(function(){jQuery.event.remove(this);jQuery.removeData(this);});if(this.parentNode)
this.parentNode.removeChild(this);}},empty:function(){jQuery(">*",this).remove();while(this.firstChild)
this.removeChild(this.firstChild);}},function(name,fn){jQuery.fn[name]=function(){return this.each(fn,arguments);};});jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn[type]=function(size){return this[0]==window?jQuery.browser.opera&&document.body["client"+name]||jQuery.browser.safari&&window["inner"+name]||document.compatMode=="CSS1Compat"&&document.documentElement["client"+name]||document.body["client"+name]:this[0]==document?Math.max(Math.max(document.body["scroll"+name],document.documentElement["scroll"+name]),Math.max(document.body["offset"+name],document.documentElement["offset"+name])):size==undefined?(this.length?jQuery.css(this[0],type):null):this.css(type,size.constructor==String?size:size+"px");};});function num(elem,prop){return elem[0]&&parseInt(jQuery.curCSS(elem[0],prop,true),10)||0;}var chars=jQuery.browser.safari&&parseInt(jQuery.browser.version)<417?"(?:[\\w*_-]|\\\\.)":"(?:[\\w\u0128-\uFFFF*_-]|\\\\.)",quickChild=new RegExp("^>\\s*("+chars+"+)"),quickID=new RegExp("^("+chars+"+)(#)("+chars+"+)"),quickClass=new RegExp("^([#.]?)("+chars+"*)");jQuery.extend({expr:{"":function(a,i,m){return m[2]=="*"||jQuery.nodeName(a,m[2]);},"#":function(a,i,m){return a.getAttribute("id")==m[2];},":":{lt:function(a,i,m){return i<m[3]-0;},gt:function(a,i,m){return i>m[3]-0;},nth:function(a,i,m){return m[3]-0==i;},eq:function(a,i,m){return m[3]-0==i;},first:function(a,i){return i==0;},last:function(a,i,m,r){return i==r.length-1;},even:function(a,i){return i%2==0;},odd:function(a,i){return i%2;},"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]==a;},"last-child":function(a){return jQuery.nth(a.parentNode.lastChild,1,"previousSibling")==a;},"only-child":function(a){return!jQuery.nth(a.parentNode.lastChild,2,"previousSibling");},parent:function(a){return a.firstChild;},empty:function(a){return!a.firstChild;},contains:function(a,i,m){return(a.textContent||a.innerText||jQuery(a).text()||"").indexOf(m[3])>=0;},visible:function(a){return"hidden"!=a.type&&jQuery.css(a,"display")!="none"&&jQuery.css(a,"visibility")!="hidden";},hidden:function(a){return"hidden"==a.type||jQuery.css(a,"display")=="none"||jQuery.css(a,"visibility")=="hidden";},enabled:function(a){return!a.disabled;},disabled:function(a){return a.disabled;},checked:function(a){return a.checked;},selected:function(a){return a.selected||jQuery.attr(a,"selected");},text:function(a){return"text"==a.type;},radio:function(a){return"radio"==a.type;},checkbox:function(a){return"checkbox"==a.type;},file:function(a){return"file"==a.type;},password:function(a){return"password"==a.type;},submit:function(a){return"submit"==a.type;},image:function(a){return"image"==a.type;},reset:function(a){return"reset"==a.type;},button:function(a){return"button"==a.type||jQuery.nodeName(a,"button");},input:function(a){return/input|select|textarea|button/i.test(a.nodeName);},has:function(a,i,m){return jQuery.find(m[3],a).length;},header:function(a){return/h\d/i.test(a.nodeName);},animated:function(a){return jQuery.grep(jQuery.timers,function(fn){return a==fn.elem;}).length;}}},parse:[/^(\[) *@?([\w-]+) *([!*$^~=]*) *('?"?)(.*?)\4 *\]/,/^(:)([\w-]+)\("?'?(.*?(\(.*?\))?[^(]*?)"?'?\)/,new RegExp("^([:.#]*)("+chars+"+)")],multiFilter:function(expr,elems,not){var old,cur=[];while(expr&&expr!=old){old=expr;var f=jQuery.filter(expr,elems,not);expr=f.t.replace(/^\s*,\s*/,"");cur=not?elems=f.r:jQuery.merge(cur,f.r);}
return cur;},find:function(t,context){if(typeof t!="string")
return[t];if(context&&context.nodeType!=1&&context.nodeType!=9)
return[];context=context||document;var ret=[context],done=[],last,nodeName;while(t&&last!=t){var r=[];last=t;t=jQuery.trim(t);var foundToken=false,re=quickChild,m=re.exec(t);if(m){nodeName=m[1].toUpperCase();for(var i=0;ret[i];i++)
for(var c=ret[i].firstChild;c;c=c.nextSibling)
if(c.nodeType==1&&(nodeName=="*"||c.nodeName.toUpperCase()==nodeName))
r.push(c);ret=r;t=t.replace(re,"");if(t.indexOf(" ")==0)continue;foundToken=true;}else{re=/^([>+~])\s*(\w*)/i;if((m=re.exec(t))!=null){r=[];var merge={};nodeName=m[2].toUpperCase();m=m[1];for(var j=0,rl=ret.length;j<rl;j++){var n=m=="~"||m=="+"?ret[j].nextSibling:ret[j].firstChild;for(;n;n=n.nextSibling)
if(n.nodeType==1){var id=jQuery.data(n);if(m=="~"&&merge[id])break;if(!nodeName||n.nodeName.toUpperCase()==nodeName){if(m=="~")merge[id]=true;r.push(n);}
if(m=="+")break;}}
ret=r;t=jQuery.trim(t.replace(re,""));foundToken=true;}}
if(t&&!foundToken){if(!t.indexOf(",")){if(context==ret[0])ret.shift();done=jQuery.merge(done,ret);r=ret=[context];t=" "+t.substr(1,t.length);}else{var re2=quickID;var m=re2.exec(t);if(m){m=[0,m[2],m[3],m[1]];}else{re2=quickClass;m=re2.exec(t);}
m[2]=m[2].replace(/\\/g,"");var elem=ret[ret.length-1];if(m[1]=="#"&&elem&&elem.getElementById&&!jQuery.isXMLDoc(elem)){var oid=elem.getElementById(m[2]);if((jQuery.browser.msie||jQuery.browser.opera)&&oid&&typeof oid.id=="string"&&oid.id!=m[2])
oid=jQuery('[@id="'+m[2]+'"]',elem)[0];ret=r=oid&&(!m[3]||jQuery.nodeName(oid,m[3]))?[oid]:[];}else{for(var i=0;ret[i];i++){var tag=m[1]=="#"&&m[3]?m[3]:m[1]!=""||m[0]==""?"*":m[2];if(tag=="*"&&ret[i].nodeName.toLowerCase()=="object")
tag="param";r=jQuery.merge(r,ret[i].getElementsByTagName(tag));}
if(m[1]==".")
r=jQuery.classFilter(r,m[2]);if(m[1]=="#"){var tmp=[];for(var i=0;r[i];i++)
if(r[i].getAttribute("id")==m[2]){tmp=[r[i]];break;}
r=tmp;}
ret=r;}
t=t.replace(re2,"");}}
if(t){var val=jQuery.filter(t,r);ret=r=val.r;t=jQuery.trim(val.t);}}
if(t)
ret=[];if(ret&&context==ret[0])
ret.shift();done=jQuery.merge(done,ret);return done;},classFilter:function(r,m,not){m=" "+m+" ";var tmp=[];for(var i=0;r[i];i++){var pass=(" "+r[i].className+" ").indexOf(m)>=0;if(!not&&pass||not&&!pass)
tmp.push(r[i]);}
return tmp;},filter:function(t,r,not){var last;while(t&&t!=last){last=t;var p=jQuery.parse,m;for(var i=0;p[i];i++){m=p[i].exec(t);if(m){t=t.substring(m[0].length);m[2]=m[2].replace(/\\/g,"");break;}}
if(!m)
break;if(m[1]==":"&&m[2]=="not")
r=isSimple.test(m[3])?jQuery.filter(m[3],r,true).r:jQuery(r).not(m[3]);else if(m[1]==".")
r=jQuery.classFilter(r,m[2],not);else if(m[1]=="["){var tmp=[],type=m[3];for(var i=0,rl=r.length;i<rl;i++){var a=r[i],z=a[jQuery.props[m[2]]||m[2]];if(z==null||/href|src|selected/.test(m[2]))
z=jQuery.attr(a,m[2])||'';if((type==""&&!!z||type=="="&&z==m[5]||type=="!="&&z!=m[5]||type=="^="&&z&&!z.indexOf(m[5])||type=="$="&&z.substr(z.length-m[5].length)==m[5]||(type=="*="||type=="~=")&&z.indexOf(m[5])>=0)^not)
tmp.push(a);}
r=tmp;}else if(m[1]==":"&&m[2]=="nth-child"){var merge={},tmp=[],test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(m[3]=="even"&&"2n"||m[3]=="odd"&&"2n+1"||!/\D/.test(m[3])&&"0n+"+m[3]||m[3]),first=(test[1]+(test[2]||1))-0,last=test[3]-0;for(var i=0,rl=r.length;i<rl;i++){var node=r[i],parentNode=node.parentNode,id=jQuery.data(parentNode);if(!merge[id]){var c=1;for(var n=parentNode.firstChild;n;n=n.nextSibling)
if(n.nodeType==1)
n.nodeIndex=c++;merge[id]=true;}
var add=false;if(first==0){if(node.nodeIndex==last)
add=true;}else if((node.nodeIndex-last)%first==0&&(node.nodeIndex-last)/first>=0)
add=true;if(add^not)
tmp.push(node);}
r=tmp;}else{var fn=jQuery.expr[m[1]];if(typeof fn=="object")
fn=fn[m[2]];if(typeof fn=="string")
fn=eval("false||function(a,i){return "+fn+";}");r=jQuery.grep(r,function(elem,i){return fn(elem,i,m,r);},not);}}
return{r:r,t:t};},dir:function(elem,dir){var matched=[],cur=elem[dir];while(cur&&cur!=document){if(cur.nodeType==1)
matched.push(cur);cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir])
if(cur.nodeType==1&&++num==result)
break;return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType==1&&n!=elem)
r.push(n);}
return r;}});jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType==3||elem.nodeType==8)
return;if(jQuery.browser.msie&&elem.setInterval)
elem=window;if(!handler.guid)
handler.guid=this.guid++;if(data!=undefined){var fn=handler;handler=this.proxy(fn,function(){return fn.apply(this,arguments);});handler.data=data;}
var events=jQuery.data(elem,"events")||jQuery.data(elem,"events",{}),handle=jQuery.data(elem,"handle")||jQuery.data(elem,"handle",function(){if(typeof jQuery!="undefined"&&!jQuery.event.triggered)
return jQuery.event.handle.apply(arguments.callee.elem,arguments);});handle.elem=elem;jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];handler.type=parts[1];var handlers=events[type];if(!handlers){handlers=events[type]={};if(!jQuery.event.special[type]||jQuery.event.special[type].setup.call(elem)===false){if(elem.addEventListener)
elem.addEventListener(type,handle,false);else if(elem.attachEvent)
elem.attachEvent("on"+type,handle);}}
handlers[handler.guid]=handler;jQuery.event.global[type]=true;});elem=null;},guid:1,global:{},remove:function(elem,types,handler){if(elem.nodeType==3||elem.nodeType==8)
return;var events=jQuery.data(elem,"events"),ret,index;if(events){if(types==undefined||(typeof types=="string"&&types.charAt(0)=="."))
for(var type in events)
this.remove(elem,type+(types||""));else{if(types.type){handler=types.handler;types=types.type;}
jQuery.each(types.split(/\s+/),function(index,type){var parts=type.split(".");type=parts[0];if(events[type]){if(handler)
delete events[type][handler.guid];else
for(handler in events[type])
if(!parts[1]||events[type][handler].type==parts[1])
delete events[type][handler];for(ret in events[type])break;if(!ret){if(!jQuery.event.special[type]||jQuery.event.special[type].teardown.call(elem)===false){if(elem.removeEventListener)
elem.removeEventListener(type,jQuery.data(elem,"handle"),false);else if(elem.detachEvent)
elem.detachEvent("on"+type,jQuery.data(elem,"handle"));}
ret=null;delete events[type];}}});}
for(ret in events)break;if(!ret){var handle=jQuery.data(elem,"handle");if(handle)handle.elem=null;jQuery.removeData(elem,"events");jQuery.removeData(elem,"handle");}}},trigger:function(type,data,elem,donative,extra){data=jQuery.makeArray(data);if(type.indexOf("!")>=0){type=type.slice(0,-1);var exclusive=true;}
if(!elem){if(this.global[type])
jQuery("*").add([window,document]).trigger(type,data);}else{if(elem.nodeType==3||elem.nodeType==8)
return undefined;var val,ret,fn=jQuery.isFunction(elem[type]||null),event=!data[0]||!data[0].preventDefault;if(event){data.unshift({type:type,target:elem,preventDefault:function(){},stopPropagation:function(){},timeStamp:now()});data[0][expando]=true;}
data[0].type=type;if(exclusive)
data[0].exclusive=true;var handle=jQuery.data(elem,"handle");if(handle)
val=handle.apply(elem,data);if((!fn||(jQuery.nodeName(elem,'a')&&type=="click"))&&elem["on"+type]&&elem["on"+type].apply(elem,data)===false)
val=false;if(event)
data.shift();if(extra&&jQuery.isFunction(extra)){ret=extra.apply(elem,val==null?data:data.concat(val));if(ret!==undefined)
val=ret;}
if(fn&&donative!==false&&val!==false&&!(jQuery.nodeName(elem,'a')&&type=="click")){this.triggered=true;try{elem[type]();}catch(e){}}
this.triggered=false;}
return val;},handle:function(event){var val,ret,namespace,all,handlers;event=arguments[0]=jQuery.event.fix(event||window.event);namespace=event.type.split(".");event.type=namespace[0];namespace=namespace[1];all=!namespace&&!event.exclusive;handlers=(jQuery.data(this,"events")||{})[event.type];for(var j in handlers){var handler=handlers[j];if(all||handler.type==namespace){event.handler=handler;event.data=handler.data;ret=handler.apply(this,arguments);if(val!==false)
val=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}}
return val;},fix:function(event){if(event[expando]==true)
return event;var originalEvent=event;event={originalEvent:originalEvent};var props="altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view wheelDelta which".split(" ");for(var i=props.length;i;i--)
event[props[i-1]]=originalEvent[props[i-1]];event[expando]=true;event.preventDefault=function(){if(originalEvent.preventDefault)
originalEvent.preventDefault();originalEvent.returnValue=false;};event.stopPropagation=function(){if(originalEvent.stopPropagation)
originalEvent.stopPropagation();originalEvent.cancelBubble=true;};event.timeStamp=event.timeStamp||now();if(!event.target)
event.target=event.srcElement||document;if(event.target.nodeType==3)
event.target=event.target.parentNode;if(!event.relatedTarget&&event.fromElement)
event.relatedTarget=event.fromElement==event.target?event.toElement:event.fromElement;if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc.clientTop||0);}
if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode))
event.which=event.charCode||event.keyCode;if(!event.metaKey&&event.ctrlKey)
event.metaKey=event.ctrlKey;if(!event.which&&event.button)
event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));return event;},proxy:function(fn,proxy){proxy.guid=fn.guid=fn.guid||proxy.guid||this.guid++;return proxy;},special:{ready:{setup:function(){bindReady();return;},teardown:function(){return;}},mouseenter:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind("mouseover",jQuery.event.special.mouseenter.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind("mouseover",jQuery.event.special.mouseenter.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type="mouseenter";return jQuery.event.handle.apply(this,arguments);}},mouseleave:{setup:function(){if(jQuery.browser.msie)return false;jQuery(this).bind("mouseout",jQuery.event.special.mouseleave.handler);return true;},teardown:function(){if(jQuery.browser.msie)return false;jQuery(this).unbind("mouseout",jQuery.event.special.mouseleave.handler);return true;},handler:function(event){if(withinElement(event,this))return true;event.type="mouseleave";return jQuery.event.handle.apply(this,arguments);}}}};jQuery.fn.extend({bind:function(type,data,fn){return type=="unload"?this.one(type,data,fn):this.each(function(){jQuery.event.add(this,type,fn||data,fn&&data);});},one:function(type,data,fn){var one=jQuery.event.proxy(fn||data,function(event){jQuery(this).unbind(event,one);return(fn||data).apply(this,arguments);});return this.each(function(){jQuery.event.add(this,type,one,fn&&data);});},unbind:function(type,fn){return this.each(function(){jQuery.event.remove(this,type,fn);});},trigger:function(type,data,fn){return this.each(function(){jQuery.event.trigger(type,data,this,true,fn);});},triggerHandler:function(type,data,fn){return this[0]&&jQuery.event.trigger(type,data,this[0],false,fn);},toggle:function(fn){var args=arguments,i=1;while(i<args.length)
jQuery.event.proxy(fn,args[i++]);return this.click(jQuery.event.proxy(fn,function(event){this.lastToggle=(this.lastToggle||0)%i;event.preventDefault();return args[this.lastToggle++].apply(this,arguments)||false;}));},hover:function(fnOver,fnOut){return this.bind('mouseenter',fnOver).bind('mouseleave',fnOut);},ready:function(fn){bindReady();if(jQuery.isReady)
fn.call(document,jQuery);else
jQuery.readyList.push(function(){return fn.call(this,jQuery);});return this;}});jQuery.extend({isReady:false,readyList:[],ready:function(){if(!jQuery.isReady){jQuery.isReady=true;if(jQuery.readyList){jQuery.each(jQuery.readyList,function(){this.call(document);});jQuery.readyList=null;}
jQuery(document).triggerHandler("ready");}}});var readyBound=false;function bindReady(){if(readyBound)return;readyBound=true;if(document.addEventListener&&!jQuery.browser.opera)
document.addEventListener("DOMContentLoaded",jQuery.ready,false);if(jQuery.browser.msie&&window==top)(function(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left");}catch(error){setTimeout(arguments.callee,0);return;}
jQuery.ready();})();if(jQuery.browser.opera)
document.addEventListener("DOMContentLoaded",function(){if(jQuery.isReady)return;for(var i=0;i<document.styleSheets.length;i++)
if(document.styleSheets[i].disabled){setTimeout(arguments.callee,0);return;}
jQuery.ready();},false);if(jQuery.browser.safari){var numStyles;(function(){if(jQuery.isReady)return;if(document.readyState!="loaded"&&document.readyState!="complete"){setTimeout(arguments.callee,0);return;}
if(numStyles===undefined)
numStyles=jQuery("style, link[rel=stylesheet]").length;if(document.styleSheets.length!=numStyles){setTimeout(arguments.callee,0);return;}
jQuery.ready();})();}
jQuery.event.add(window,"load",jQuery.ready);}
jQuery.each(("blur,focus,load,resize,scroll,unload,click,dblclick,"+"mousedown,mouseup,mousemove,mouseover,mouseout,change,select,"+"submit,keydown,keypress,keyup,error").split(","),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);};});var withinElement=function(event,elem){var parent=event.relatedTarget;while(parent&&parent!=elem)try{parent=parent.parentNode;}catch(error){parent=elem;}
return parent==elem;};jQuery(window).bind("unload",function(){jQuery("*").add(document).unbind();});jQuery.fn.extend({_load:jQuery.fn.load,load:function(url,params,callback){if(typeof url!='string')
return this._load(url);var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
callback=callback||function(){};var type="GET";if(params)
if(jQuery.isFunction(params)){callback=params;params=null;}else{params=jQuery.param(params);type="POST";}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status=="success"||status=="notmodified")
self.html(selector?jQuery("<div/>").append(res.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(selector):res.responseText);self.each(callback,[res.responseText,status,res]);}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return jQuery.nodeName(this,"form")?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password/i.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:val.constructor==Array?jQuery.map(val,function(val,i){return{name:elem.name,value:val};}):{name:elem.name,value:val};}).get();}});jQuery.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});var jsc=now();jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data=null;}
return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type});},getScript:function(url,callback){return jQuery.get(url,null,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},post:function(url,data,callback,type){if(jQuery.isFunction(data)){callback=data;data={};}
return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type});},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings);},ajaxSettings:{url:location.href,global:true,type:"GET",timeout:0,contentType:"application/x-www-form-urlencoded",processData:true,async:true,data:null,username:null,password:null,accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(s){s=jQuery.extend(true,s,jQuery.extend(true,{},jQuery.ajaxSettings,s));var jsonp,jsre=/=\?(&|$)/g,status,data,type=s.type.toUpperCase();if(s.data&&s.processData&&typeof s.data!="string")
s.data=jQuery.param(s.data);if(s.dataType=="jsonp"){if(type=="GET"){if(!s.url.match(jsre))
s.url+=(s.url.match(/\?/)?"&":"?")+(s.jsonp||"callback")+"=?";}else if(!s.data||!s.data.match(jsre))
s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?";s.dataType="json";}
if(s.dataType=="json"&&(s.data&&s.data.match(jsre)||s.url.match(jsre))){jsonp="jsonp"+jsc++;if(s.data)
s.data=(s.data+"").replace(jsre,"="+jsonp+"$1");s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp];}catch(e){}
if(head)
head.removeChild(script);};}
if(s.dataType=="script"&&s.cache==null)
s.cache=false;if(s.cache===false&&type=="GET"){var ts=now();var ret=s.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+ts+"$2");s.url=ret+((ret==s.url)?(s.url.match(/\?/)?"&":"?")+"_="+ts:"");}
if(s.data&&type=="GET"){s.url+=(s.url.match(/\?/)?"&":"?")+s.data;s.data=null;}
if(s.global&&!jQuery.active++)
jQuery.event.trigger("ajaxStart");var remote=/^(?:\w+:)?\/\/([^\/?#]+)/;if(s.dataType=="script"&&type=="GET"&&remote.test(s.url)&&remote.exec(s.url)[1]!=location.host){var head=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.src=s.url;if(s.scriptCharset)
script.charset=s.scriptCharset;if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){done=true;success();complete();head.removeChild(script);}};}
head.appendChild(script);return undefined;}
var requestDone=false;var xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();if(s.username)
xhr.open(type,s.url,s.async,s.username,s.password);else
xhr.open(type,s.url,s.async);try{if(s.data)
xhr.setRequestHeader("Content-Type",s.contentType);if(s.ifModified)
xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url]||"Thu, 01 Jan 1970 00:00:00 GMT");xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default);}catch(e){}
if(s.beforeSend&&s.beforeSend(xhr,s)===false){s.global&&jQuery.active--;xhr.abort();return false;}
if(s.global)
jQuery.event.trigger("ajaxSend",[xhr,s]);var onreadystatechange=function(isTimeout){if(!requestDone&&xhr&&(xhr.readyState==4||isTimeout=="timeout")){requestDone=true;if(ival){clearInterval(ival);ival=null;}
status=isTimeout=="timeout"&&"timeout"||!jQuery.httpSuccess(xhr)&&"error"||s.ifModified&&jQuery.httpNotModified(xhr,s.url)&&"notmodified"||"success";if(status=="success"){try{data=jQuery.httpData(xhr,s.dataType,s.dataFilter);}catch(e){status="parsererror";}}
if(status=="success"){var modRes;try{modRes=xhr.getResponseHeader("Last-Modified");}catch(e){}
if(s.ifModified&&modRes)
jQuery.lastModified[s.url]=modRes;if(!jsonp)
success();}else
jQuery.handleError(s,xhr,status);complete();if(s.async)
xhr=null;}};if(s.async){var ival=setInterval(onreadystatechange,13);if(s.timeout>0)
setTimeout(function(){if(xhr){xhr.abort();if(!requestDone)
onreadystatechange("timeout");}},s.timeout);}
try{xhr.send(s.data);}catch(e){jQuery.handleError(s,xhr,null,e);}
if(!s.async)
onreadystatechange();function success(){if(s.success)
s.success(data,status);if(s.global)
jQuery.event.trigger("ajaxSuccess",[xhr,s]);}
function complete(){if(s.complete)
s.complete(xhr,status);if(s.global)
jQuery.event.trigger("ajaxComplete",[xhr,s]);if(s.global&&!--jQuery.active)
jQuery.event.trigger("ajaxStop");}
return xhr;},handleError:function(s,xhr,status,e){if(s.error)s.error(xhr,status,e);if(s.global)
jQuery.event.trigger("ajaxError",[xhr,s,e]);},active:0,httpSuccess:function(xhr){try{return!xhr.status&&location.protocol=="file:"||(xhr.status>=200&&xhr.status<300)||xhr.status==304||xhr.status==1223||jQuery.browser.safari&&xhr.status==undefined;}catch(e){}
return false;},httpNotModified:function(xhr,url){try{var xhrRes=xhr.getResponseHeader("Last-Modified");return xhr.status==304||xhrRes==jQuery.lastModified[url]||jQuery.browser.safari&&xhr.status==undefined;}catch(e){}
return false;},httpData:function(xhr,type,filter){var ct=xhr.getResponseHeader("content-type"),xml=type=="xml"||!type&&ct&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.tagName=="parsererror")
throw"parsererror";if(filter)
data=filter(data,type);if(type=="script")
jQuery.globalEval(data);if(type=="json")
data=eval("("+data+")");return data;},param:function(a){var s=[];if(a.constructor==Array||a.jquery)
jQuery.each(a,function(){s.push(encodeURIComponent(this.name)+"="+encodeURIComponent(this.value));});else
for(var j in a)
if(a[j]&&a[j].constructor==Array)
jQuery.each(a[j],function(){s.push(encodeURIComponent(j)+"="+encodeURIComponent(this));});else
s.push(encodeURIComponent(j)+"="+encodeURIComponent(jQuery.isFunction(a[j])?a[j]():a[j]));return s.join("&").replace(/%20/g,"+");}});jQuery.fn.extend({show:function(speed,callback){return speed?this.animate({height:"show",width:"show",opacity:"show"},speed,callback):this.filter(":hidden").each(function(){this.style.display=this.oldblock||"";if(jQuery.css(this,"display")=="none"){var elem=jQuery("<"+this.tagName+" />").appendTo("body");this.style.display=elem.css("display");if(this.style.display=="none")
this.style.display="block";elem.remove();}}).end();},hide:function(speed,callback){return speed?this.animate({height:"hide",width:"hide",opacity:"hide"},speed,callback):this.filter(":visible").each(function(){this.oldblock=this.oldblock||jQuery.css(this,"display");this.style.display="none";}).end();},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):fn?this.animate({height:"toggle",width:"toggle",opacity:"toggle"},fn,fn2):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"]();});},slideDown:function(speed,callback){return this.animate({height:"show"},speed,callback);},slideUp:function(speed,callback){return this.animate({height:"hide"},speed,callback);},slideToggle:function(speed,callback){return this.animate({height:"toggle"},speed,callback);},fadeIn:function(speed,callback){return this.animate({opacity:"show"},speed,callback);},fadeOut:function(speed,callback){return this.animate({opacity:"hide"},speed,callback);},fadeTo:function(speed,to,callback){return this.animate({opacity:to},speed,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);return this[optall.queue===false?"each":"queue"](function(){if(this.nodeType!=1)
return false;var opt=jQuery.extend({},optall),p,hidden=jQuery(this).is(":hidden"),self=this;for(p in prop){if(prop[p]=="hide"&&hidden||prop[p]=="show"&&!hidden)
return opt.complete.call(this);if(p=="height"||p=="width"){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow;}}
if(opt.overflow!=null)
this.style.overflow="hidden";opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(/toggle|show|hide/.test(val))
e[val=="toggle"?hidden?"show":"hide":val](prop);else{var parts=val.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit;}
if(parts[1])
end=((parts[1]=="-="?-1:1)*end)+start;e.custom(start,end,unit);}else
e.custom(start,val,"");}});return true;});},queue:function(type,fn){if(jQuery.isFunction(type)||(type&&type.constructor==Array)){fn=type;type="fx";}
if(!type||(typeof type=="string"&&!fn))
return queue(this[0],type);return this.each(function(){if(fn.constructor==Array)
queue(this,type,fn);else{queue(this,type).push(fn);if(queue(this,type).length==1)
fn.call(this);}});},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue)
this.queue([]);this.each(function(){for(var i=timers.length-1;i>=0;i--)
if(timers[i].elem==this){if(gotoEnd)
timers[i](true);timers.splice(i,1);}});if(!gotoEnd)
this.dequeue();return this;}});var queue=function(elem,type,array){if(elem){type=type||"fx";var q=jQuery.data(elem,type+"queue");if(!q||array)
q=jQuery.data(elem,type+"queue",jQuery.makeArray(array));}
return q;};jQuery.fn.dequeue=function(type){type=type||"fx";return this.each(function(){var q=queue(this,type);q.shift();if(q.length)
q[0].call(this);});};jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&speed.constructor==Object?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&easing.constructor!=Function&&easing};opt.duration=(opt.duration&&opt.duration.constructor==Number?opt.duration:jQuery.fx.speeds[opt.duration])||jQuery.fx.speeds.def;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false)
jQuery(this).dequeue();if(jQuery.isFunction(opt.old))
opt.old.call(this);};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],timerId:null,fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig)
options.orig={};}});jQuery.fx.prototype={update:function(){if(this.options.step)
this.options.step.call(this.elem,this.now,this);(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if(this.prop=="height"||this.prop=="width")
this.elem.style.display="block";},cur:function(force){if(this.elem[this.prop]!=null&&this.elem.style[this.prop]==null)
return this.elem[this.prop];var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0;},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;this.update();var self=this;function t(gotoEnd){return self.step(gotoEnd);}
t.elem=this.elem;jQuery.timers.push(t);if(jQuery.timerId==null){jQuery.timerId=setInterval(function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++)
if(!timers[i]())
timers.splice(i--,1);if(!timers.length){clearInterval(jQuery.timerId);jQuery.timerId=null;}},13);}},show:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.show=true;this.custom(0,this.cur());if(this.prop=="width"||this.prop=="height")
this.elem.style[this.prop]="1px";jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=now();if(gotoEnd||t>this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var done=true;for(var i in this.options.curAnim)
if(this.options.curAnim[i]!==true)
done=false;if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(jQuery.css(this.elem,"display")=="none")
this.elem.style.display="block";}
if(this.options.hide)
this.elem.style.display="none";if(this.options.hide||this.options.show)
for(var p in this.options.curAnim)
jQuery.attr(this.elem.style,p,this.options.orig[p]);}
if(done)
this.options.complete.call(this.elem);return false;}else{var n=t-this.startTime;this.state=n/this.options.duration;this.pos=jQuery.easing[this.options.easing||(jQuery.easing.swing?"swing":"linear")](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update();}
return true;}};jQuery.extend(jQuery.fx,{speeds:{slow:600,fast:200,def:400},step:{scrollLeft:function(fx){fx.elem.scrollLeft=fx.now;},scrollTop:function(fx){fx.elem.scrollTop=fx.now;},opacity:function(fx){jQuery.attr(fx.elem.style,"opacity",fx.now);},_default:function(fx){fx.elem.style[fx.prop]=fx.now+fx.unit;}}});jQuery.fn.offset=function(){var left=0,top=0,elem=this[0],results;if(elem)with(jQuery.browser){var parent=elem.parentNode,offsetChild=elem,offsetParent=elem.offsetParent,doc=elem.ownerDocument,safari2=safari&&parseInt(version)<522&&!/adobeair/i.test(userAgent),css=jQuery.curCSS,fixed=css(elem,"position")=="fixed";if(elem.getBoundingClientRect){var box=elem.getBoundingClientRect();add(box.left+Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),box.top+Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));add(-doc.documentElement.clientLeft,-doc.documentElement.clientTop);}else{add(elem.offsetLeft,elem.offsetTop);while(offsetParent){add(offsetParent.offsetLeft,offsetParent.offsetTop);if(mozilla&&!/^t(able|d|h)$/i.test(offsetParent.tagName)||safari&&!safari2)
border(offsetParent);if(!fixed&&css(offsetParent,"position")=="fixed")
fixed=true;offsetChild=/^body$/i.test(offsetParent.tagName)?offsetChild:offsetParent;offsetParent=offsetParent.offsetParent;}
while(parent&&parent.tagName&&!/^body|html$/i.test(parent.tagName)){if(!/^inline|table.*$/i.test(css(parent,"display")))
add(-parent.scrollLeft,-parent.scrollTop);if(mozilla&&css(parent,"overflow")!="visible")
border(parent);parent=parent.parentNode;}
if((safari2&&(fixed||css(offsetChild,"position")=="absolute"))||(mozilla&&css(offsetChild,"position")!="absolute"))
add(-doc.body.offsetLeft,-doc.body.offsetTop);if(fixed)
add(Math.max(doc.documentElement.scrollLeft,doc.body.scrollLeft),Math.max(doc.documentElement.scrollTop,doc.body.scrollTop));}
results={top:top,left:left};}
function border(elem){add(jQuery.curCSS(elem,"borderLeftWidth",true),jQuery.curCSS(elem,"borderTopWidth",true));}
function add(l,t){left+=parseInt(l,10)||0;top+=parseInt(t,10)||0;}
return results;};jQuery.fn.extend({position:function(){var left=0,top=0,results;if(this[0]){var offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].tagName)?{top:0,left:0}:offsetParent.offset();offset.top-=num(this,'marginTop');offset.left-=num(this,'marginLeft');parentOffset.top+=num(offsetParent,'borderTopWidth');parentOffset.left+=num(offsetParent,'borderLeftWidth');results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}
return results;},offsetParent:function(){var offsetParent=this[0].offsetParent;while(offsetParent&&(!/^body|html$/i.test(offsetParent.tagName)&&jQuery.css(offsetParent,'position')=='static'))
offsetParent=offsetParent.offsetParent;return jQuery(offsetParent);}});jQuery.each(['Left','Top'],function(i,name){var method='scroll'+name;jQuery.fn[method]=function(val){if(!this[0])return;return val!=undefined?this.each(function(){this==window||this==document?window.scrollTo(!i?val:jQuery(window).scrollLeft(),i?val:jQuery(window).scrollTop()):this[method]=val;}):this[0]==window||this[0]==document?self[i?'pageYOffset':'pageXOffset']||jQuery.boxModel&&document.documentElement[method]||document.body[method]:this[0][method];};});jQuery.each(["Height","Width"],function(i,name){var tl=i?"Left":"Top",br=i?"Right":"Bottom";jQuery.fn["inner"+name]=function(){return this[name.toLowerCase()]()+
num(this,"padding"+tl)+
num(this,"padding"+br);};jQuery.fn["outer"+name]=function(margin){return this["inner"+name]()+
num(this,"border"+tl+"Width")+
num(this,"border"+br+"Width")+
(margin?num(this,"margin"+tl)+num(this,"margin"+br):0);};});})();;;(function($){$.effects=$.effects||{};$.extend($.effects,{save:function(el,set){for(var i=0;i<set.length;i++){if(set[i]!==null)$.data(el[0],"ec.storage."+set[i],el[0].style[set[i]]);}},restore:function(el,set){for(var i=0;i<set.length;i++){if(set[i]!==null)el.css(set[i],$.data(el[0],"ec.storage."+set[i]));}},setMode:function(el,mode){if(mode=='toggle')mode=el.is(':hidden')?'show':'hide';return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case'top':y=0;break;case'middle':y=0.5;break;case'bottom':y=1;break;default:y=origin[0]/original.height;};switch(origin[1]){case'left':x=0;break;case'center':x=0.5;break;case'right':x=1;break;default:x=origin[1]/original.width;};return{x:x,y:y};},createWrapper:function(el){if(el.parent().attr('id')=='fxWrapper')
return el;var props={width:el.outerWidth({margin:true}),height:el.outerHeight({margin:true}),'float':el.css('float')};el.wrap('<div id="fxWrapper" style="font-size:100%;background:transparent;border:none;margin:0;padding:0"></div>');var wrapper=el.parent();if(el.css('position')=='static'){wrapper.css({position:'relative'});el.css({position:'relative'});}else{var top=parseInt(el.css('top'),10);if(isNaN(top))top='auto';var left=parseInt(el.css('left'),10);if(isNaN(top))left='auto';wrapper.css({position:el.css('position'),top:top,left:left,zIndex:el.css('z-index')}).show();el.css({position:'relative',top:0,left:0});}
wrapper.css(props);return wrapper;},removeWrapper:function(el){if(el.parent().attr('id')=='fxWrapper')
return el.parent().replaceWith(el);return el;},setTransition:function(el,list,factor,val){val=val||{};$.each(list,function(i,x){unit=el.cssUnit(x);if(unit[0]>0)val[x]=unit[0]*factor+unit[1];});return val;},animateClass:function(value,duration,easing,callback){var cb=(typeof easing=="function"?easing:(callback?callback:null));var ea=(typeof easing=="object"?easing:null);return this.each(function(){var offset={};var that=$(this);var oldStyleAttr=that.attr("style")||'';if(typeof oldStyleAttr=='object')oldStyleAttr=oldStyleAttr["cssText"];if(value.toggle){that.hasClass(value.toggle)?value.remove=value.toggle:value.add=value.toggle;}
var oldStyle=$.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(value.add)that.addClass(value.add);if(value.remove)that.removeClass(value.remove);var newStyle=$.extend({},(document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle));if(value.add)that.removeClass(value.add);if(value.remove)that.addClass(value.remove);for(var n in newStyle){if(typeof newStyle[n]!="function"&&newStyle[n]&&n.indexOf("Moz")==-1&&n.indexOf("length")==-1&&newStyle[n]!=oldStyle[n]&&(n.match(/color/i)||(!n.match(/color/i)&&!isNaN(parseInt(newStyle[n],10))))&&(oldStyle.position!="static"||(oldStyle.position=="static"&&!n.match(/left|top|bottom|right/))))offset[n]=newStyle[n];}
that.animate(offset,duration,ea,function(){if(typeof $(this).attr("style")=='object'){$(this).attr("style")["cssText"]="";$(this).attr("style")["cssText"]=oldStyleAttr;}else $(this).attr("style",oldStyleAttr);if(value.add)$(this).addClass(value.add);if(value.remove)$(this).removeClass(value.remove);if(cb)cb.apply(this,arguments);});});}});$.fn.extend({_show:$.fn.show,_hide:$.fn.hide,__toggle:$.fn.toggle,_addClass:$.fn.addClass,_removeClass:$.fn.removeClass,_toggleClass:$.fn.toggleClass,effect:function(fx,o,speed,callback){return $.effects[fx]?$.effects[fx].call(this,{method:fx,options:o||{},duration:speed,callback:callback}):null;},show:function(){if(!arguments[0]||(arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])))
return this._show.apply(this,arguments);else{var o=arguments[1]||{};o['mode']='show';return this.effect.apply(this,[arguments[0],o,arguments[2]||o.duration,arguments[3]||o.callback]);}},hide:function(){if(!arguments[0]||(arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0])))
return this._hide.apply(this,arguments);else{var o=arguments[1]||{};o['mode']='hide';return this.effect.apply(this,[arguments[0],o,arguments[2]||o.duration,arguments[3]||o.callback]);}},toggle:function(){if(!arguments[0]||(arguments[0].constructor==Number||/(slow|normal|fast)/.test(arguments[0]))||(arguments[0].constructor==Function))
return this.__toggle.apply(this,arguments);else{var o=arguments[1]||{};o['mode']='toggle';return this.effect.apply(this,[arguments[0],o,arguments[2]||o.duration,arguments[3]||o.callback]);}},addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames);},removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames);},toggleClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{toggle:classNames},speed,easing,callback]):this._toggleClass(classNames);},morph:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback]);},switchClass:function(){return this.morph.apply(this,arguments);},cssUnit:function(key){var style=this.css(key),val=[];$.each(['em','px','%','pt'],function(i,unit){if(style.indexOf(unit)>0)
val=[parseFloat(style),unit];});return val;}});jQuery.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','color','outlineColor'],function(i,attr){jQuery.fx.step[attr]=function(fx){if(fx.state==0){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);}
fx.elem.style[attr]="rgb("+[Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1]),255),0),Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2]),255),0)].join(",")+")";}});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1]),parseInt(result[2]),parseInt(result[3])];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\(0, 0, 0, 0\)/.exec(color))
return colors['transparent']
return colors[jQuery.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=jQuery.curCSS(elem,attr);if(color!=''&&color!='transparent'||jQuery.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});})(jQuery);;(function($){$.fn.bgIframe=$.fn.bgiframe=function(s){if($.browser.msie&&/6.0/.test(navigator.userAgent)){s=$.extend({top:'auto',left:'auto',width:'auto',height:'auto',opacity:true,src:'javascript:false;'},s||{});var prop=function(n){return n&&n.constructor==Number?n+'px':n;},html='<iframe class="bgiframe"frameborder="0"tabindex="-1"src="'+s.src+'"'+'style="display:block;position:absolute;z-index:-1;'+
(s.opacity!==false?'filter:Alpha(Opacity=\'0\');':'')+'top:'+(s.top=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderTopWidth)||0)*-1)+\'px\')':prop(s.top))+';'+'left:'+(s.left=='auto'?'expression(((parseInt(this.parentNode.currentStyle.borderLeftWidth)||0)*-1)+\'px\')':prop(s.left))+';'+'width:'+(s.width=='auto'?'expression(this.parentNode.offsetWidth+\'px\')':prop(s.width))+';'+'height:'+(s.height=='auto'?'expression(this.parentNode.offsetHeight+\'px\')':prop(s.height))+';'+'"/>';return this.each(function(){if($('> iframe.bgiframe',this).length==0)
this.insertBefore(document.createElement(html),this.firstChild);});}
return this;};})(jQuery);;(function($){$.dimensions={version:'1.2'};$.each(['Height','Width'],function(i,name){$.fn['inner'+name]=function(){if(!this[0])return;var torl=name=='Height'?'Top':'Left',borr=name=='Height'?'Bottom':'Right';return this.is(':visible')?this[0]['client'+name]:num(this,name.toLowerCase())+num(this,'padding'+torl)+num(this,'padding'+borr);};$.fn['outer'+name]=function(options){if(!this[0])return;var torl=name=='Height'?'Top':'Left',borr=name=='Height'?'Bottom':'Right';options=$.extend({margin:false},options||{});var val=this.is(':visible')?this[0]['offset'+name]:num(this,name.toLowerCase())
+num(this,'border'+torl+'Width')+num(this,'border'+borr+'Width')
+num(this,'padding'+torl)+num(this,'padding'+borr);return val+(options.margin?(num(this,'margin'+torl)+num(this,'margin'+borr)):0);};});$.each(['Left','Top'],function(i,name){$.fn['scroll'+name]=function(val){if(!this[0])return;return val!=undefined?this.each(function(){this==window||this==document?window.scrollTo(name=='Left'?val:$(window)['scrollLeft'](),name=='Top'?val:$(window)['scrollTop']()):this['scroll'+name]=val;}):this[0]==window||this[0]==document?self[(name=='Left'?'pageXOffset':'pageYOffset')]||$.boxModel&&document.documentElement['scroll'+name]||document.body['scroll'+name]:this[0]['scroll'+name];};});$.fn.extend({position:function(){var left=0,top=0,elem=this[0],offset,parentOffset,offsetParent,results;if(elem){offsetParent=this.offsetParent();offset=this.offset();parentOffset=offsetParent.offset();offset.top-=num(elem,'marginTop');offset.left-=num(elem,'marginLeft');parentOffset.top+=num(offsetParent,'borderTopWidth');parentOffset.left+=num(offsetParent,'borderLeftWidth');results={top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};}
return results;},offsetParent:function(){var offsetParent=this[0].offsetParent;while(offsetParent&&(!/^body|html$/i.test(offsetParent.tagName)&&$.css(offsetParent,'position')=='static'))
offsetParent=offsetParent.offsetParent;return $(offsetParent);}});function num(el,prop){return parseInt($.curCSS(el.jquery?el[0]:el,prop,true))||0;};})(jQuery);;(function($){$.extend({metadata:{defaults:{type:'class',name:'metadata',cre:/({.*})/,single:'metadata'},setType:function(type,name){this.defaults.type=type;this.defaults.name=name;},get:function(elem,opts){var settings=$.extend({},this.defaults,opts);if(!settings.single.length)settings.single='metadata';var data=$.data(elem,settings.single);if(data)return data;data="{}";if(settings.type=="class"){var m=settings.cre.exec(elem.className);if(m)
data=m[1];}else if(settings.type=="elem"){if(!elem.getElementsByTagName)return;var e=elem.getElementsByTagName(settings.name);if(e.length)
data=$.trim(e[0].innerHTML);}else if(elem.getAttribute!=undefined){var attr=elem.getAttribute(settings.name);if(attr)
data=attr;}
if(data.indexOf('{')<0)
data="{"+data+"}";data=eval("("+data+")");$.data(elem,settings.single,data);return data;}}});$.fn.metadata=function(opts){return $.metadata.get(this[0],opts);};})(jQuery);;jQuery.extend(jQuery.fn,{validate:function(options){if(!this.length){options&&options.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return;}
var validator=jQuery.data(this[0],'validator');if(validator){return validator;}
validator=new jQuery.validator(options,this[0]);jQuery.data(this[0],'validator',validator);if(validator.settings.onsubmit){this.find("input.cancel:submit").click(function(){validator.cancelSubmit=true;});this.submit(function(event){if(validator.settings.debug)
event.preventDefault();function handle(){if(validator.settings.submitHandler){validator.settings.submitHandler.call(validator,validator.currentForm);return false;}
return true;}
if(validator.cancelSubmit){validator.cancelSubmit=false;return handle();}
if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false;}
return handle();}else{validator.focusInvalid();return false;}});}
return validator;},valid:function(){if(jQuery(this[0]).is('form')){return this.validate().form();}else{var valid=true;var validator=jQuery(this[0].form).validate();this.each(function(){valid=validator.element(this)&&valid;});return valid;}},rules:function(){var element=this[0];var data=jQuery.validator.normalizeRules(jQuery.extend({},jQuery.validator.metadataRules(element),jQuery.validator.classRules(element),jQuery.validator.attributeRules(element),jQuery.validator.staticRules(element)),element);var rules=[];if(data.required){rules.push({method:'required',parameters:data.required});delete data.required;}
jQuery.each(data,function(method,value){rules.push({method:method,parameters:value});});return rules;},push:function(t){return this.setArray(this.add(t).get());}});jQuery.extend(jQuery.expr[":"],{blank:"!jQuery.trim(a.value)",filled:"!!jQuery.trim(a.value)",unchecked:"!a.checked"});jQuery.format=function(source,params){if(arguments.length==1)
return function(){var args=jQuery.makeArray(arguments);args.unshift(source);return jQuery.format.apply(this,args);};if(arguments.length>2&&params.constructor!=Array){params=jQuery.makeArray(arguments).slice(1);}
if(params.constructor!=Array){params=[params];}
jQuery.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),n);});return source;};jQuery.validator=function(options,form){this.settings=jQuery.extend({},jQuery.validator.defaults,options);this.currentForm=form;this.init();};jQuery.extend(jQuery.validator,{defaults:{messages:{},errorClass:"error",errorElement:"label",focusInvalid:true,errorContainer:jQuery([]),errorLabelContainer:jQuery([]),onsubmit:true,ignore:[],onfocusin:function(element){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass);this.errorsFor(element).hide();}},onfocusout:function(element){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element);}},onkeyup:function(element){if(element.name in this.submitted||element==this.lastElement){this.element(element);}},onclick:function(element){if(element.name in this.submitted)
this.element(element);},highlight:function(element,errorClass){jQuery(element).addClass(errorClass);},unhighlight:function(element,errorClass){jQuery(element).removeClass(errorClass);}},setDefaults:function(settings){jQuery.extend(jQuery.validator.defaults,settings);},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",dateDE:"Bitte geben Sie ein gltiges Datum ein.",number:"Please enter a valid number.",numberDE:"Bitte geben Sie eine Nummer ein.",digits:"Please enter only digits",creditcard:"Please enter a valid credit card.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:jQuery.format("Please enter no more than {0} characters."),maxLength:jQuery.format("Please enter no more than {0} characters."),minlength:jQuery.format("Please enter at least {0} characters."),minLength:jQuery.format("Please enter at least {0} characters."),rangelength:jQuery.format("Please enter a value between {0} and {1} characters long."),rangeLength:jQuery.format("Please enter a value between {0} and {1} characters long."),rangeValue:jQuery.format("Please enter a value between {0} and {1}."),range:jQuery.format("Please enter a value between {0} and {1}."),maxValue:jQuery.format("Please enter a value less than or equal to {0}."),max:jQuery.format("Please enter a value less than or equal to {0}."),minValue:jQuery.format("Please enter a value greater than or equal to {0}."),min:jQuery.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=jQuery(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||jQuery(this.currentForm);this.containers=jQuery(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();function delegate(event){var validator=jQuery.data(this[0].form,"validator");validator.settings["on"+event.type]&&validator.settings["on"+event.type].call(validator,this[0]);}
jQuery(this.currentForm).delegateValidatorEvent("focusin focusout keyup",":text, :password, :file, select, textarea",delegate).delegateValidatorEvent("click",":radio, :checkbox",delegate);},form:function(){this.prepareForm();var elements=this.elements();for(var i=0;elements[i];i++){this.check(elements[i]);}
jQuery.extend(this.submitted,this.errorMap);this.invalid=jQuery.extend({},this.errorMap);jQuery(this.currentForm).triggerHandler("invalid-form.validate",[this]);this.showErrors();return this.valid();},element:function(element){element=this.clean(element);this.lastElement=element;this.prepareElement(element);var result=this.check(element);if(result){delete this.invalid[element.name];}else{this.invalid[element.name]=true;}
if(!this.numberOfInvalids()){this.toHide.push(this.containers);}
this.showErrors();return result;},showErrors:function(errors){if(errors){jQuery.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]});}
this.successList=jQuery.grep(this.successList,function(element){return!(element.name in errors);});}
this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors();},resetForm:function(){if(jQuery.fn.resetForm)
jQuery(this.currentForm).resetForm();this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass);},numberOfInvalids:function(){var count=0;for(var i in this.invalid)
count++;return count;},hideErrors:function(){this.addWrapper(this.toHide).hide();},valid:function(){return this.size()==0;},size:function(){return this.errorList.length;},focusInvalid:function(){if(this.settings.focusInvalid){try{jQuery(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus();}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&jQuery.grep(this.errorList,function(n){return n.element.name==lastActive.name;}).length==1&&lastActive;},elements:function(){var validator=this;var rulesCache={};return jQuery([]).add(this.currentForm.elements).filter("input, select, textarea").not(":submit, :reset, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&validator.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in rulesCache||!jQuery(this).rules().length)
return false;rulesCache[this.name]=true;return true;});},clean:function(selector){return jQuery(selector)[0];},errors:function(){return jQuery(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext);},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=jQuery([]);this.toHide=jQuery([]);this.formSubmitted=false;},prepareForm:function(){this.reset();this.toHide=this.errors().push(this.containers);},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(this.clean(element));},check:function(element){element=this.clean(element);this.settings.unhighlight&&this.settings.unhighlight.call(this,element,this.settings.errorClass);var rules=jQuery(element).rules();for(var i=0;rules[i];i++){var rule=rules[i];try{var result=jQuery.validator.methods[rule.method].call(this,jQuery.trim(element.value),element,rule.parameters);if(result=="dependency-mismatch")
return;if(result=="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return;}
if(!result){this.formatAndAdd(element,rule);return false;}}catch(e){this.settings.debug&&window.console&&console.warn("exception occurred when checking element "+element.id
+", check the '"+rule.method+"' method");throw e;}}
if(rules.length)
this.successList.push(element);return true;},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor==String?m:m[method]);},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined)
return arguments[i];}
return undefined;},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),element.title||undefined,jQuery.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>");},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method);if(typeof message=="function")
message=message.call(this,rule.parameters,element);this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message;},addWrapper:function(toToggle){if(this.settings.wrapper)
toToggle.push(toToggle.parents(this.settings.wrapper));return toToggle;},defaultShowErrors:function(){for(var i=0;this.errorList[i];i++){var error=this.errorList[i];this.settings.highlight&&this.settings.highlight.call(this,error.element,this.settings.errorClass);this.showLabel(error.element,error.message);}
if(this.errorList.length){this.toShow.push(this.containers);}
if(this.settings.success){for(var i=0;this.successList[i];i++){this.showLabel(this.successList[i]);}}
this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show();},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass().addClass(this.settings.errorClass);label.attr("generated")&&label.html(message);}else{label=jQuery("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(element),generated:true}).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+">").parent();}
if(!this.labelContainer.append(label).length)
this.settings.errorPlacement?this.settings.errorPlacement(label,jQuery(element)):label.insertAfter(element);}
if(!message&&this.settings.success){label.text("");typeof this.settings.success=="string"?label.addClass(this.settings.success):this.settings.success(label);}
this.toShow.push(label);},errorsFor:function(element){return this.errors().filter("[@for='"+this.idOrName(element)+"']");},idOrName:function(element){return this.checkable(element)?element.name:element.id||element.name;},rules:function(element){return jQuery(element).rules();},checkable:function(element){return/radio|checkbox/i.test(element.type);},findByName:function(name){var form=this.currentForm;return jQuery(document.getElementsByName(name)).map(function(index,element){return element.form==form&&element||null;});},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case'select':return jQuery("option:selected",element).length;case'input':if(this.checkable(element))
return this.findByName(element.name).filter(':checked').length;}
return value.length;},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true;},dependTypes:{"boolean":function(param,element){return param;},"string":function(param,element){return!!jQuery(param,element.form).length;},"function":function(param,element){return param(element);}},optional:function(element){return!jQuery.validator.methods.required.call(this,jQuery.trim(element.value),element)&&"dependency-mismatch";},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true;}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0)
this.pendingRequest=0;delete this.pending[element.name];if(valid&&this.pendingRequest==0&&this.formSubmitted&&this.form()){jQuery(this.currentForm).submit();}},previousValue:function(element){return jQuery.data(element,"previousValue")||jQuery.data(element,"previousValue",previous={old:null,valid:true,message:this.defaultMessage(element,"remote")});}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){className.constructor==String?this.classRuleSettings[className]=rules:jQuery.extend(this.classRuleSettings,className);},classRules:function(element){var rules={};var classes=jQuery(element).attr('class');classes&&jQuery.each(classes.split(' '),function(){if(this in jQuery.validator.classRuleSettings){jQuery.extend(rules,jQuery.validator.classRuleSettings[this]);}});return rules;},attributeRules:function(element){var rules={};var $element=jQuery(element);for(method in jQuery.validator.methods){var value=$element.attr(method);if(value!==undefined&&value!==''){rules[method]=value;}}
if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength;delete rules.maxLength;}
return rules;},metadataRules:function(element){if(!jQuery.metadata)return{};var meta=jQuery.data(element.form,'validator').settings.meta;return meta?jQuery(element).metadata()[meta]:jQuery(element).metadata();},staticRules:function(element){var rules={};var validator=jQuery.data(element.form,'validator');if(validator.settings.rules){rules=jQuery.validator.normalizeRule(validator.settings.rules[element.name])||{};}
return rules;},normalizeRules:function(rules,element){jQuery.each({minLength:'minlength',maxLength:'maxlength',rangeLength:'rangelength',minValue:'min',maxValue:'max',rangeValue:'range'},function(dep,curr){if(rules[dep]){rules[curr]=rules[dep];delete rules[dep];}});jQuery.each(rules,function(rule,parameter){rules[rule]=jQuery.isFunction(parameter)?parameter(element):parameter;});jQuery.each(['minlength','maxlength','min','max'],function(){if(rules[this]){rules[this]=Number(rules[this]);}});jQuery.each(['rangelength','range'],function(){if(rules[this]){rules[this]=[Number(rules[this][0]),Number(rules[this][1])];}});if(jQuery.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max;}
if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength;}}
return rules;},normalizeRule:function(data){if(typeof data=="string"){var transformed={};transformed[data]=true;data=transformed;}
return data;},addMethod:function(name,method,message){jQuery.validator.methods[name]=method;jQuery.validator.messages[name]=message;if(method.length<3){jQuery.validator.addClassRules(name,jQuery.validator.normalizeRule(name));}},methods:{required:function(value,element,param){if(!this.depend(param,element))
return"dependency-mismatch";switch(element.nodeName.toLowerCase()){case'select':var options=jQuery("option:selected",element);return options.length>0&&(element.type=="select-multiple"||(jQuery.browser.msie&&!(options[0].attributes['value'].specified)?options[0].text:options[0].value).length>0);case'input':if(this.checkable(element))
return this.getLength(value,element)>0;default:return value.length>0;}},remote:function(value,element,param){if(this.optional(element))
return"dependency-mismatch";var previous=this.previousValue(element);if(!this.settings.messages[element.name])
this.settings.messages[element.name]={};this.settings.messages[element.name].remote=typeof previous.message=="function"?previous.message(value):previous.message;if(previous.old!==value){previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;jQuery.ajax({url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){if(!response){var errors={};errors[element.name]=response||validator.defaultMessage(element,"remote");validator.showErrors(errors);}else{var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);validator.showErrors();}
previous.valid=response;validator.stopRequest(element,response);}});return"pending";}else if(this.pending[element.name]){return"pending";}
return previous.valid;},minlength:function(value,element,param){return this.optional(element)||this.getLength(value,element)>=param;},minLength:function(value,element,param){return jQuery.validator.methods.minlength.apply(this,arguments);},maxlength:function(value,element,param){return this.optional(element)||this.getLength(value,element)<=param;},maxLength:function(value,element,param){return jQuery.validator.methods.maxlength.apply(this,arguments);},rangelength:function(value,element,param){var length=this.getLength(value,element);return this.optional(element)||(length>=param[0]&&length<=param[1]);},rangeLength:function(value,element,param){return jQuery.validator.methods.rangelength.apply(this,arguments);},min:function(value,element,param){return this.optional(element)||value>=param;},minValue:function(){return jQuery.validator.methods.min.apply(this,arguments);},max:function(value,element,param){return this.optional(element)||value<=param;},maxValue:function(){return jQuery.validator.methods.max.apply(this,arguments);},range:function(value,element,param){return this.optional(element)||(value>=param[0]&&value<=param[1]);},rangeValue:function(){return jQuery.validator.methods.range.apply(this,arguments);},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value);},url:function(value,element){return this.optional(element)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value);},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value));},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value);},dateDE:function(value,element){return this.optional(element)||/^\d\d?\.\d\d?\.\d\d\d?\d?$/.test(value);},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value);},numberDE:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:\.\d{3})+)(?:,\d+)?$/.test(value);},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value);},creditcard:function(value,element){if(this.optional(element))
return"dependency-mismatch";var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);var nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9)
nDigit-=9;}
nCheck+=nDigit;bEven=!bEven;}
return(nCheck%10)==0;},accept:function(value,element,param){param=typeof param=="string"?param:"png|jpe?g|gif";return this.optional(element)||value.match(new RegExp(".("+param+")$","i"));},equalTo:function(value,element,param){return value==jQuery(param).val();}}});;(function($){var ajax=$.ajax;var pendingRequests={};$.ajax=function(settings){settings=jQuery.extend(settings,jQuery.extend({},jQuery.ajaxSettings,settings));var port=settings.port;if(settings.mode=="abort"){if(pendingRequests[port]){pendingRequests[port].abort();}
return pendingRequests[port]=ajax.apply(this,arguments);}
return ajax.apply(this,arguments);};})(jQuery);;(function($){$.extend($.event.special,{focusin:{setup:function(){if($.browser.msie)
return false;this.addEventListener("focus",$.event.special.focusin.handler,true);},teardown:function(){if($.browser.msie)
return false;this.removeEventListener("focus",$.event.special.focusin.handler,true);},handler:function(event){var args=Array.prototype.slice.call(arguments,1);args.unshift($.extend($.event.fix(event),{type:"focusin"}));return $.event.handle.apply(this,args);}},focusout:{setup:function(){if($.browser.msie)
return false;this.addEventListener("blur",$.event.special.focusout.handler,true);},teardown:function(){if($.browser.msie)
return false;this.removeEventListener("blur",$.event.special.focusout.handler,true);},handler:function(event){var args=Array.prototype.slice.call(arguments,1);args.unshift($.extend($.event.fix(event),{type:"focusout"}));return $.event.handle.apply(this,args);}}});$.extend($.fn,{delegateValidatorEvent:function(type,delegate,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments);}});},triggerEvent:function(type,target){return this.triggerHandler(type,[jQuery.event.fix({type:type,target:target})]);}})})(jQuery);;(function($){$.fn.jqm=function(o){var _o={zIndex:3000,overlay:50,overlayClass:'jqmOverlay',closeClass:'jqmClose',trigger:'.jqModal',ajax:false,target:false,modal:false,toTop:false,onShow:false,onHide:false,onLoad:false};return this.each(function(){if(this._jqm)
return;s++;this._jqm=s;H[s]={c:$.extend(_o,o),a:false,w:$(this).addClass('jqmID'+s),s:s};if(_o.trigger)
$(this).jqmAddTrigger(_o.trigger);});};$.fn.jqmAddClose=function(e){hs(this,e,'jqmHide');return this;};$.fn.jqmAddTrigger=function(e){hs(this,e,'jqmShow');return this;};$.fn.jqmShow=function(t){return this.each(function(){if(!H[this._jqm].a)
$.jqm.open(this._jqm,t)});};$.fn.jqmHide=function(t){return this.each(function(){if(H[this._jqm].a)
$.jqm.close(this._jqm,t)});};$.jqm={hash:{},open:function(s,t){var h=H[s],c=h.c,cc='.'+c.closeClass,z=(/^\d+$/.test(h.w.css('z-index')))?h.w.css('z-index'):c.zIndex,o=$('<div></div>').css({height:'100%',width:'100%',position:'fixed',left:0,top:0,'z-index':z-1,opacity:c.overlay/100});h.t=t;h.a=true;h.w.css('z-index',z);if(c.modal){if(!A[0])
F('bind');A.push(s);o.css('cursor','wait');}else if(c.overlay>0)
h.w.jqmAddClose(o);else
o=false;h.o=(o)?o.addClass(c.overlayClass):false;if(h.o&&!($.browser.msie&&(parseInt($.browser.version)==6))){h.w.parent().append(h.o);}
if(ie6){$('html,body').css({height:'100%',width:'100%'});if(o){o=o.css({position:'absolute'})[0];for(var y in{Top:1,Left:1})
o.style.setExpression(y.toLowerCase(),"(_=(document.documentElement.scroll"+y
+" || document.body.scroll"+y
+"))+'px'");}}
if(c.ajax){var r=c.target||h.w,u=c.ajax,r=(typeof r=='string')?$(r,h.w):$(r),u=(u.substr(0,1)=='@')?$(t).attr(u.substring(1)):u;r.load(u,function(){if(c.onLoad)
c.onLoad.call(this,h);if(cc)
h.w.jqmAddClose($(cc,h.w));e(h);});}else if(cc)
h.w.jqmAddClose($(cc,h.w));if(c.toTop&&h.o)
h.w.before('<span id="jqmP'+h.w[0]._jqm+'"></span>').insertAfter(h.o);(c.onShow)?c.onShow(h):h.w.show();e(h);return false;},close:function(s){var h=H[s];h.a=false;if(A[0]){A.pop();if(!A[0])
F('unbind');}
if(h.c.toTop&&h.o)
$('#jqmP'+h.w[0]._jqm).after(h.w).remove();if(h.c.onHide)
h.c.onHide(h);else{h.w.hide();if(h.o)
h.o.remove();}
return false;}};var s=0;var H=$.jqm.hash;var A=[];var ie6=$.browser.msie&&(parseInt($.browser.version)==6);var i=$('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});var e=function(h){if(ie6)
if(h.o)
h.o.html('<p style="width:100%;height:100%"/>').prepend(i);else if(!$('iframe.jqm',h.w)[0])
h.w.prepend(i);f(h);};var f=function(h){try{$(':input:visible',h.w)[0].focus();}catch(e){}};var F=function(t){$()[t]("keypress",m)[t]("keydown",m)[t]("mousedown",m);};var m=function(e){var h=H[A[A.length-1]],r=(!$(e.target).parents('.jqmID'+h.s)[0]);if(r)
f(h);if(e.type=='keypress'&&e.keyCode==27&&h.w){h.w.jqmHide(h);}
return!r;};var hs=function(w,e,y){var s=[];w.each(function(){s.push(this._jqm)});$(e).each(function(){if(this[y])
$.extend(this[y],s);else{this[y]=s;$(this).click(function(){for(var i in{jqmShow:1,jqmHide:1})
for(var s in this[i])
if(H[this[i][s]])
H[this[i][s]].w[i](this);return false;});}});};})(jQuery);;(function(jQuery){jQuery.fn.typeWatch=function(o){var options=jQuery.extend({wait:750,callback:function(){},highlight:true,captureLength:2,submitOnEnter:true},o);function checkElement(timer,override){var elTxt=jQuery(timer.el).val();if((elTxt.length>options.captureLength||elTxt.length==0)&&(elTxt.toUpperCase()!=timer.text||override)){timer.text=elTxt.toUpperCase();timer.cb(elTxt);}};function watchElement(elem){if(elem.type.toUpperCase()=="TEXT"||elem.nodeName.toUpperCase()=="TEXTAREA"){var timer={timer:null,text:jQuery(elem).val().toUpperCase(),cb:options.callback,el:elem,wait:options.wait};if(options.highlight){jQuery(elem).focus(function(){this.select();});}
var startWatch=function(evt){var timerWait=timer.wait;var overrideBool=false;if(options.submitOnEnter&&evt.keyCode==13&&this.type.toUpperCase()=="TEXT"){timerWait=1;overrideBool=true;}
var timerCallbackFx=function()
{checkElement(timer,overrideBool)}
clearTimeout(timer.timer);timer.timer=setTimeout(timerCallbackFx,timerWait);};jQuery(elem).keydown(startWatch);}};return this.each(function(index){watchElement(this);});};})(jQuery);;;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);$input.keydown(function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){if(!options.multiple)
$input.blur();event.preventDefault();}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).keypress(function(){}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=8){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result)$input.val("");});}};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180,attachTo:'body'};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatItem(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(options.attachTo);list=$("<ul>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass();movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;var li=$("<li>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_event":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.scrollTop(0);list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
field.focus();};})(jQuery);;(function($){$.fn.example=function(text,args){var options=$.extend({},$.fn.example.defaults,args,{example_text:text});var callback=$.isFunction(options.example_text);if(!$.fn.example.bound_class_names[options.class_name]){$(window).unload(function(){$('.'+options.class_name).val('');});$('form').submit(function(){$(this).find('.'+options.class_name).val('');});$.fn.example.bound_class_names[options.class_name]=true;}
return this.each(function(){var $this=$(this);var o=$.metadata?$.extend({},options,$this.metadata()):options;if($.browser.msie&&!$this.attr('defaultValue')&&(callback?$this.val()!='':$this.val()==o.example_text)){$this.val('');}
if($this.val()==''){$this.addClass(options.class_name);$this.val(callback?o.example_text.call(this):o.example_text);}
if(options.hide_label){var label=$('label[@for='+$this.attr('id')+']');label.next('br').hide();label.hide();}
$this.focus(function(){if($(this).is('.'+options.class_name)){$(this).val('');$(this).removeClass(options.class_name);}});$this.blur(function(){if($(this).val()==''){$(this).addClass(options.class_name);$(this).val(callback?o.example_text.call(this):o.example_text);}});});};$.fn.example.defaults={example_text:'',class_name:'example',hide_label:false};$.fn.example.bound_class_names=[];})(jQuery);;Calendar=function(firstDayOfWeek,dateStr,onSelected,onClose){this.activeDiv=null;this.currentDateEl=null;this.getDateStatus=null;this.getDateToolTip=null;this.getDateText=null;this.timeout=null;this.onSelected=onSelected||null;this.onClose=onClose||null;this.dragging=false;this.hidden=false;this.minYear=1970;this.maxYear=2050;this.dateFormat=Calendar._TT["DEF_DATE_FORMAT"];this.ttDateFormat=Calendar._TT["TT_DATE_FORMAT"];this.isPopup=true;this.weekNumbers=true;this.firstDayOfWeek=typeof firstDayOfWeek=="number"?firstDayOfWeek:Calendar._FD;this.showsOtherMonths=false;this.dateStr=dateStr;this.ar_days=null;this.showsTime=false;this.time24=true;this.yearStep=2;this.hiliteToday=true;this.multiple=null;this.table=null;this.element=null;this.tbody=null;this.firstdayname=null;this.monthsCombo=null;this.yearsCombo=null;this.hilitedMonth=null;this.activeMonth=null;this.hilitedYear=null;this.activeYear=null;this.dateClicked=false;if(typeof Calendar._SDN=="undefined"){if(typeof Calendar._SDN_len=="undefined")
Calendar._SDN_len=3;var ar=new Array();for(var i=8;i>0;){ar[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);}
Calendar._SDN=ar;if(typeof Calendar._SMN_len=="undefined")
Calendar._SMN_len=3;ar=new Array();for(var i=12;i>0;){ar[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);}
Calendar._SMN=ar;}};Calendar._C=null;Calendar.is_ie=(/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent));Calendar.is_ie5=(Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent));Calendar.is_ie7up=((/MSIE (\d+\.\d+);/.test(navigator.userAgent))&&parseInt(RegExp.$1)>6);Calendar.is_opera=/opera/i.test(navigator.userAgent);Calendar.is_opera9up=(Calendar.is_opera&&parseInt(navigator.appVersion)>8);Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent);Calendar.getAbsolutePos=function(el){var SL=0,ST=0;var is_div=/^div$/i.test(el.tagName);if(is_div&&el.scrollLeft)
SL=el.scrollLeft;if(is_div&&el.scrollTop)
ST=el.scrollTop;var r={x:el.offsetLeft-SL,y:el.offsetTop-ST};if(el.offsetParent){var tmp=this.getAbsolutePos(el.offsetParent);r.x+=tmp.x;r.y+=tmp.y;}
return r;};Calendar.isRelated=function(el,evt){var related=evt.relatedTarget;if(!related){var type=evt.type;if(type=="mouseover"){related=evt.fromElement;}else if(type=="mouseout"){related=evt.toElement;}}
while(related){if(related==el){return true;}
related=related.parentNode;}
return false;};Calendar.removeClass=function(el,className){if(!(el&&el.className)){return;}
var cls=el.className.split(" ");var ar=new Array();for(var i=cls.length;i>0;){if(cls[--i]!=className){ar[ar.length]=cls[i];}}
el.className=ar.join(" ");};Calendar.addClass=function(el,className){Calendar.removeClass(el,className);el.className+=" "+className;};Calendar.getElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.currentTarget;while(f.nodeType!=1||/^div$/i.test(f.tagName))
f=f.parentNode;return f;};Calendar.getTargetElement=function(ev){var f=Calendar.is_ie?window.event.srcElement:ev.target;while(f.nodeType!=1)
f=f.parentNode;return f;};Calendar.stopEvent=function(ev){ev||(ev=window.event);if(Calendar.is_ie){ev.cancelBubble=true;ev.returnValue=false;}else{ev.preventDefault();ev.stopPropagation();}
return false;};Calendar.addEvent=function(el,evname,func){if(el.attachEvent){el.attachEvent("on"+evname,func);}else if(el.addEventListener){el.addEventListener(evname,func,true);}else{el["on"+evname]=func;}};Calendar.removeEvent=function(el,evname,func){if(el.detachEvent){el.detachEvent("on"+evname,func);}else if(el.removeEventListener){el.removeEventListener(evname,func,true);}else{el["on"+evname]=null;}};Calendar.createElement=function(type,parent){var el=null;if(document.createElementNS){el=document.createElementNS("http://www.w3.org/1999/xhtml",type);}else{el=document.createElement(type);}
if(typeof parent!="undefined"){parent.appendChild(el);}
return el;};Calendar._add_evs=function(el){with(Calendar){addEvent(el,"mouseover",dayMouseOver);addEvent(el,"mousedown",dayMouseDown);addEvent(el,"mouseout",dayMouseOut);if(is_ie){addEvent(el,"dblclick",dayMouseDblClick);el.setAttribute("unselectable",true);}}};Calendar.findMonth=function(el){if(typeof el.month!="undefined"){return el;}else if(typeof el.parentNode.month!="undefined"){return el.parentNode;}
return null;};Calendar.findYear=function(el){if(typeof el.year!="undefined"){return el;}else if(typeof el.parentNode.year!="undefined"){return el.parentNode;}
return null;};Calendar.showMonthsCombo=function(){var cal=Calendar._C;if(!cal){return false;}
var cal=cal;var cd=cal.activeDiv;var mc=cal.monthsCombo;if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
if(cal.activeMonth){Calendar.removeClass(cal.activeMonth,"active");}
var mon=cal.monthsCombo.getElementsByTagName("div")[cal.date.getMonth()];Calendar.addClass(mon,"active");cal.activeMonth=mon;var s=mc.style;s.display="block";if(cd.navtype<0)
s.left=cd.offsetLeft+"px";else{var mcw=mc.offsetWidth;if(typeof mcw=="undefined")
mcw=50;s.left=(cd.offsetLeft+cd.offsetWidth-mcw)+"px";}
s.top=(cd.offsetTop+cd.offsetHeight)+"px";};Calendar.showYearsCombo=function(fwd){var cal=Calendar._C;if(!cal){return false;}
var cal=cal;var cd=cal.activeDiv;var yc=cal.yearsCombo;if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}
if(cal.activeYear){Calendar.removeClass(cal.activeYear,"active");}
cal.activeYear=null;var Y=cal.date.getFullYear()+(fwd?1:-1);var yr=yc.firstChild;var show=false;for(var i=12;i>0;--i){if(Y>=cal.minYear&&Y<=cal.maxYear){yr.innerHTML=Y;yr.year=Y;yr.style.display="block";show=true;}else{yr.style.display="none";}
yr=yr.nextSibling;Y+=fwd?cal.yearStep:-cal.yearStep;}
if(show){var s=yc.style;s.display="block";if(cd.navtype<0)
s.left=cd.offsetLeft+"px";else{var ycw=yc.offsetWidth;if(typeof ycw=="undefined")
ycw=50;s.left=(cd.offsetLeft+cd.offsetWidth-ycw)+"px";}
s.top=(cd.offsetTop+cd.offsetHeight)+"px";}};Calendar.tableMouseUp=function(ev){var cal=Calendar._C;if(!cal){return false;}
if(cal.timeout){clearTimeout(cal.timeout);}
var el=cal.activeDiv;if(!el){return false;}
var target=Calendar.getTargetElement(ev);ev||(ev=window.event);Calendar.removeClass(el,"active");if(target==el||target.parentNode==el){Calendar.cellClick(el,ev);}
var mon=Calendar.findMonth(target);var date=null;if(mon){date=new Date(cal.date);if(mon.month!=date.getMonth()){date.setMonth(mon.month);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}else{var year=Calendar.findYear(target);if(year){date=new Date(cal.date);if(year.year!=date.getFullYear()){date.setFullYear(year.year);cal.setDate(date);cal.dateClicked=false;cal.callHandler();}}}
with(Calendar){removeEvent(document,"mouseup",tableMouseUp);removeEvent(document,"mouseover",tableMouseOver);removeEvent(document,"mousemove",tableMouseOver);cal._hideCombos();_C=null;return stopEvent(ev);}};Calendar.tableMouseOver=function(ev){var cal=Calendar._C;if(!cal){return;}
var el=cal.activeDiv;var target=Calendar.getTargetElement(ev);if(target==el||target.parentNode==el){Calendar.addClass(el,"hilite active");Calendar.addClass(el.parentNode,"rowhilite");}else{if(typeof el.navtype=="undefined"||(el.navtype!=50&&(el.navtype==0||Math.abs(el.navtype)>2)))
Calendar.removeClass(el,"active");Calendar.removeClass(el,"hilite");Calendar.removeClass(el.parentNode,"rowhilite");}
ev||(ev=window.event);if(el.navtype==50&&target!=el){var pos=Calendar.getAbsolutePos(el);var w=el.offsetWidth;var x=ev.clientX;var dx;var decrease=true;if(x>pos.x+w){dx=x-pos.x-w;decrease=false;}else
dx=pos.x-x;if(dx<0)dx=0;var range=el._range;var current=el._current;var count=Math.floor(dx/10)%range.length;for(var i=range.length;--i>=0;)
if(range[i]==current)
break;while(count-->0)
if(decrease){if(--i<0)
i=range.length-1;}else if(++i>=range.length)
i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();}
var mon=Calendar.findMonth(target);if(mon){if(mon.month!=cal.date.getMonth()){if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
Calendar.addClass(mon,"hilite");cal.hilitedMonth=mon;}else if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}}else{if(cal.hilitedMonth){Calendar.removeClass(cal.hilitedMonth,"hilite");}
var year=Calendar.findYear(target);if(year){if(year.year!=cal.date.getFullYear()){if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}
Calendar.addClass(year,"hilite");cal.hilitedYear=year;}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}else if(cal.hilitedYear){Calendar.removeClass(cal.hilitedYear,"hilite");}}
return Calendar.stopEvent(ev);};Calendar.tableMouseDown=function(ev){if(Calendar.getTargetElement(ev)==Calendar.getElement(ev)){return Calendar.stopEvent(ev);}};Calendar.calDragIt=function(ev){var cal=Calendar._C;if(!(cal&&cal.dragging)){return false;}
var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posX=ev.pageX;posY=ev.pageY;}
cal.hideShowCovered();var st=cal.element.style;st.left=(posX-cal.xOffs)+"px";st.top=(posY-cal.yOffs)+"px";return Calendar.stopEvent(ev);};Calendar.calDragEnd=function(ev){var cal=Calendar._C;if(!cal){return false;}
cal.dragging=false;with(Calendar){removeEvent(document,"mousemove",calDragIt);removeEvent(document,"mouseup",calDragEnd);tableMouseUp(ev);}
cal.hideShowCovered();};Calendar.dayMouseDown=function(ev){var el=Calendar.getElement(ev);if(el.disabled){return false;}
var cal=el.calendar;cal.activeDiv=el;Calendar._C=cal;if(el.navtype!=300)with(Calendar){if(el.navtype==50){el._current=el.innerHTML;addEvent(document,"mousemove",tableMouseOver);}else
addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",tableMouseOver);addClass(el,"hilite active");addEvent(document,"mouseup",tableMouseUp);}else if(cal.isPopup){cal._dragStart(ev);}
if(el.navtype==-1||el.navtype==1){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout("Calendar.showMonthsCombo()",250);}else if(el.navtype==-2||el.navtype==2){if(cal.timeout)clearTimeout(cal.timeout);cal.timeout=setTimeout((el.navtype>0)?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250);}else{cal.timeout=null;}
return Calendar.stopEvent(ev);};Calendar.dayMouseDblClick=function(ev){Calendar.cellClick(Calendar.getElement(ev),ev||window.event);if(Calendar.is_ie){document.selection.empty();}};Calendar.dayMouseOver=function(ev){var el=Calendar.getElement(ev);if(Calendar.isRelated(el,ev)||Calendar._C||el.disabled){return false;}
if(el.ttip){if(el.ttip.substr(0,1)=="_"){el.ttip=el.caldate.print(el.calendar.ttDateFormat)+el.ttip.substr(1);}
el.calendar.tooltips.innerHTML=el.ttip;}
if(el.navtype!=300){Calendar.addClass(el,"hilite");if(el.caldate){Calendar.addClass(el.parentNode,"rowhilite");}}
return Calendar.stopEvent(ev);};Calendar.dayMouseOut=function(ev){with(Calendar){var el=getElement(ev);if(isRelated(el,ev)||_C||el.disabled)
return false;removeClass(el,"hilite");if(el.caldate)
removeClass(el.parentNode,"rowhilite");if(el.calendar)
el.calendar.tooltips.innerHTML=_TT["SEL_DATE"];return stopEvent(ev);}};Calendar.cellClick=function(el,ev){var cal=el.calendar;var closing=false;var newdate=false;var date=null;if(typeof el.navtype=="undefined"){if(cal.currentDateEl){Calendar.removeClass(cal.currentDateEl,"selected");Calendar.addClass(el,"selected");closing=(cal.currentDateEl==el);if(!closing){cal.currentDateEl=el;}}
cal.date.setDateOnly(el.caldate);date=cal.date;var other_month=!(cal.dateClicked=!el.otherMonth);if(!other_month&&!cal.currentDateEl)
cal._toggleMultipleDate(new Date(date));else
newdate=!el.disabled;if(other_month)
cal._init(cal.firstDayOfWeek,date);}else{if(el.navtype==200){Calendar.removeClass(el,"hilite");cal.callCloseHandler();return;}
date=new Date(cal.date);if(el.navtype==0)
date.setDateOnly(new Date());cal.dateClicked=false;var year=date.getFullYear();var mon=date.getMonth();function setMonth(m){var day=date.getDate();var max=date.getMonthDays(m);if(day>max){date.setDate(max);}
date.setMonth(m);};switch(el.navtype){case 400:Calendar.removeClass(el,"hilite");var text=Calendar._TT["ABOUT"];if(typeof text!="undefined"){text+=cal.showsTime?Calendar._TT["ABOUT_TIME"]:"";}else{text="Help and about box text is not translated into this language.\n"+"If you know this language and you feel generous please update\n"+"the corresponding file in \"lang\" subdir to match calendar-en.js\n"+"and send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\n"+"Thank you!\n"+"http://dynarch.com/mishoo/calendar.epl\n";}
alert(text);return;case-2:if(year>cal.minYear){date.setFullYear(year-1);}
break;case-1:if(mon>0){setMonth(mon-1);}else if(year-->cal.minYear){date.setFullYear(year);setMonth(11);}
break;case 1:if(mon<11){setMonth(mon+1);}else if(year<cal.maxYear){date.setFullYear(year+1);setMonth(0);}
break;case 2:if(year<cal.maxYear){date.setFullYear(year+1);}
break;case 100:cal.setFirstDayOfWeek(el.fdow);return;case 50:var range=el._range;var current=el.innerHTML;for(var i=range.length;--i>=0;)
if(range[i]==current)
break;if(ev&&ev.shiftKey){if(--i<0)
i=range.length-1;}else if(++i>=range.length)
i=0;var newval=range[i];el.innerHTML=newval;cal.onUpdateTime();return;case 0:if((typeof cal.getDateStatus=="function")&&cal.getDateStatus(date,date.getFullYear(),date.getMonth(),date.getDate())){return false;}
break;}
if(!date.equalsTo(cal.date)){cal.setDate(date);newdate=true;}else if(el.navtype==0)
newdate=closing=true;}
if(newdate){ev&&cal.callHandler();}
if(closing){Calendar.removeClass(el,"hilite");ev&&cal.callCloseHandler();}};Calendar.prototype.create=function(_par){var parent=null;if(!_par){parent=document.getElementsByTagName("body")[0];this.isPopup=true;}else{parent=_par;this.isPopup=false;}
this.date=this.dateStr?new Date(this.dateStr):new Date();var table=Calendar.createElement("table");this.table=table;table.cellSpacing=0;table.cellPadding=0;table.calendar=this;Calendar.addEvent(table,"mousedown",Calendar.tableMouseDown);var div=Calendar.createElement("div");this.element=div;div.className="calendar";if(this.isPopup){div.style.position="absolute";div.style.display="none";}
div.appendChild(table);var thead=Calendar.createElement("thead",table);var cell=null;var row=null;var cal=this;var hh=function(text,cs,navtype){cell=Calendar.createElement("td",row);cell.colSpan=cs;cell.className="button";if(navtype!=0&&Math.abs(navtype)<=2)
cell.className+=" nav";Calendar._add_evs(cell);cell.calendar=cal;cell.navtype=navtype;cell.innerHTML="<div unselectable='on'>"+text+"</div>";return cell;};row=Calendar.createElement("tr",thead);var title_length=6;(this.isPopup)&&--title_length;(this.weekNumbers)&&++title_length;hh("?",1,400).ttip=Calendar._TT["INFO"];this.title=hh("",title_length,300);this.title.className="title";if(this.isPopup){this.title.ttip=Calendar._TT["DRAG_TO_MOVE"];this.title.style.cursor="move";hh("&#x00d7;",1,200).ttip=Calendar._TT["CLOSE"];}
row=Calendar.createElement("tr",thead);row.className="headrow";this._nav_py=hh("&#x00ab;",1,-2);this._nav_py.ttip=Calendar._TT["PREV_YEAR"];this._nav_pm=hh("&#x2039;",1,-1);this._nav_pm.ttip=Calendar._TT["PREV_MONTH"];this._nav_now=hh(Calendar._TT["TODAY"],this.weekNumbers?4:3,0);this._nav_now.ttip=Calendar._TT["GO_TODAY"];this._nav_nm=hh("&#x203a;",1,1);this._nav_nm.ttip=Calendar._TT["NEXT_MONTH"];this._nav_ny=hh("&#x00bb;",1,2);this._nav_ny.ttip=Calendar._TT["NEXT_YEAR"];row=Calendar.createElement("tr",thead);row.className="daynames";if(this.weekNumbers){cell=Calendar.createElement("td",row);cell.className="name wn";cell.innerHTML=Calendar._TT["WK"];}
for(var i=7;i>0;--i){cell=Calendar.createElement("td",row);if(!i){cell.navtype=100;cell.calendar=this;Calendar._add_evs(cell);}}
this.firstdayname=(this.weekNumbers)?row.firstChild.nextSibling:row.firstChild;this._displayWeekdays();var tbody=Calendar.createElement("tbody",table);this.tbody=tbody;for(i=6;i>0;--i){row=Calendar.createElement("tr",tbody);if(this.weekNumbers){cell=Calendar.createElement("td",row);}
for(var j=7;j>0;--j){cell=Calendar.createElement("td",row);cell.calendar=this;Calendar._add_evs(cell);}}
if(this.showsTime){row=Calendar.createElement("tr",tbody);row.className="time";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;cell.innerHTML=Calendar._TT["TIME"]||"&nbsp;";cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=this.weekNumbers?4:3;(function(){function makeTimePart(className,init,range_start,range_end){var part=Calendar.createElement("span",cell);part.className=className;part.innerHTML=init;part.calendar=cal;part.ttip=Calendar._TT["TIME_PART"];part.navtype=50;part._range=[];if(typeof range_start!="number")
part._range=range_start;else{for(var i=range_start;i<=range_end;++i){var txt;if(i<10&&range_end>=10)txt='0'+i;else txt=''+i;part._range[part._range.length]=txt;}}
Calendar._add_evs(part);return part;};var hrs=cal.date.getHours();var mins=cal.date.getMinutes();var t12=!cal.time24;var pm=(hrs>12);if(t12&&pm)hrs-=12;var H=makeTimePart("hour",hrs,t12?1:0,t12?12:23);var span=Calendar.createElement("span",cell);span.innerHTML=":";span.className="colon";var M=makeTimePart("minute",mins,0,59);var AP=null;cell=Calendar.createElement("td",row);cell.className="time";cell.colSpan=2;if(t12)
AP=makeTimePart("ampm",pm?"pm":"am",["am","pm"]);else
cell.innerHTML="&nbsp;";cal.onSetTime=function(){var pm,hrs=this.date.getHours(),mins=this.date.getMinutes();if(t12){pm=(hrs>=12);if(pm)hrs-=12;if(hrs==0)hrs=12;AP.innerHTML=pm?"pm":"am";}
H.innerHTML=(hrs<10)?("0"+hrs):hrs;M.innerHTML=(mins<10)?("0"+mins):mins;};cal.onUpdateTime=function(){var date=this.date;var h=parseInt(H.innerHTML,10);if(t12){if(/pm/i.test(AP.innerHTML)&&h<12)
h+=12;else if(/am/i.test(AP.innerHTML)&&h==12)
h=0;}
var d=date.getDate();var m=date.getMonth();var y=date.getFullYear();date.setHours(h);date.setMinutes(parseInt(M.innerHTML,10));date.setFullYear(y);date.setMonth(m);date.setDate(d);this.dateClicked=false;this.callHandler();};})();}else{this.onSetTime=this.onUpdateTime=function(){};}
var tfoot=Calendar.createElement("tfoot",table);row=Calendar.createElement("tr",tfoot);row.className="footrow";cell=hh(Calendar._TT["SEL_DATE"],this.weekNumbers?8:7,300);cell.className="ttip";if(this.isPopup){cell.ttip=Calendar._TT["DRAG_TO_MOVE"];cell.style.cursor="move";}
this.tooltips=cell;div=Calendar.createElement("div",this.element);this.monthsCombo=div;div.className="combo";for(i=0;i<Calendar._MN.length;++i){var mn=Calendar.createElement("div");mn.className=Calendar.is_ie?"label-IEfix":"label";mn.month=i;mn.innerHTML=Calendar._SMN[i];div.appendChild(mn);}
div=Calendar.createElement("div",this.element);this.yearsCombo=div;div.className="combo";for(i=12;i>0;--i){var yr=Calendar.createElement("div");yr.className=Calendar.is_ie?"label-IEfix":"label";div.appendChild(yr);}
this._init(this.firstDayOfWeek,this.date);parent.appendChild(this.element);};Calendar._keyEvent=function(ev){var cal=window._dynarch_popupCalendar;if(!cal||cal.multiple)
return false;(Calendar.is_ie)&&(ev=window.event);var act=(Calendar.is_ie||ev.type=="keypress"),K=ev.keyCode;if(ev.ctrlKey){switch(K){case 37:act&&Calendar.cellClick(cal._nav_pm);break;case 38:act&&Calendar.cellClick(cal._nav_py);break;case 39:act&&Calendar.cellClick(cal._nav_nm);break;case 40:act&&Calendar.cellClick(cal._nav_ny);break;default:return false;}}else switch(K){case 32:Calendar.cellClick(cal._nav_now);break;case 27:act&&cal.callCloseHandler();break;case 37:case 38:case 39:case 40:if(act){var prev,x,y,ne,el,step;prev=K==37||K==38;step=(K==37||K==39)?1:7;function setVars(){el=cal.currentDateEl;var p=el.pos;x=p&15;y=p>>4;ne=cal.ar_days[y][x];};setVars();function prevMonth(){var date=new Date(cal.date);date.setDate(date.getDate()-step);cal.setDate(date);};function nextMonth(){var date=new Date(cal.date);date.setDate(date.getDate()+step);cal.setDate(date);};while(1){switch(K){case 37:if(--x>=0)
ne=cal.ar_days[y][x];else{x=6;K=38;continue;}
break;case 38:if(--y>=0)
ne=cal.ar_days[y][x];else{prevMonth();setVars();}
break;case 39:if(++x<7)
ne=cal.ar_days[y][x];else{x=0;K=40;continue;}
break;case 40:if(++y<cal.ar_days.length)
ne=cal.ar_days[y][x];else{nextMonth();setVars();}
break;}
break;}
if(ne){if(!ne.disabled)
Calendar.cellClick(ne);else if(prev)
prevMonth();else
nextMonth();}}
break;case 13:if(act)
Calendar.cellClick(cal.currentDateEl,ev);break;default:return false;}
return Calendar.stopEvent(ev);};Calendar.prototype._init=function(firstDayOfWeek,date){var today=new Date(),TY=today.getFullYear(),TM=today.getMonth(),TD=today.getDate();this.table.style.visibility="hidden";var year=date.getFullYear();if(year<this.minYear){year=this.minYear;date.setFullYear(year);}else if(year>this.maxYear){year=this.maxYear;date.setFullYear(year);}
this.firstDayOfWeek=firstDayOfWeek;this.date=new Date(date);var month=date.getMonth();var mday=date.getDate();var no_days=date.getMonthDays();date.setDate(1);var day1=(date.getDay()-this.firstDayOfWeek)%7;if(day1<0)
day1+=7;date.setDate(-day1);date.setDate(date.getDate()+1);var row=this.tbody.firstChild;var MN=Calendar._SMN[month];var ar_days=this.ar_days=new Array();var weekend=Calendar._TT["WEEKEND"];var dates=this.multiple?(this.datesCells={}):null;for(var i=0;i<6;++i,row=row.nextSibling){var cell=row.firstChild;if(this.weekNumbers){cell.className="day wn";cell.innerHTML=date.getWeekNumber();cell=cell.nextSibling;}
row.className="daysrow";var hasdays=false,iday,dpos=ar_days[i]=[];for(var j=0;j<7;++j,cell=cell.nextSibling,date.setDate(iday+1)){iday=date.getDate();var wday=date.getDay();cell.className="day";cell.pos=i<<4|j;dpos[j]=cell;var current_month=(date.getMonth()==month);if(!current_month){if(this.showsOtherMonths){cell.className+=" othermonth";cell.otherMonth=true;}else{cell.className="emptycell";cell.innerHTML="&nbsp;";cell.disabled=true;continue;}}else{cell.otherMonth=false;hasdays=true;}
cell.disabled=false;cell.innerHTML=this.getDateText?this.getDateText(date,iday):iday;if(dates)
dates[date.print("%Y%m%d")]=cell;if(this.getDateStatus){var status=this.getDateStatus(date,year,month,iday);if(this.getDateToolTip){var toolTip=this.getDateToolTip(date,year,month,iday);if(toolTip)
cell.title=toolTip;}
if(status===true){cell.className+=" disabled";cell.disabled=true;}else{if(/disabled/i.test(status))
cell.disabled=true;cell.className+=" "+status;}}
if(!cell.disabled){cell.caldate=new Date(date);cell.ttip="_";if(!this.multiple&&current_month&&iday==mday&&this.hiliteToday){cell.className+=" selected";this.currentDateEl=cell;}
if(date.getFullYear()==TY&&date.getMonth()==TM&&iday==TD){cell.className+=" today";cell.ttip+=Calendar._TT["PART_TODAY"];}
if(weekend.indexOf(wday.toString())!=-1)
cell.className+=cell.otherMonth?" oweekend":" weekend";}}
if(!(hasdays||this.showsOtherMonths))
row.className="emptyrow";}
this.title.innerHTML=Calendar._MN[month]+", "+year;this.onSetTime();this.table.style.visibility="visible";this._initMultipleDates();};Calendar.prototype._initMultipleDates=function(){if(this.multiple){for(var i in this.multiple){var cell=this.datesCells[i];var d=this.multiple[i];if(!d)
continue;if(cell)
cell.className+=" selected";}}};Calendar.prototype._toggleMultipleDate=function(date){if(this.multiple){var ds=date.print("%Y%m%d");var cell=this.datesCells[ds];if(cell){var d=this.multiple[ds];if(!d){Calendar.addClass(cell,"selected");this.multiple[ds]=date;}else{Calendar.removeClass(cell,"selected");delete this.multiple[ds];}}}};Calendar.prototype.setDateToolTipHandler=function(unaryFunction){this.getDateToolTip=unaryFunction;};Calendar.prototype.setDate=function(date){if(!date.equalsTo(this.date)){this._init(this.firstDayOfWeek,date);}};Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date);};Calendar.prototype.setFirstDayOfWeek=function(firstDayOfWeek){this._init(firstDayOfWeek,this.date);this._displayWeekdays();};Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(unaryFunction){this.getDateStatus=unaryFunction;};Calendar.prototype.setRange=function(a,z){this.minYear=a;this.maxYear=z;};Calendar.prototype.callHandler=function(){if(this.onSelected){this.onSelected(this,this.date.print(this.dateFormat));}};Calendar.prototype.callCloseHandler=function(){if(this.onClose){this.onClose(this);}
this.hideShowCovered();};Calendar.prototype.destroy=function(){var el=this.element.parentNode;el.removeChild(this.element);Calendar._C=null;window._dynarch_popupCalendar=null;};Calendar.prototype.reparent=function(new_parent){var el=this.element;el.parentNode.removeChild(el);new_parent.appendChild(el);};Calendar._checkCalendar=function(ev){var calendar=window._dynarch_popupCalendar;if(!calendar){return false;}
var el=Calendar.is_ie?Calendar.getElement(ev):Calendar.getTargetElement(ev);for(;el!=null&&el!=calendar.element;el=el.parentNode);if(el==null){window._dynarch_popupCalendar.callCloseHandler();return Calendar.stopEvent(ev);}};Calendar.prototype.show=function(){var rows=this.table.getElementsByTagName("tr");for(var i=rows.length;i>0;){var row=rows[--i];Calendar.removeClass(row,"rowhilite");var cells=row.getElementsByTagName("td");for(var j=cells.length;j>0;){var cell=cells[--j];Calendar.removeClass(cell,"hilite");Calendar.removeClass(cell,"active");}}
this.element.style.display="block";this.hidden=false;if(this.isPopup){window._dynarch_popupCalendar=this;Calendar.addEvent(document,"keydown",Calendar._keyEvent);Calendar.addEvent(document,"keypress",Calendar._keyEvent);Calendar.addEvent(document,"mousedown",Calendar._checkCalendar);}
this.hideShowCovered();};Calendar.prototype.hide=function(){if(this.isPopup){Calendar.removeEvent(document,"keydown",Calendar._keyEvent);Calendar.removeEvent(document,"keypress",Calendar._keyEvent);Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar);}
this.element.style.display="none";this.hidden=true;this.hideShowCovered();};Calendar.prototype.showAt=function(x,y){var s=this.element.style;s.left=x+"px";s.top=y+"px";this.show();};Calendar.prototype.showAtElement=function(el,opts){var self=this;var p=Calendar.getAbsolutePos(el);if(!opts||typeof opts!="string"){this.showAt(p.x,p.y+el.offsetHeight);return true;}
function fixPosition(box){if(box.x<0)
box.x=0;if(box.y<0)
box.y=0;var cp=document.createElement("div");var s=cp.style;s.position="absolute";s.right=s.bottom=s.width=s.height="0px";document.body.appendChild(cp);var br=Calendar.getAbsolutePos(cp);document.body.removeChild(cp);if(Calendar.is_ie){br.y+=document.body.scrollTop;br.x+=document.body.scrollLeft;}else{br.y+=window.scrollY;br.x+=window.scrollX;}
var tmp=box.x+box.width-br.x;if(tmp>0)box.x-=tmp;tmp=box.y+box.height-br.y;if(tmp>0)box.y-=tmp;};this.element.style.display="block";Calendar.continuation_for_the_fucking_khtml_browser=function(){var w=self.element.offsetWidth;var h=self.element.offsetHeight;self.element.style.display="none";var valign=opts.substr(0,1);var halign="l";if(opts.length>1){halign=opts.substr(1,1);}
switch(valign){case"T":p.y-=h;break;case"B":p.y+=el.offsetHeight;break;case"C":p.y+=(el.offsetHeight-h)/2;break;case"t":p.y+=el.offsetHeight-h;break;case"b":break;}
switch(halign){case"L":p.x-=w;break;case"R":p.x+=el.offsetWidth;break;case"C":p.x+=(el.offsetWidth-w)/2;break;case"l":p.x+=el.offsetWidth-w;break;case"r":break;}
p.width=w;p.height=h+40;self.monthsCombo.style.display="none";fixPosition(p);self.showAt(p.x,p.y);};if(Calendar.is_khtml)
setTimeout("Calendar.continuation_for_the_fucking_khtml_browser()",10);else
Calendar.continuation_for_the_fucking_khtml_browser();};Calendar.prototype.setDateFormat=function(str){this.dateFormat=str;};Calendar.prototype.setTtDateFormat=function(str){this.ttDateFormat=str;};Calendar.prototype.parseDate=function(str,fmt){if(!fmt)
fmt=this.dateFormat;this.setDate(Date.parseDate(str,fmt));};Calendar.prototype.hideShowCovered=function(){if(!Calendar.is_ie&&!Calendar.is_opera)
return;function getVisib(obj){var value=obj.style.visibility;if(!value){if(document.defaultView&&typeof(document.defaultView.getComputedStyle)=="function"){if(!Calendar.is_khtml)
value=document.defaultView.getComputedStyle(obj,"").getPropertyValue("visibility");else
value='';}else if(obj.currentStyle){value=obj.currentStyle.visibility;}else
value='';}
return value;};var tags=new Array("applet","iframe","select");var el=this.element;var p=Calendar.getAbsolutePos(el);var EX1=p.x;var EX2=el.offsetWidth+EX1;var EY1=p.y;var EY2=el.offsetHeight+EY1;for(var k=tags.length;k>0;){if(tags[--k]=="select"&&(Calendar.is_opera9up||Calendar.is_ie7up))
continue;var ar=document.getElementsByTagName(tags[k]);var cc=null;for(var i=ar.length;i>0;){cc=ar[--i];p=Calendar.getAbsolutePos(cc);var CX1=p.x;var CX2=cc.offsetWidth+CX1;var CY1=p.y;var CY2=cc.offsetHeight+CY1;if(this.hidden||(CX1>EX2)||(CX2<EX1)||(CY1>EY2)||(CY2<EY1)){if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}
cc.style.visibility=cc.__msh_save_visibility;}else{if(!cc.__msh_save_visibility){cc.__msh_save_visibility=getVisib(cc);}
cc.style.visibility="hidden";}}}};Calendar.prototype._displayWeekdays=function(){var fdow=this.firstDayOfWeek;var cell=this.firstdayname;var weekend=Calendar._TT["WEEKEND"];for(var i=0;i<7;++i){cell.className="day name";var realday=(i+fdow)%7;if(i){cell.ttip=Calendar._TT["DAY_FIRST"].replace("%s",Calendar._DN[realday]);cell.navtype=100;cell.calendar=this;cell.fdow=realday;Calendar._add_evs(cell);}
if(weekend.indexOf(realday.toString())!=-1){Calendar.addClass(cell,"weekend");}
cell.innerHTML=Calendar._SDN[(i+fdow)%7];cell=cell.nextSibling;}};Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none";this.yearsCombo.style.display="none";};Calendar.prototype._dragStart=function(ev){if(this.dragging){return;}
this.dragging=true;var posX;var posY;if(Calendar.is_ie){posY=window.event.clientY+document.body.scrollTop;posX=window.event.clientX+document.body.scrollLeft;}else{posY=ev.clientY+window.scrollY;posX=ev.clientX+window.scrollX;}
var st=this.element.style;this.xOffs=posX-parseInt(st.left);this.yOffs=posY-parseInt(st.top);with(Calendar){addEvent(document,"mousemove",calDragIt);addEvent(document,"mouseup",calDragEnd);}};Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31);Date.SECOND=1000;Date.MINUTE=60*Date.SECOND;Date.HOUR=60*Date.MINUTE;Date.DAY=24*Date.HOUR;Date.WEEK=7*Date.DAY;Date.parseDate=function(str,fmt){var today=new Date();var y=0;var m=-1;var d=0;var a=str.split(/\W+/);var b=fmt.match(/%./g);var i=0,j=0;var hr=0;var min=0;for(i=0;i<a.length;++i){if(!a[i])
continue;switch(b[i]){case"%d":case"%e":d=parseInt(a[i],10);break;case"%m":m=parseInt(a[i],10)-1;break;case"%Y":case"%y":y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);break;case"%b":case"%B":for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){m=j;break;}}
break;case"%H":case"%I":case"%k":case"%l":hr=parseInt(a[i],10);break;case"%P":case"%p":if(/pm/i.test(a[i])&&hr<12)
hr+=12;else if(/am/i.test(a[i])&&hr>=12)
hr-=12;break;case"%M":min=parseInt(a[i],10);break;}}
if(isNaN(y))y=today.getFullYear();if(isNaN(m))m=today.getMonth();if(isNaN(d))d=today.getDate();if(isNaN(hr))hr=today.getHours();if(isNaN(min))min=today.getMinutes();if(y!=0&&m!=-1&&d!=0)
return new Date(y,m,d,hr,min,0);y=0;m=-1;d=0;for(i=0;i<a.length;++i){if(a[i].search(/[a-zA-Z]+/)!=-1){var t=-1;for(j=0;j<12;++j){if(Calendar._MN[j].substr(0,a[i].length).toLowerCase()==a[i].toLowerCase()){t=j;break;}}
if(t!=-1){if(m!=-1){d=m+1;}
m=t;}}else if(parseInt(a[i],10)<=12&&m==-1){m=a[i]-1;}else if(parseInt(a[i],10)>31&&y==0){y=parseInt(a[i],10);(y<100)&&(y+=(y>29)?1900:2000);}else if(d==0){d=a[i];}}
if(y==0)
y=today.getFullYear();if(m!=-1&&d!=0)
return new Date(y,m,d,hr,min,0);return today;};Date.prototype.getMonthDays=function(month){var year=this.getFullYear();if(typeof month=="undefined"){month=this.getMonth();}
if(((0==(year%4))&&((0!=(year%100))||(0==(year%400))))&&month==1){return 29;}else{return Date._MD[month];}};Date.prototype.getDayOfYear=function(){var now=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var then=new Date(this.getFullYear(),0,0,0,0,0);var time=now-then;return Math.floor(time/Date.DAY);};Date.prototype.getWeekNumber=function(){var d=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0);var DoW=d.getDay();d.setDate(d.getDate()-(DoW+6)%7+3);var ms=d.valueOf();d.setMonth(0);d.setDate(4);return Math.round((ms-d.valueOf())/(7*864e5))+1;};Date.prototype.equalsTo=function(date){return((this.getFullYear()==date.getFullYear())&&(this.getMonth()==date.getMonth())&&(this.getDate()==date.getDate())&&(this.getHours()==date.getHours())&&(this.getMinutes()==date.getMinutes()));};Date.prototype.setDateOnly=function(date){var tmp=new Date(date);this.setDate(1);this.setFullYear(tmp.getFullYear());this.setMonth(tmp.getMonth());this.setDate(tmp.getDate());};Date.prototype.print=function(str){var m=this.getMonth();var d=this.getDate();var y=this.getFullYear();var wn=this.getWeekNumber();var w=this.getDay();var s={};var hr=this.getHours();var pm=(hr>=12);var ir=(pm)?(hr-12):hr;var dy=this.getDayOfYear();if(ir==0)
ir=12;var min=this.getMinutes();var sec=this.getSeconds();s["%a"]=Calendar._SDN[w];s["%A"]=Calendar._DN[w];s["%b"]=Calendar._SMN[m];s["%B"]=Calendar._MN[m];s["%C"]=1+Math.floor(y/100);s["%d"]=(d<10)?("0"+d):d;s["%e"]=d;s["%H"]=(hr<10)?("0"+hr):hr;s["%I"]=(ir<10)?("0"+ir):ir;s["%j"]=(dy<100)?((dy<10)?("00"+dy):("0"+dy)):dy;s["%k"]=hr;s["%l"]=ir;s["%m"]=(m<9)?("0"+(1+m)):(1+m);s["%M"]=(min<10)?("0"+min):min;s["%n"]="\n";s["%p"]=pm?"PM":"AM";s["%P"]=pm?"pm":"am";s["%s"]=Math.floor(this.getTime()/1000);s["%S"]=(sec<10)?("0"+sec):sec;s["%t"]="\t";s["%U"]=s["%W"]=s["%V"]=(wn<10)?("0"+wn):wn;s["%u"]=w+1;s["%w"]=w;s["%y"]=(''+y).substr(2,2);s["%Y"]=y;s["%%"]="%";var re=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)
return str.replace(re,function(par){return s[par]||par;});var a=str.match(re);for(var i=0;i<a.length;i++){var tmp=s[a[i]];if(tmp){re=new RegExp(a[i],'g');str=str.replace(re,tmp);}}
return str;};Date.prototype.__msh_oldSetFullYear=Date.prototype.setFullYear;Date.prototype.setFullYear=function(y){var d=new Date(this);d.__msh_oldSetFullYear(y);if(d.getMonth()!=this.getMonth())
this.setDate(28);this.__msh_oldSetFullYear(y);};window._dynarch_popupCalendar=null;;Calendar._DN=new Array
("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");Calendar._SDN=new Array
("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun");Calendar._FD=0;Calendar._MN=new Array
("January","February","March","April","May","June","July","August","September","October","November","December");Calendar._SMN=new Array
("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");Calendar._TT={};Calendar._TT["INFO"]="About the calendar";Calendar._TT["ABOUT"]="DHTML Date/Time Selector\n"+"(c) dynarch.com 2002-2005 / Author: Mihai Bazon\n"+"For latest version visit: http://www.dynarch.com/projects/calendar/\n"+"Distributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details."+"\n\n"+"Date selection:\n"+"- Use the \xab, \xbb buttons to select year\n"+"- Use the "+String.fromCharCode(0x2039)+", "+String.fromCharCode(0x203a)+" buttons to select month\n"+"- Hold mouse button on any of the above buttons for faster selection.";Calendar._TT["ABOUT_TIME"]="\n\n"+"Time selection:\n"+"- Click on any of the time parts to increase it\n"+"- or Shift-click to decrease it\n"+"- or click and drag for faster selection.";Calendar._TT["PREV_YEAR"]="Prev. year (hold for menu)";Calendar._TT["PREV_MONTH"]="Prev. month (hold for menu)";Calendar._TT["GO_TODAY"]="Go Today";Calendar._TT["NEXT_MONTH"]="Next month (hold for menu)";Calendar._TT["NEXT_YEAR"]="Next year (hold for menu)";Calendar._TT["SEL_DATE"]="Select date";Calendar._TT["DRAG_TO_MOVE"]="Drag to move";Calendar._TT["PART_TODAY"]=" (today)";Calendar._TT["DAY_FIRST"]="Display %s first";Calendar._TT["WEEKEND"]="0,6";Calendar._TT["CLOSE"]="Close";Calendar._TT["TODAY"]="Today";Calendar._TT["TIME_PART"]="(Shift-)Click or drag to change value";Calendar._TT["DEF_DATE_FORMAT"]="%Y-%m-%d";Calendar._TT["TT_DATE_FORMAT"]="%a, %b %e";Calendar._TT["WK"]="wk";Calendar._TT["TIME"]="Time:";;Calendar.setup=function(params){function param_default(pname,def){if(typeof params[pname]=="undefined"){params[pname]=def;}};param_default("inputField",null);param_default("displayArea",null);param_default("button",null);param_default("eventName","click");param_default("ifFormat","%Y/%m/%d");param_default("daFormat","%Y/%m/%d");param_default("singleClick",true);param_default("disableFunc",null);param_default("dateStatusFunc",params["disableFunc"]);param_default("dateText",null);param_default("firstDay",null);param_default("align","Br");param_default("range",[1900,2999]);param_default("weekNumbers",true);param_default("flat",null);param_default("flatCallback",null);param_default("onSelect",null);param_default("onClose",null);param_default("onUpdate",null);param_default("date",null);param_default("showsTime",false);param_default("timeFormat","24");param_default("electric",true);param_default("step",2);param_default("position",null);param_default("cache",false);param_default("showOthers",false);param_default("multiple",null);var tmp=["inputField","displayArea","button"];for(var i in tmp){if(typeof params[tmp[i]]=="string"){params[tmp[i]]=document.getElementById(params[tmp[i]]);}}
if(!(params.flat||params.multiple||params.inputField||params.displayArea||params.button)){alert("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return false;}
function onSelect(cal){var p=cal.params;var update=(cal.dateClicked||p.electric);if(update&&p.inputField){p.inputField.value=cal.date.print(p.ifFormat);if(typeof p.inputField.onchange=="function")
p.inputField.onchange();}
if(update&&p.displayArea)
p.displayArea.innerHTML=cal.date.print(p.daFormat);if(update&&typeof p.onUpdate=="function")
p.onUpdate(cal);if(update&&p.flat){if(typeof p.flatCallback=="function")
p.flatCallback(cal);}
if(update&&p.singleClick&&cal.dateClicked)
cal.callCloseHandler();};if(params.flat!=null){if(typeof params.flat=="string")
params.flat=document.getElementById(params.flat);if(!params.flat){alert("Calendar.setup:\n  Flat specified but can't find parent.");return false;}
var cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect);cal.showsOtherMonths=params.showOthers;cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.params=params;cal.weekNumbers=params.weekNumbers;cal.setRange(params.range[0],params.range[1]);cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;if(params.ifFormat){cal.setDateFormat(params.ifFormat);}
if(params.inputField&&typeof params.inputField.value=="string"){cal.parseDate(params.inputField.value);}
cal.create(params.flat);cal.show();return false;}
var triggerEl=params.button||params.displayArea||params.inputField;triggerEl["on"+params.eventName]=function(event){if(event&&event.target&&this.name){if(event.target.name!=this.name){alert('badTarget: '+event.target.name+' vs '+this.name);return false;}}
var dateEl=params.inputField||params.displayArea;var dateFmt=params.inputField?params.ifFormat:params.daFormat;var mustCreate=false;var cal=window.calendar;if(dateEl)
params.date=Date.parseDate(dateEl.value||dateEl.innerHTML,dateFmt);if(!(cal&&params.cache)){window.calendar=cal=new Calendar(params.firstDay,params.date,params.onSelect||onSelect,params.onClose||function(cal){cal.hide();});cal.showsTime=params.showsTime;cal.time24=(params.timeFormat=="24");cal.weekNumbers=params.weekNumbers;mustCreate=true;}else{if(params.date)
cal.setDate(params.date);cal.hide();}
if(params.multiple){cal.multiple={};for(var i=params.multiple.length;--i>=0;){var d=params.multiple[i];var ds=d.print("%Y%m%d");cal.multiple[ds]=d;}}
cal.showsOtherMonths=params.showOthers;cal.yearStep=params.step;cal.setRange(params.range[0],params.range[1]);cal.params=params;cal.setDateStatusHandler(params.dateStatusFunc);cal.getDateText=params.dateText;cal.setDateFormat(dateFmt);if(mustCreate)
cal.create();cal.refresh();if(!params.position)
cal.showAtElement(params.button||params.displayArea||params.inputField,params.align);else
cal.showAt(params.position[0],params.position[1]);return false;};return cal;};;(function(F){F.fn.delegate=function(I,H,J,K){return this.each(function(){F.event.delegate.add(this,I,H,J,K)})};F.fn.undelegate=function(I,H,J){return this.each(function(){F.event.delegate.remove(this,I,H,J)})};F.event.delegate={add:function(M,J,H,K,N){if(arguments.length<4){return}var I=B(H,A),L=F.data(M,"delegates")||F.data(M,"delegates",{});F.each(B(J,D),function(P,Q){var O=L[Q]||(L[Q]=[]);if(!O.length){F.event.add(M,Q,F.event.delegate.handle,L)}F.each(I,function(S,R){if(!R.length){return}O[O.length]={selector:R,handler:K,data:N}})})},remove:function(M,J,H,K){var I=B(H,A),L=F.data(M,"delegates")||{};if(M&&!J){F.each(L,function(N){F.event.remove(M,N,F.event.delegate.handle)});F.removeData(M,"delegates");return}F.each(B(J,D),function(N,O){if(H&&H.length){L[O]=F.grep(L[O]||[],function(Q,P){if(Q){F.each(I,function(S,R){if(Q.selector===R&&(!K||Q.handler===K)){return(P=false)}})}return(P!==false)});if(L[O].length){return}}F.event.remove(M,O,F.event.delegate.handle);delete L[O]})},handle:function(L){L.delegateParent=this;L.stopDelegation=function(){H=true};var M=L.target,K=arguments,J,H,I=(L.data||{})[L.type]||[];if(I.length){do{F.each(I,function(N,O){if(O&&F(M).matches(O.selector)){L.data=O.data;J=O.handler.apply(M,K);if(J===false||H===true){return false}}})}while(J!==false&&H!==true&&M!=this&&(M=M.parentNode))}return J}};F.fn.matches=function(J){if(typeof J!="string"){return false}var I=this,H;while(J.length&&I.length&&(H=E.exec(J))){I=I.setArray(F.filter(H[3],I).r);if(H[2]){I=I[G[H[2]]](H[1])}J=J.replace(H[0].substr(H[1]?H[1].length:0),"")}if(!C.test(J)&&!H){I=[]}return!!(I.length>0)};var E=(/(?:([^>+~\s]+)\s*([>+~\s])\s*)?([^>+~\s]+)\s*$/),D=(/\s+/),A=(/\s*,\s*/),C=(/^\s*$/),G={" ":"parents",">":"parent","+":"prev","~":"prevAll"};function B(I,H){return F.trim(I).split(H)}})(jQuery);;(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["odd","even"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'.',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}
this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}
function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}
var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}
if(!p){p=detectParserForColumn(table,cells[i]);}
if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}
list.push(p);}}
if(table.config.debug){log(parsersDebug);}
return list;};function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i];}}
return parsers[0];}
function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}
return false;}
function buildCache(table){if(table.config.debug){var cacheTime=new Date();}
var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]));}
cols.push(i);cache.normalized.push(cols);cols=null;}
if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}
return cache;}
function getElementText(config,node)
{if(!node){return"";}
var t="";if(typeof(config.textExtraction)=="object"){t=config.textExtraction(node);}
else if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML;}else{t=node.innerHTML;}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node);}else{t=$(node).text();}}
return t;}
function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}
var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j]);}}}
if(table.config.appender){table.config.appender(table,rows);}
rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}
applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}
var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0;};$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(!this.sortDisabled){$(this).addClass(table.config.cssHeader);}
table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}
return $tableHeaders;};function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}
return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}
function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}
function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}
function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0;}else{i=(v==(0||1))?v:0;}
return i;}
function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}
return false;}
function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}
function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}
function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}
function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}
var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}
var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}
dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}
return cache;};function sortText(a,b){return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}
config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}
if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}
applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}
if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){var DECIMAL='\\'+config.decimal;var exp='/(^[+]?0('+DECIMAL+'0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)'+DECIMAL+'(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*'+DECIMAL+'0+$)/';return RegExp(exp).test($.trim(s));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}
empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}
return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}
return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}
$("tr:visible",table.tBodies[0]).filter(':even').removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(':odd').removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);;var accessKeyEnabled=true;function useAccessKey(evt){if(accessKeyEnabled==true){if(event.altKey){event.srcElement.click();}}else{event.srcElement.blur();accessKeyEnabled=true;}}
function releaseAccessKey(){if(accessKeyEnabled==false){accessKeyEnabled=true;}}
function initAccessKey(){if(navigator.appName=="Microsoft Internet Explorer"){for(i=0;i<document.all.length;i++){a=document.all(i);if(a.tagName=='A'&&a.accessKey!=''){a.blur();a.onfocus=useAccessKey;}}
if(event.altKey){accessKeyEnabled=false;document.onkeyup=releaseAccessKey;setTimeout('releaseAccessKey()',100);}}}
function findObj(n,d){var p,i,x;if(!d)d=document;if((p=n.indexOf("?"))>0&&parent.frames.length){d=parent.frames[n.substring(p+1)].document;n=n.substring(0,p);}
if(!(x=d[n])&&d.all)x=d.all[n];for(i=0;!x&&i<d.forms.length;i++)x=d.forms[i][n];for(i=0;!x&&d.layers&&i<d.layers.length;i++)x=findObj(n,d.layers[i].document);if(!x&&document.getElementById)x=document.getElementById(n);return x;}
function openWindow(theURL,winName,features){window.open(theURL,winName,features);return false;}
function setTextOfLayer(objName,newText){while(obj=document.getElementById(objName)){with(obj)
if(document.layers){document.write(unescape(newText));document.close();}
else innerHTML=unescape(newText);obj.id='';}}
function confirm_submit(o,str)
{f=findObj(o);if(confirm(str))f.submit();}
function search_window(keyword,where)
{path=where+'?keyword='+keyword;SearchWindow=window.open("","Search","toolbar=no,location=no,status=no,scrollbars=yes,width=700,height=500,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");if(SearchWindow.frames.length==0)
{SearchWindow=window.open(path,"Search","toolbar=no,location=no,status=no,scrollbars=yes,width=800,height=600,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");}
else
{SearchWindow.location.href=path;SearchWindow.focus();}}
function help_window(path)
{SearchWindow=window.open("","Help","toolbar=no,location=no,status=no,scrollbars=yes,width=700,height=500,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");if(SearchWindow.frames.length==0)
{SearchWindow=window.open(path,"Help","toolbar=no,location=no,status=no,scrollbars=yes,width=800,height=600,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");}
else
{SearchWindow.location.href=path;SearchWindow.focus();}}
function login_focus()
{if(document.login.username.value==''){document.login.username.focus();}else{document.login.password.focus();}}
function max_CopyClipboard(obj)
{obj=findObj(obj);if(obj){window.clipboardData.setData('Text',obj.value);}}
function initPage()
{initAccessKey();boxrow_init();};function boxrow_init()
{var obj=document.body.getElementsByTagName("DIV");for(var i=0;i<obj.length;i++){if(obj[i].className=='boxrow'){obj[i].onmouseover=boxrow_over;obj[i].onmouseout=boxrow_leave;obj[i].onclick=boxrow_click;j=0;while(j<obj[i].childNodes.length){if(obj[i].childNodes[j].tagName=='INPUT')
obj[i].childNodes[j].onclick=boxrow_nonbubble;j++;}}}}
function boxrow_over(e)
{if(!e&&window.event){e=window.event;}
if(e.srcElement){o=e.srcElement;}else{o=e.target;}
while(o.tagName!="DIV"){o=o.parentNode;}
o.style.backgroundColor='#F6F6F6';}
function boxrow_leave(e)
{if(!e&&window.event)
e=window.event;if(e.srcElement){o=e.srcElement;}else{o=e.target;}
while(o.tagName!="DIV"){o=o.parentNode;}
o.style.backgroundColor='#FFFFFF';}
function boxrow_click(e)
{if(!e&&window.event)
e=window.event;if(e.srcElement){o=e.srcElement;}else{o=e.target;}
if(o.tagName=='IMG'){return;}
while(o.tagName!="DIV"){o=o.parentNode;}
i=0;while(i<o.childNodes.length){if(o.childNodes[i].tagName=='INPUT'){o.childNodes[i].checked=!o.childNodes[i].checked;return true;}
i++;}}
function boxrow_nonbubble(e)
{if(!e&&window.event){e=window.event;}
if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}};(function($){$.extend({queueMessage:new function(){var active=null;var button=null;var queue=[];var defaults={id:null,text:'',location:'global',type:'normal',timeout:5000,animate:!(jQuery.browser.msie&&parseInt(jQuery.browser.version)<7)};function show(){active=queue.shift();active.element=jQuery("<div class='message'><div class='panel "+active.settings.type+"'><div class='icon'></div><p>"+active.settings.text+"</p><div class='topleft'></div><div class='topright'></div><div class='bottomleft'></div><div class='bottomright'></div></div></div>");if(active.settings.location!='form'&&active.settings.timeout<=0){button=jQuery("<div class='close'>x</div>");$(button).click(function(){if(active.settings.animate){active.element.slideUp(function(){active.element.remove();active=null;ping();});}else{active.element.remove();active=null;ping();}});$(active.element).children('div.panel').append(button);}
if(active.settings.location!='global'&&active.container.find('#messagePlaceholder').length>0){active.container=active.container.find('#messagePlaceholder');active.element.addClass(active.settings.location+'Message');}else{active.settings.location='global';active.element.addClass('globalMessage');}
if(active.settings.animate&&active.settings.location=='global'){active.element.hide();active.container.prepend(active.element);active.element.slideDown();}else{active.container.prepend(active.element);}
if(active.settings.timeout>0){window.setTimeout(function(){if(active.settings.animate){active.element.slideUp(function(){active.element.remove();active=null;ping();});}else{active.element.remove();active=null;ping();}},active.settings.timeout);}}
function ping(){if(!active&&queue.length){show();}}
this.construct=function(settings){return this.each(function(){var message={settings:$.extend(null,defaults,settings),element:null,container:$(this)};if(message.settings.id&&message.settings.id<=parseInt(window.name)){return;}
queue.push(message);if(message.settings.id){window.name=message.settings.id;}
ping();});};}});$.fn.extend({queueMessage:$.queueMessage.construct});})(jQuery);;(function($){var defaults={userNameCheckUrl:'usernamecheck.php',userNameParameterName:'username',checkTimeout:500,availableResultText:'available',indicatorSelector:'#user-check-indicator',availableClass:'available',unavailableClass:'unavailable',checkingClass:'checking',errorClass:'error',callback:function(textElement,userAvailable){}};jQuery.fn.userNameCheck=function(options){if(!jQuery.fn.typeWatch){return this;}
var o=$.extend({},defaults,options);var checkUserNameAvailability=function(userNameToCheck,element){var ajaxData={};ajaxData[o.userNameParameterName]=userNameToCheck;var $indicator=$(o.indicatorSelector);if($.trim(userNameToCheck).length==0){$indicator.hide();o.callback.apply(element,[false]);return;}
$indicator.addClass(o.checkingClass).removeClass(o.unavailableClass).removeClass(o.availableClass);$indicator.show();$.ajax({url:o.userNameCheckUrl,data:ajaxData,success:function(data){$indicator.removeClass(o.checkingClass).removeClass(o.errorClass);if(data==o.availableResultText){$indicator.addClass(o.availableClass).removeClass(o.unavailableClass);o.callback.apply(element,[element,true]);}else{$indicator.removeClass(o.availableClass).addClass(o.unavailableClass);o.callback.apply(element,[element,false]);}},error:function(){$indicator.removeClass(o.checkingClass).addClass(o.errorClass);}});};return this.filter(":text").each(function(){$this=$(this);$this.typeWatch({callback:checkUserNameAvailability,wait:o.checkTimeout,highlight:true,enterkey:true});checkUserNameAvailability($this.val(),$this.get(0));}).end();};})(jQuery);;(function($){$.fn.accountswitch=function(options){var defaults={action:'init',searchUrl:'account-switch-search.php',searchInputSelector:'#accountSearch',progressIndicatorSelector:'#accountLoading',searchPrompt:'account name',searchDelay:400};var settings=$.extend({},defaults,options);var $switcher=this;var $accountsArea=this.find(".result");var $search=this.find(settings.searchInputSelector);if(settings.action=='show'){if($search.size()!=0){if($search.val()!=$accountsArea.find("ul li:first").text()){$search.val("");}
$search.focus().get(0).select();}else{$accountsArea.find("a:first").focus();}
return;}
$search.example(settings.searchPrompt);$search.keydown(function(event){if(event.keyCode==13&&$search.val().length>0){var $link=$accountsArea.find("a:first");if($link.size()>0){document.location.href=$link.attr('href');}}
return true;});$search.typeWatch({wait:settings.searchDelay,captureLength:1,callback:updateAccounts,submitOnEnter:false});return this;function updateAccounts()
{$(settings.progressIndicatorSelector).show();$.ajax({url:settings.searchUrl,data:{q:$search.val()},type:"GET",complete:function(){$(settings.progressIndicatorSelector).hide();},error:function(request,status){$accountsArea.html("<div id='accountLoadingError'>Failed to load accounts: "+status+"</div>");},success:function(data){if(checkReload(data)){return;}
var $accounts=$(data).find("#accounts");if($accounts.size()>0){$accountsArea.html($accounts);}else{$accountsArea.html("<div id='accountLoadingError'>Account data not found in: "+data+"</div>");}
$switcher.find("li > a").parent().hover(function(){$this=$(this);if(!$this.is(".opt")){$this.addClass("hover");}},function(){$(this).removeClass("hover");});}});}
function checkReload(data){if(data.indexOf("<!-- install -->")>=0||data.indexOf("<!-- login -->")>=0){document.location.reload();return true;}
return false;}};})(jQuery);;function validatePublisher(form,suffix,fieldSuffix,errorSuffix,customAction)
{$("#url-empty"+suffix+errorSuffix).hide();$("#required-missing"+suffix+errorSuffix).hide();if($("#url"+fieldSuffix).get(0).value.length==0)
{$("#url"+fieldSuffix).addClass("inerror");$("#url-empty"+suffix+errorSuffix).show();}
else
{$("#url"+fieldSuffix).removeClass("inerror");}
if(customAction)
{customAction(form,suffix,fieldSuffix);}
var result=$("#url"+fieldSuffix).get(0).value.length>0;return result;}
function initInstallerSites()
{$("#add-new-site").click(installerAddNewSite);$(".remove-site").click(installerRemoveSite);$(".site-url").keyup(checkAddSiteEnabled);initHelp();checkAddSiteEnabled();}
function installerAddNewSite()
{document.lastTabIndex=document.lastTabIndex-2;var maxId=$("#max-id").get(0);maxId.value=parseInt(maxId.value)+1;var clone=$("#site-proto").clone(true);clone.get(0).id="site-cont"+maxId.value;$("#sites").append(clone).removeClass("one-site");$("#url-empty",clone).get(0).id+=maxId.value;$("#required-missing",clone).get(0).id+=maxId.value;$(":input",clone).each(function(){if($.trim(this.id).length>0)
{this.id=this.id+maxId.value;this.tabIndex=document.lastTabIndex++;}});$("label",clone).each(function(){if($.trim(this.htmlFor).length>0)
{this.htmlFor+=maxId.value;}});checkAddSiteEnabled();$("#add-new-site").get(0).tabIndex=document.lastTabIndex++;$("#btn_tagssetup").get(0).tabIndex=document.lastTabIndex++;}
function installerRemoveSite()
{$(this).parents(".site").remove();if($("#sites .site").size()<2){$("#sites").addClass("one-site");}
checkAddSiteEnabled();}
function checkAddSiteEnabled()
{var enabled=true;$("#sites .site-url").each(function(i){if($.trim(this.value).length==0&&this.id!='url')
{enabled=false;}});$("#add-new-site").get(0).disabled=!enabled;if(enabled)
{$("#add-new-site-info").fadeOut("fast");}
else
{$("#add-new-site-info").fadeIn("fast");}}
function installerValidateSites()
{var maxId=$("#max-id").get(0).value;var form=$("#frmOpenads").get(0);var valid=true;for(var i=1;i<=maxId;i++)
{if($("#url"+i).get(0))
{valid=valid&&validatePublisher(form,"",i+"",i+"",function(form,suffix,fieldSuffix){if($("#url"+fieldSuffix).get(0).value.length==0)
{$("#site-cont"+fieldSuffix).addClass("url-error");}
else
{$("#site-cont"+fieldSuffix).removeClass("url-error");}});}}
return valid;}
function initInstallerTags()
{$("#tag-type").change(tagTypeChanged);$("#ad-size").change(adSizeChanged);$("#site").change(siteChanged);$('pre').bind('mouseover',selectElement);}
function tagTypeChanged()
{if(this.value=="js")
{$("#header-script").show();}
else
{$("#header-script").hide();}
$("pre.invocation-codes:not(."+this.value+")").hide();$("pre.invocation-codes").filter("."+this.value).show();}
function adSizeChanged()
{if(this.value=="*")
{$(".zone-cont").show();}
else
{$(".zone-cont:not(."+this.value+")").hide();$("."+this.value).show();}}
function siteChanged()
{if(this.value=="*")
{$(".publisher-cont").show();}
else
{$(".publisher-cont").hide();$("#"+this.value).show();}}
function initHelp()
{$(".advsignup-help").add(".popup-help-link").click(showHelp);$(".popup-help").click(hideOaHelp);}
function showHelp()
{$(".popup-help").hide();var $help=$(this).prev();if($(this).attr("help")!=undefined){$help=$("#"+$(this).attr("help"));}
$help.fadeIn("fast").css("display","inline");}
function hideOaHelp()
{$(this).fadeOut("fast");}
function selectElement()
{if(window.getSelection)
{var r=document.createRange();r.selectNodeContents($(this)[0]);var s=window.getSelection();if(s.rangeCount)
{s.collapseToStart();s.removeAllRanges();}
s.addRange(r);}
else if(document.body.createTextRange)
{var r=document.body.createTextRange();r.moveToElementText($(this)[0]);r.select();}}
function initRejectedOARows()
{$(".oa td.sts:contains('Rejected')").each(function(){var cell=$(this);var statusRow=cell.parents("tr").next("tr").hide();cell.css("color","green").click(function(){statusRow.show();});});}
function copyValidationConstraints(fromObj,toObj)
{toObj.validateCheck=fromObj.validateCheck;toObj.validateReq=fromObj.validateReq;toObj.validateDescr=fromObj.validateDescr;}
function initAccoutSwitcher(searchUrl)
{$switcher=$("#oaNavigationExtra .accountSwitcher");$switcher.accountswitch({searchUrl:searchUrl});$breadcrumb=$("#thirdLevelHeader > .breadcrumb");$(".switchTrigger").hover(function(){$(".triggerContainer").addClass("hover");},function(){$(".triggerContainer").removeClass("hover");});$(".switchTrigger, .triggerContainer > a",$switcher).click(function(){$breadcrumb.toggleClass("reduced");$switcher.toggleClass("expanded");$switcher.accountswitch({action:'show'});$(".accountSwitcherOverlay").toggle();return false;});$(".accountsPanel li").hover(function(){$this=$(this);if(!$this.is(".opt,.more")){$this.addClass("hover");}},function(){$(this).removeClass("hover");});$(document).click(function(event){if($(event.target).parents(".expanded").length==0){$breadcrumb.removeClass("reduced");$switcher.removeClass("expanded");$(".accountSwitcherOverlay").hide();}});$(document).keydown(function(event){if($(".expanded").length>0&&event.keyCode==27){$breadcrumb.removeClass("reduced");$switcher.removeClass("expanded");$(".accountSwitcherOverlay").hide();}
return true;});}
function maskNonNumeric(event)
{if(event.charCode&&(event.charCode<48||event.charCode>57)){event.preventDefault();}}
function initCampaignStatus()
{var statusRows=$("[@id^='rsn_row']");statusRows.hide();if($("#sts_reject").attr("checked")==true){statusRows.show();}
$("input[name='status']").click(function(){if(this.value=="22"){statusRows.show();}
else{statusRows.hide();}});}
function initCampaignForm(formId)
{Calendar.setup({inputField:'start',ifFormat:'%d %B %Y',button:'start_button',align:'Bl',weekNumbers:false,firstDay:calendarBeginOfWeek,electric:false,onUpdate:function(){$("#start").change();}});Calendar.setup({inputField:'end',ifFormat:'%d %B %Y',button:'end_button',align:'Bl',weekNumbers:false,firstDay:calendarBeginOfWeek,electric:false,onUpdate:function(){$("#end").change();}});var $impressionsField=$("#impressions");var $impressionsUnlimitedField=$("#impr_unlimited");var $clicksField=$("#clicks");var $clicksUnlimitedField=$("#click_unlimited");var $conversionsField=$("#conversions");var $conversionsUnlimitedField=$("#conv_unlimited");var $pricingField=$("#pricing_revenue_type");var $revenueField=$("#revenue");var $startDateField=$("#start");var $endDateField=$("#end");var $priorityField=$("#high_priority_value");var $dateFields=$("input[id$='Set_immediate']");$("#priority-h, #priority-e, #priority-l").click(function(){var infoId='info-'+this.id;$("div[id^='info-priority']").not('#'+infoId).slideFadeOut('slow');$('#'+infoId).slideFadeIn('slow');updateCampaignTypeForm();});$('#weight').keypress(maskNonNumeric);$("#pricing_revenue_type").change(function(){updateCampaignPricingSection();updateCampaignDateAndLimitsAndType();});initCampaignBookedInput($impressionsField,$impressionsUnlimitedField,'openadsRemainingImpressions');initCampaignBookedInput($clicksField,$clicksUnlimitedField,'openadsRemainingClicks');if($conversionsField&&$conversionsUnlimitedField){initCampaignBookedInput($conversionsField,$conversionsUnlimitedField);}
initEcpmInput($pricingField);initEcpmInput($revenueField);initEcpmInput($startDateField);initEcpmInput($endDateField);initEcpmInput($priorityField);initEcpmInput($dateFields);updateEcpm(false);$("#priority-e, #endSet_immediate, #endSet_specific, #impr_unlimited, #click_unlimited, #conv_unlimited").click(function(){updateCampaignDateAndLimitsAndType();updateCampaignPrioritySection();});$("#high_priority_value").change(function(){updateCampaignTypeForm();});$("#startSet_immediate, #startSet_specific, #endSet_immediate, #endSet_specific").click(updateCampaignDateSection);$("#startSet_immediate").click(function(){campaignFormDateReset('start');});$("#endSet_immediate").click(function(){campaignFormDateReset('end');});$("#start").change(function(){campaignFormDateCheck('start');});$("#end").change(function(){campaignFormDateCheck('end');updateCampaignPrioritySection();});$("#"+formId).submit(function(){formUnFormat(this.impressions);formUnFormat(this.clicks);formUnFormat(this.conversions);return campaignFormPriorityCheck(this)&&campaignFormDatesRangeCheck(this);});formFormat($impressionsField.get(0),true);formFormat($clicksField.get(0),true);if($conversionsField){formFormat($conversionsField.get(0),true);}
updateCampaignTypeForm();updateTypeNotes(true);}
function updateCampaignDateAndLimitsAndType()
{var campaignType=getCampaignType();var $limitFields=$("#impressions, #clicks, #conversions");var $unlimitedCheckboxes=$("#impr_unlimited, #click_unlimited, #conv_unlimited");var dateSet=$("#endSet_specific").attr('checked');var limitClicked=false;$unlimitedCheckboxes.each(function(){if(this.checked==false){limitClicked=true;return false;}});if(campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_OVERRIDE)
{$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").hide();if(dateSet==true){$limitFields.val("").attr("disabled","true");$unlimitedCheckboxes.attr({checked:true,disabled:true});showHideLimitDisabledNotes();}
else{$unlimitedCheckboxes.attr("disabled",false);$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();if(limitClicked){$("#endSet_specific").attr("disabled",true);$("#date-section-limit-date-set").show();}
else{$("#endSet_specific").attr("disabled",false);$("#date-section-limit-date-set").hide();}}}
else{$unlimitedCheckboxes.attr("disabled",false);$("#endSet_specific").attr("disabled",false);$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();$("#date-section-limit-date-set").hide();if((campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM)&&dateSet&&limitClicked){$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").show();$("#priority-e, #priority-l").attr("disabled",true);}
else{$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").hide();$("#priority-e, #priority-l").attr("disabled",false);}}
updateCampaignPricingSection();}
function showHideLimitDisabledNotes()
{var pricing=$("#pricing_revenue_type").val();if(MODEL_CPM==pricing){$("#click-disabled-note, #conv-disabled-note").hide();$("#impr-disabled-note").show();}
else if(MODEL_CPC==pricing){$("#impr-disabled-note, #conv-disabled-note").hide();$("#click-disabled-note").show();}
else if(MODEL_CPA==pricing){$("#impr-disabled-note, #click-disabled-note").hide();$("#conv-disabled-note").show();}
if(MODEL_MT==pricing){$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();}}
function initEcpmInput($input)
{$input.change(function(){updateEcpm(true);});}
function initCampaignBookedInput($input,$unlimitedField,centralRemainingId)
{$input.focus(function(){formUnFormat(this);}).keypress(maskNonNumeric).keyup(function(){updateCampaignPricingSectionNotes(this);updateCampaignPrioritySection();}).blur(function(){formFormat(this,true);updateCampaignPricingSectionNotes(this);updateCampaignPrioritySection();});$unlimitedField.click(function(){campaignFormUnlimitedUpdate(this,$input.get(0),true,centralRemainingId);updateCampaignPricingSectionNotes($input.get(0),this);});}
function updateCampaignTypeForm()
{var $allSectionsButPriority=$("#sect_date, #sect_pricing, #sect_cap, #sect_misc");var campaignType=getCampaignType();var minImpressions=$("[id^='ecpm_min_row']");var remnantEcpmNote=$("#remnant_ecpm_note");var contractEcpmNote=$("#contract_ecpm_note");updateCampaignDateAndLimitsAndType();if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM||campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM){$allSectionsButPriority.show();updateCampaignDateSection();updateCampaignPricingSection();updateCampaignPrioritySection();}else{$allSectionsButPriority.hide();$("#sect_priority_low_excl, #sect_priority_high").hide();}
if(campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){$("#sect_priority_low_excl").hide();$("[id^='sect_priority_ecpm']").show();}else{$("[id^='sect_priority_ecpm']").hide();}
if(campaignType==CAMPAIGN_TYPE_ECPM){minImpressions.show();remnantEcpmNote.show();contractEcpmNote.hide();}else{minImpressions.hide();remnantEcpmNote.hide();contractEcpmNote.show();}}
function updateTypeNotes(fast)
{var infoId=null;$("#priority-h, #priority-e, #priority-l").each(function(){if(this.checked==true){infoId='info-'+this.id;return false;}});if(infoId){if(fast==true){$("div[id^='info-priority']").not('#'+infoId).hide();$('#'+infoId).show();}
else{$("div[id^='info-priority']").not('#'+infoId).slideFadeOut('slow');$('#'+infoId).slideFadeIn('slow');}}}
function updateCampaignDateSection()
{var $startDateSpan=$("#specificStartDateSpan");var $endDateSpan=$("#specificEndDateSpan");if($("#startSet_immediate").attr("checked")==true){$startDateSpan.hide();}
else{$startDateSpan.show();}
if($("#endSet_immediate").attr("checked")==true){$endDateSpan.hide();}
else{$endDateSpan.show();}}
function updateCampaignPricingSection()
{var pricing=$("#pricing_revenue_type").val();var revenueRows=$("[@id^='pricing_revenue_row']");var imprRows=$("[@id^='pricing_impr_booked']");var clickRows=$("[@id^='pricing_click_booked']");var convRows=$("[@id^='pricing_conv_booked']");imprRows.hide();clickRows.hide();convRows.hide();if(''==pricing){revenueRows.hide();}
else if(MODEL_CPM==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);revenueRows.show();imprRows.show();}
else if(MODEL_CPC==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);campaignFormUnlimitedUpdate(clicksUnlimitedField,clicksField);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);updateCampaignPricingSectionNotes(clicksField,clicksUnlimitedField);revenueRows.show();clickRows.show();imprRows.show();}
else if(MODEL_CPA==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);var conversionsField=$("#conversions").get(0);var conversionsUnlimitedField=$("#conv_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);campaignFormUnlimitedUpdate(clicksUnlimitedField,clicksField,false);campaignFormUnlimitedUpdate(conversionsUnlimitedField,conversionsField,false);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);updateCampaignPricingSectionNotes(clicksField,clicksUnlimitedField);updateCampaignPricingSectionNotes(conversionsField,conversionsUnlimitedField);revenueRows.show();convRows.show();clickRows.show();imprRows.show();}
else if(MODEL_MT==pricing){revenueRows.show();}}
function updateCampaignPrioritySection()
{var $highPrioritySection=$("#sect_priority_high");var $lowExclPrioritySection=$("#sect_priority_low_excl");var campaignType=getCampaignType();if(campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM){$highPrioritySection.hide();if(campaignType==CAMPAIGN_TYPE_REMNANT){$lowExclPrioritySection.show();}}
else if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){if(campaignType==CAMPAIGN_TYPE_OVERRIDE){$highPrioritySection.hide();$lowExclPrioritySection.show();}
else{$lowExclPrioritySection.hide();if($("#endSet_specific").attr("checked")==true&&campaignHasAnyLimitSet()){$("#high_distribution_span").hide();}
else{$("#high_distribution_span").show();}
$highPrioritySection.show();}}}
function campaignHasAnyLimitSet()
{var pricing=$("#pricing_revenue_type").val();if(''==pricing){return false;}
else if(MODEL_CPM==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField);}
else if(MODEL_CPC==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField)||campaignLimitIsSet(clicksField,clicksUnlimitedField);}
else if(MODEL_CPA==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);var conversionsField=$("#conversions").get(0);var conversionsUnlimitedField=$("#conv_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField)||campaignLimitIsSet(clicksField,clicksUnlimitedField)||campaignLimitIsSet(conversionsField,conversionsUnlimitedField);}
else if(MODEL_MT==pricing){return false;}}
function campaignLimitIsSet(input,unlimitedInput)
{return unlimitedInput.checked==false&&input.value!=''&&input.value!='-'}
function campaignFormPriorityCheck(form)
{var campaignType=getCampaignType();if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM)
{if(campaignType==CAMPAIGN_TYPE_OVERRIDE&&!parseInt($("#weight").val())){return confirm(strCampaignWarningOverrideNoWeight);}
else if(campaignType!=CAMPAIGN_TYPE_OVERRIDE&&($("#endSet_immediate").attr("checked")==true||!campaignHasAnyLimitSet())&&!parseInt($("#target_value").val())){return confirm(strCampaignWarningNoTargetMessage);}}
if(campaignType==CAMPAIGN_TYPE_REMNANT){if(!parseInt($("#weight").val())){return confirm(strCampaignWarningRemnantNoWeight);}}
if(campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){if(!parseFloat($("#revenue").val())||parseFloat($("#revenue").val())<=0){return confirm(strCampaignWarningEcpmNoRevenue);}}
return true;}
function getCampaignType()
{if($("#priority-h, #priority-e, #priority-l").length>0){if($("#priority-h").attr("checked")==true){if(($("[@name=contract_ecpm_enabled]").val()==1)&&$("#high_priority_value").val()>=PRIORITY_ECPM_FROM&&$("#high_priority_value").val()<=PRIORITY_ECPM_TO){return CAMPAIGN_TYPE_CONTRACT_ECPM;}else{return CAMPAIGN_TYPE_CONTRACT_NORMAL;}}
else if($("#priority-e").attr("checked")==true){return CAMPAIGN_TYPE_OVERRIDE;}
else if($("#priority-l").attr("checked")==true){if($("[@name=remnant_ecpm_enabled]").val()==1){return CAMPAIGN_TYPE_ECPM;}else{return CAMPAIGN_TYPE_REMNANT;}}
return null;}
else{return $("#campaign_type").val();}}
function campaignFormDatesRangeCheck(form)
{var activeDate;var expireDate;var activation_enabled=isDateSetActive('start',form);var expiry_enabled=isDateSetActive('end',form);if(activation_enabled){activateDate=newDateFromNamedFields(document,form,'start');if(!activateDate){alert('The start date of this campaign is not a valid date');return false;}}
if(expiry_enabled){expireDate=newDateFromNamedFields(document,form,'end');if(!expireDate){alert('The end date of this campaign is not a valid date');return false;}}
if(activation_enabled&&expiry_enabled){if(!isDateEqual(activateDate,expireDate)&&isDateBefore(expireDate,activateDate)){alert('The selected dates for this campaign are invalid\n(Campaign ends before it starts!).\n');return false;}}
return true;}
function campaignFormDateCheck(elemName)
{var date=$("#"+elemName).val();if(date==''){$("[@name='"+elemName+"Set']").get(0).checked=true;}
else{$("[@name='"+elemName+"Set']").get(1).checked=true;}
updateCampaignDateSection();}
function campaignFormDateReset(elemToReset)
{$("#"+elemToReset).val('');}
function formFormat(field,allowzero)
{if(typeof(allowzero)=='undefined'){allowzero=false;}
if((field.value=='')||(field.value==0&&allowzero==false)){field.value='-';}
if(field.value!='-'){field.value=max_formatNumberIgnoreDecimals(field.value);}}
function formUnFormat(field)
{if(field.value!='-'&&field.value!=''){field.value=max_formattedNumberStringToFloat(field.value);}
else{field.value='';}}
(function($){$.fn.expandableContainer=function(){return this.each(function(){var o={hookClass:"more-less",moreContainerClass:"moreContainer"};var $container=$(this);var $moreContainer=$('.'+o.moreContainerClass,$container);var $hook=$('.'+o.hookClass,$container);$moreContainer.hide();$hook.show();$container.find("li a.hasForm").click(showForm);$hook.toggle(expand,collapse);function showForm()
{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$(this).siblings('.form').show();}
else{$(this).siblings('.form').show('normal');}
$(this).parent('li').addClass('expanded');}
function expand()
{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$moreContainer.stop().show();}
else{$moreContainer.stop().slideFadeIn('normal');}
$hook.addClass('expanded');}
function collapse()
{$container.find("li .form").hide('normal');if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$moreContainer.stop().hide();}
else{$moreContainer.stop().slideFadeOut('normal');}
$hook.removeClass('expanded');}});};})(jQuery);(function($){$.fn.selectText=function(){return this.each(function(){$(this).bind('mousedown',selectText).bind('click',selectText).bind('mousemove',selectText);function selectText()
{$(this).select();}});};})(jQuery);(function($){$.fn.selectFile=function(){return this.each(function(){$form=$(this);});};})(jQuery);;(function($){$.fn.initForm=function(options){var defaults={rules:{},messages:{}};var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this);if(!$this.is("form")){return true;}
if(isEmpty(settings.rules)){return;}
$this.validate({event:"keyup",focusInvalid:true,errorPlacement:function($error,$element){if($element.is("input[type=checkbox]")||$element.is("input[type=radio]")){$nextSibling=$element.next();if($nextSibling.is("label")){$error.insertAfter($nextSibling);$("<br>").insertAfter($nextSibling);}
else{$error.insertAfter($element);}}
else{$nextSibling=$element.next();if($nextSibling.is("label[for="+$element.attr('id')+"]")){$error.insertAfter($nextSibling);}
else{$error.insertAfter($element);}}},errorContainer:'#errors_'+$this.attr('id'),rules:settings.rules,messages:settings.messages});});function isEmpty(ob){for(var i in ob){if(ob.hasOwnProperty(i)){return false;}}
return true;}};})(jQuery);;(function($){$.fn.help=function(s){return this.each(function(){new $.fn.helpObject(this,s);});};$.fn.helpObject=function(help,settings){var defaults={'parentXOffset':0,'parentYOffset':0}
var options=$.extend({},defaults,settings);$(help).hide();var $wrapper=wrap($(help));$("[help='"+help.id+"']").addClass("popup-help-link").bind('click',{'elementId':$wrapper.get(0).id},show);$wrapper.click(hide);function show(event,pageX,pageY)
{var $wrapper=$("#"+event.data['elementId']);$(".popup-help").fadeOut("fast");var clickPosition=getClickPositionInDocument(event,pageX,pageY);var posX=clickPosition.X-options.parentXOffset;var posY=clickPosition.Y+5-options.parentYOffset;$wrapper.fadeIn("fast").css("display","block");var wrapperWidth=$wrapper.outerWidth({margin:true});var wrapperHeight=$wrapper.outerHeight({margin:true});var scrollY=event.pageY-event.clientY;var xDiff=$(window).width()-(posX+wrapperWidth+10);var yDiff=$(window).height()-(posY-scrollY+wrapperHeight);if(xDiff<=0){posX-=Math.abs(xDiff);posX=Math.max(10,posX);}
if(yDiff<=0){posY-=(wrapperHeight+10);posY=Math.max(10+scrollY,posY);}
$wrapper.css({top:posY,left:posX});}
function hide()
{$(this).fadeOut("fast");}
function wrap($help)
{var $wrapper=$help.wrap("<div class='popup-help'></div>").parent();$wrapper.attr("id",$help.get(0).id+"wrapper");$wrapper.prepend("<div class='close'> <span class='link'>[x]</span> </div>");$wrapper.hide();$help.addClass("help-content").show();return $wrapper;}
function getClickPositionInDocument(e,pageX,pageY)
{if(e.pageX){clickX=e.pageX;}
else if(pageX){clickX=pageX;}
else if(e.clientX){if(document.documentElement.scrollLeft){scrollX=document.documentElement.scrollLeft;}
else{scrollX=document.body.scrollLeft;}
clickX=e.clientX+scrollX;}
if(e.pageY){clickY=e.pageY;}
else if(pageY){clickY=pageY;}
else if(e.clientY){if(document.documentElement.scrollTop){scrollY=document.documentElement.scrollTop;}
else{scrollY=document.body.scrollTop;}
clickY=e.clientY+scrollY;}
if(clickX<0){clickX=0;}
if(clickY<0){clickY=0;}
return{'X':clickX,'Y':clickY};}};})(jQuery);(function($){$(document).ready(function(){$("[id^='help-']").help({'parentXOffset':200,'parentYOffset':200});});})(jQuery);;jQuery.fn.submitOnChange=function(){return this.each(function()
{$(this).bind("change",function()
{if(this.form){this.form.submit();}});});};$(document).ready(function(){$("select.submit-on-change").submitOnChange();});jQuery.fn.confirmed=function(dialogSelector,mainButtonLabel,mainButtonClass){return this.each(function(){$(this).click(function(){var $link=$(this);var buttons={};buttons[mainButtonLabel]=function(){location.href=$link.attr("href");$(this).dialog("close");};buttons['Cancel']=function(){$(this).dialog("close");};$(dialogSelector).find("#title-placeholder").html($link.attr("title")+" ");$(dialogSelector).dialog({modal:true,overlay:{opacity:0.5,background:"black"},buttons:buttons,close:function(){$(this).dialog("destroy");},width:600,height:140});$(".ui-dialog-titlebar-close > span").html("&nbsp;");if(mainButtonClass){$(".ui-dialog-buttonpane > button:eq(0)").addClass(mainButtonClass);}
$(dialogSelector).show();return false;});});};jQuery.fn.showWithOverlay=function(zIndex){var $this=this;var $overlay=$("#bg-ovlay");if($overlay.size()==0){$overlay=$("<div id='bg-ovlay' style='position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: "+zIndex+" '></div>");$overlay.prependTo("body").click(function(){$this.hide();$overlay.remove();});}
return this.show();};jQuery.removeOverlay=function(){$("#bg-ovlay").remove();}
jQuery.fn.slideFadeOut=function(speed,callback)
{return this.animate({height:'hide',opacity:'hide',marginTop:'hide',marginBottom:'hide'},speed,callback);};jQuery.fn.slideFadeIn=function(speed,callback)
{return this.animate({height:'show',opacity:'show',marginTop:'show',marginBottom:'show'},speed,callback);};jQuery.fn.sweepFadeIn=function(speed,callback)
{return this.animate({width:'show',opacity:'show',marginLeft:'show',marginLeft:'show'},speed,callback);};(function($){$.fn.selectText=function(){return this.each(function(){$(this).bind('mousedown',selectText).bind('click',selectText).bind('mousemove',selectText);function selectText()
{$(this).select();}});};})(jQuery);(function($){$.fn.selectElement=function(){return this.each(function(){$(this).bind('mousedown',selectElementText).bind('click',selectElementText).bind('mousemove',selectElementText);function selectElementText(){if(window.getSelection){var r=document.createRange();r.selectNodeContents($(this)[0]);var s=window.getSelection();if(s.rangeCount){s.collapseToStart();s.removeAllRanges();}
s.addRange(r);}
else if(document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText($(this)[0]);r.select();}}});};})(jQuery);$.fn.hideElement=function(animate,callback)
{if(!jQuery.browser.msie&&animate){this.stop().slideUp(300,callback);}
else{this.hide();}
return this;}
$.fn.showElement=function(animate,callback)
{if(!jQuery.browser.msie&&animate){this.stop().slideDown(300,callback);}
else{this.show();}
return this;}
$.fn.setElementVisible=function(visible,animate,callback)
{if(visible){return this.showElement(animate,callback);}else{return this.hideElement(animate,callback);}}
$.fn.setElementVisibility=function(visible)
{return this.css("visibility",(visible?"visible":"hidden"));}
$.fn.indicator=function(action,text,message){return this.each(function(){var $this=$(this);var currentText='';var currentMessage='';if(action=='saved'){currentText='Changes saved';$this.removeClass('iconLoading iconWarning').addClass('iconConfirm').show();window.setTimeout(function(){$this.fadeOut(200);},4000);}else if(action=='error'){currentText='Error';currentMessage='An error has occurred, please try again';$this.addClass('iconWarning').removeClass('iconConfirm iconLoading').show();}else{currentText='Loading...';$this.addClass('iconLoading').removeClass('iconConfirm iconWarning').show();}
if(typeof text!='undefined'){$this.html(text);}else{$this.html(currentText);}
if(typeof message!='undefined'){$this.attr('title',message);}else{$this.attr('title',currentMessage);}});}
$.fn.disableLink=function(message){return this.each(function(){var $this=$(this);$this.attr("hrefbak",$this.attr("href"));$this.attr("disabled",true);$this.removeAttr("href");$this.addClass("disabled");if(typeof message!='undefined'){$this.attr("titlebak",$this.attr("title"));$this.attr("title",message);}});};$.fn.enableLink=function(){return this.each(function(){var $this=$(this);$this.attr("href",$this.attr("hrefbak"))
$this.removeAttr("hrefbak").removeAttr("disabled");$this.removeClass("disabled");$this.attr("title",$this.attr("titlebak"));});};$.fn.disabledClick=function(callback){return this.each(function(){var $this=$(this);$this.click(function(){if(!$this.attr("disabled")){return callback.call($this.get(0));}else{return false;}});});};$.fn.synchronizedCheckboxes=function(){var $checkboxes=this;this.change(function(){var $this=$(this);$checkboxes.not($this).attr('checked',$this.is(":checked"));});return this;};jQuery.fn.visible=function(visible)
{return this.each(function(){if(visible){$(this).show();}
else{$(this).hide();}});};jQuery.fn.selectedText=function(visible)
{if(this.size()==0){return;}
var select=this[0];return select.options[select.selectedIndex].text;};$(document).ready(function(){$("form.validate").each(function(){$(this).validate();});});jQuery.fn.confirmedLink=function(triggerLinkClass,closeIdPrefix)
{$("#"+closeIdPrefix+"confirmation-dialog").jqm({modal:true,overlay:40,trigger:"."+triggerLinkClass,onShow:function(hash){$("#"+closeIdPrefix+"cd-submit").one("click",function(){location.href=hash.t.href;});hash.w.fadeIn("fast");}}).jqmAddClose("#"+closeIdPrefix+"cd-cancel");};jQuery.terms=function(triggerLinksSelector,closeIdPrefix){if($.browser.msie&&(parseInt($.browser.version)==6)){return this;}
$("#"+closeIdPrefix+"terms-dialog").jqm({modal:true,overlay:40,trigger:triggerLinksSelector,onShow:function(hash){var windowHeight=$(window).height();var topOffset=0.15;var extraHeader=70;var $termsContents=$("#"+closeIdPrefix+"terms-contents");$termsContents.height(windowHeight*(1-2*topOffset)-extraHeader);$termsContents.html("<a href='"+hash.t.href+"' target='_blank'>"+hash.t.title+"</a>");$termsContents.load(hash.t.href,null,function(){this.scrollTop=0;});$("#"+closeIdPrefix+"terms-title").html("&nbsp;&nbsp;"+hash.t.title);$("#"+hash.t.id+"c").attr("checked",false);$("#"+closeIdPrefix+"terms-submit").one("click",function(){$("#"+hash.t.id+"c").attr("checked",true);$("#"+closeIdPrefix+"terms-dialog").jqmHide();});hash.w.fadeIn("fast");}}).jqmAddClose("#"+closeIdPrefix+"terms-cancel");};jQuery.fn.toggleContent=function(checkedContentSelector,uncheckedContentSelector){return this.eq(0).click(function(){if(this.checked){$(checkedContentSelector).show();$(uncheckedContentSelector).hide();}else{$(checkedContentSelector).hide();$(uncheckedContentSelector).show();}}).end();};$(document).ready(function(){function resizeContentBox(){$("#thirdLevelContent").each(function(){var offset=document.documentElement.clientHeight;offset-=$(this).offset().top;offset-=parseInt($(this).css('paddingTop'));offset-=parseInt($(this).css('paddingBottom'));$(this).css(jQuery.browser.msie&&jQuery.browser.version<7?'height':'minHeight',offset+'px');if($.browser.msie){$(this).css('zoom',1);}});}
resizeContentBox();window.setInterval(resizeContentBox,300);});;(function($){$.fn.multicheckboxcondition=function(settings){return this.each(function(){var defaults={childSelector:"[@id^='"+this.id+"_']",childAffectParent:true,condition:function(checkbox,parentChecked){return true;}};var options=$.extend({},defaults,settings);var $parent=$(this);$(options.childSelector).click(function(event){if(options.childAffectParent){var allChecked=true;$(options.childSelector).each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);}
event.stopPropagation();}).bind('stateUpdate',function(event,parentId){if(parentId!=$parent.attr('id')){var allChecked=true;if(options.childAffectParent){$(options.childSelector).each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);}}});$parent.click(function(event){var parent=this;$(options.childSelector).each(function(){if(options.condition(this,parent.checked)==true){$(this).attr("checked",parent.checked);$(this).trigger('stateUpdate',[parent.id]);}});event.stopPropagation();});});};$.fn.multicheckbox=function(){return this.each(function(){var $parent=$(this);$("[@id^='"+this.id+"_']").click(function(event){var allChecked=true;$("[@id^='"+$parent.attr("id")+"_']").each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);event.stopPropagation();});$parent.click(function(event){$("[@id^='"+this.id+"_']").attr("checked",this.checked);event.stopPropagation();});});};$.fn.multicheckboxes=function(settings){return this.each(function(){var defaults={id:Math.random(),clickElement:null,updateElement:null,containerClicked:fold,checkboxClicked:null,updateChildren:synchronizeChildrenWithParent,updateParent:synchronizeParentWithChildren,toSelectClass:"to-select",toUselectClass:"to-unselect",selectAllSelector:"#select-all",isMultiCheckbox:function($checkbox){return $checkbox.attr("id");},getChildCheckboxes:function($parentCheckbox){return $("[@id^='"+$parentCheckbox.attr("id")+"_']");},getParentCheckbox:function($childCheckbox){var checkboxId=$childCheckbox.attr("id");return $("#"+checkboxId.substring(0,checkboxId.indexOf("_")));}};var options=$.extend({},defaults,settings);var cache=new Object();var $container=$(this);$container.bind('stateUpdate',function(event,internalId,$checkboxes){if(internalId==options.id){}
else{var parentCache=new Array();$checkboxes.each(function(){var $checkbox=$(this);if($checkbox.size()!=0&&cacheableIsMultiCheckbox($checkbox)){var $parent=cacheableGetParentCheckbox($checkbox);if($parent&&$parent.size()>0){var cacheId=getCacheId($parent);if(!parentCache[cacheId]){handleCheckboxStateChange($checkbox,$checkbox,false);parentCache[cacheId]=true;}}
else{handleCheckboxStateChange($checkbox,$checkbox,false);}}});$container.trigger("multichange");}});$container.bind('dataUpdate',clearCache);$container.click(function(event){var $target=$(event.target);if(options.containerClicked){options.containerClicked.call($target);}
var ie6=$.browser.msie&&(parseInt($.browser.version)==6);var $checkbox;if($target.is(":checkbox")){$checkbox=$target;}
else if(options.clickElement&&($target.is(options.clickElement)||(ie6&&$target.is("label")))){$checkbox=$target.parent().find(":checkbox");if(!$checkbox.get(0)){return;}
$checkbox.get(0).checked=!$checkbox.get(0).checked;}
else{return;}
if($checkbox.is(options.selectAllSelector)){handleSelectAllChange($checkbox);}
else{handleCheckboxStateChange($checkbox,$target,true);}});function handleCheckboxStateChange($checkbox,$target,triggerMultichange)
{if($checkbox.size()!=0&&cacheableIsMultiCheckbox($checkbox)){if(options.checkboxClicked){options.checkboxClicked.call($checkbox);}
var $parent=cacheableGetParentCheckbox($checkbox);if($parent&&$parent.size()!=0){options.updateParent.call($target,$parent,cacheableGetChildCheckboxes($parent));updateTableRow($checkbox,options);updateTableRow($parent,options);}
else{var $children=cacheableGetChildCheckboxes($checkbox);if($children&&$children.size()!=0){options.updateChildren.call($target,$children,$checkbox.get(0).checked);updateTableRow($children,options);updateTableRow($checkbox,options);$container.trigger('stateUpdate',[options.id,$children]);}}
if(options.selectAllSelector&&!$checkbox.is(":checked")){$(options.selectAllSelector).attr("checked",false);}
if(triggerMultichange){$container.trigger("multichange");}}
else{}}
function handleSelectAllChange($checkbox)
{var $checkboxes=$container.find(":checkbox").not(options.selectAllSelector);var allChecked=$checkbox.is(":checked");$checkboxes.attr("checked",allChecked);if(options.updateElement){var $elements=$container.find(options.updateElement);if(allChecked){$elements.addClass(options.toSelectClass);}else{$elements.removeClass(options.toSelectClass);}}
$container.trigger("multichange");}
function clearCache()
{cache=new Object();}
function cacheableIsMultiCheckbox($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('IsMultiCheckbox'+uniqueId,$container,options.isMultiCheckbox,[$checkbox]);return result;}
function cacheableGetChildCheckboxes($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('GetChildCheckboxes'+uniqueId,$container,options.getChildCheckboxes,[$checkbox]);return result;}
function cacheableGetParentCheckbox($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('GetParentCheckbox'+uniqueId,$container,options.getParentCheckbox,[$checkbox]);return result;}
function callWithCache(key,object,callback,args)
{if(cache[key]){return cache[key];}
var result=callback.apply(object,args);cache[key]=result;return result;}
function getCacheId($element)
{var cacheId=$.data($element.get(0),'mc_cache_id');if(!cacheId){cacheId='cid'+$.data($element);$.data($element.get(0),'mc_cache_id',cacheId);}
return cacheId;}
function updateTableRow($checkboxes,options){if(options.updateElement){$checkboxes.each(function(){var $checkbox=$(this);var $row=cacheableGetElementParent($checkbox,options.updateElement);if($row.size()==0){return true;}
var newState=$checkbox.get(0).checked;if(newState){$row.addClass(options.toSelectClass);}
else{$row.removeClass(options.toSelectClass);}});}}
function cacheableGetElementParent($element,parentType)
{var uniqueId=getCacheId($element);var result=callWithCache('GetElementParent'+parentType+uniqueId,$container,function($element,parentType){return $element.parents(parentType).eq(0);},[$element,parentType]);return result;}});};function fold()
{if(this.is("td.handle")||this.is("span")){this.parents("tr:eq(0)").find("table").toggle();}}
function synchronizeChildrenWithParent($children,parentChecked)
{$children.attr("checked",parentChecked);}
function clearChildrenIfParentChecked($children,parentChecked)
{if(parentChecked){$children.attr("checked",false);}}
function synchronizeParentWithChildren($parentCheckbox,$children)
{var allChecked=true;$children.each(function(){if(!this.checked){allChecked=false;return false;}});$parentCheckbox.attr("checked",allChecked);}
function clearParentIfAnyChildChecked($parentCheckbox,$children)
{var anyChecked=true;$children.each(function(){if(!this.checked){anyChecked=true;return false;}});if(anyChecked){$parentCheckbox.attr("checked",false);}}
$.multicheckbox={synchronizeChildrenWithParent:synchronizeChildrenWithParent,synchronizeParentWithChildren:synchronizeParentWithChildren,clearChildrenIfParentChecked:clearChildrenIfParentChecked,clearParentIfAnyChildChecked:clearParentIfAnyChildChecked}})(jQuery);;(function($){$.extend({activateDropDown:new function(){var active=null;function onToggle(event){event.stopPropagation();$(this).parent('.dropDown').each(function(){if($(this).hasClass('active')){$(this).removeClass('active');$(this).trigger('dropdownClose');active=null;}else{$(this).addClass('active');$(this).trigger('dropdownOpen',[event.target]);active=this;}});}
function onClose(){$(active).removeClass('active');$(active).trigger('dropdownClose');active=null;}
function onKey(event){if(event.keyCode==27){onClose();}}
function preventClose(event){event.stopPropagation();}
this.construct=function(settings){return this.each(function(){$(this).children('span').bind('click',onToggle);$(this).children('div.mask').bind('click',onToggle);$(this).children('div.panel').children().bind('click',preventClose);$('body').bind('click',onClose);$('body').bind('keydown',onKey);$(this).bind("close",onClose);});};}});$.fn.extend({activateDropDown:$.activateDropDown.construct});$(document).ready(function(){$('.dropDown').activateDropDown();});})(jQuery);;(function($){function listColumn(parent,options,data){this.keydown=function(event){var elem=event.data.list.find('.selected');switch(event.keyCode){case 37:event.preventDefault();if(event.data.onprev){event.data.onprev(false);}
break;case 38:event.preventDefault();var prev=elem.prev();if(prev.length){prev.addClass('selected');elem.removeClass('selected');event.data.change(prev);}
break;case 39:event.preventDefault();if(event.data.onnext){event.data.onnext(false);}
break;case 40:event.preventDefault();var next=elem.next();if(next.length){next.addClass('selected');elem.removeClass('selected');event.data.change(next);}
break;case 32:case 13:event.preventDefault();event.data.select(elem);break;case 9:event.preventDefault();if(event.shiftKey){if(event.data.onnext){event.data.onnext(true);}}else{if(event.data.onprev){event.data.onprev(true);}}
break;}}
this.click=function(event){event.stopPropagation();event.preventDefault();event.data.activate();var target=jQuery(event.target).parents('li');event.data.list.find('li.selected').removeClass('selected');target.addClass('selected');event.data.change(target);event.data.select(target);}
this.select=function(elem){var id=elem[0].id.replace(this.options.name+'_','');if(this.onselect){this.onselect(id);}}
this.change=function(elem){this.focus();var id=elem[0].id.replace(this.options.name+'_','');if(this.onchange){this.onchange(id);}}
this.focus=function(){if(this.list.find('.selected').length){}else{this.list.find('li:first').addClass('selected');}
this.list.find('.selected a').focus();}
this.activate=function(){this.focus();if(this.onactivate){this.onactivate();}
this.list.addClass('active');}
this.deactivate=function(){this.list.removeClass('active');}
this.load=function(data){this.empty();this.list.removeClass('loading');var order=[];for(k in data){order[data[k].idx]=k;}
for(n=0;n<order.length;n++){var k=order[n];var d=this.options.name;var d=this.options.className;var d=data[k].name;var item=jQuery("<li id='"+this.options.name+"_"+k+"'><a href='#' class='inlineIcon "+this.options.className+"' title='"+data[k].name+"'>"+data[k].name+"</a></li>");if(this.options.id==k){item.addClass('selected');}
item.bind('click',this,this.click);item.bind('keydown',this,this.keydown);this.list.append(item);}}
this.empty=function(){this.list.html('');this.list.addClass('loading');}
this.options=options;parent.append(jQuery("<strong>"+this.options.label+"</strong>"));this.list=jQuery("<ul></ul>");parent.append(this.list);this.load(data);};$.extend({activateNavigator:new function(){var container=null;var entities=null;var data=null;var loading=null;function buildColumn(i,entity,data){var column=jQuery("<div class='column'></div>");container.append(column);if(i==0){column.addClass('first');}
entities[i].column=new listColumn(column,entities[i],data);entities[i].column.onnext=function(cycle){if(i<entities.length-1){entities[i+1].column.activate();}else{if(cycle){entities[0].column.activate();}}};entities[i].column.onprev=function(cycle){if(i>0){entities[i-1].column.activate();}else{if(cycle){entities[entities.length-1].column.activate();}}};entities[i].column.onactivate=function(){for(var j=0;j<entities.length;j++){entities[j].column.deactivate();}};entities[i].column.onselect=function(id){if(i==entities.length-1){selectItem(id);}};entities[i].column.onchange=function(id){if(i<entities.length-1){for(var j=i+1;j<entities.length;j++){entities[j].column.empty();}
var columnData=data;for(var j=0;j<i;j++){if(j+1<entities.length){columnData=columnData[entities[j].id]['items'];}}
if(columnData[id]){entities[i].id=id;if(columnData[id]['items']){entities[i+1].column.load(columnData[id]['items']);}else{var parameters='';for(var j=0;j<i;j++){parameters+=entities[j].name+'='+entities[j].id+'&';}
parameters+=entities[i].name+'='+id;loading=entities[i].name+'='+id;$.getJSON("inventory-retrieve.php?"+parameters,function(d){columnData[id]['items']=d;if(loading==entities[i].name+'='+entities[i].id){entities[i+1].column.load(columnData[id]['items']);}});}}}};}
function selectItem(id){var parameters='';for(var i=0;i<entities.length-1;i++){parameters+=entities[i].name+'='+entities[i].id+'&';}
parameters+=entities[entities.length-1].name+'='+id;window.location='?'+parameters;}
function focus(event,target){if(target.tagName=='LI'&&$(target).hasClass('ent')){var className=target.className.match(/icon[a-z]+/i)
for(var i=0;i<entities.length;i++){if(entities[i].className==className){entities[i].column.activate();}}}}
this.construct=function(e,d){return this.each(function(){$(this).bind('dropdownOpen',focus);container=$(this).find('.panel div');entities=e;data=d;var columnData=data;for(var i=0;i<entities.length;i++){buildColumn(i,entities[i],columnData);if(i+1<entities.length){columnData=columnData[entities[i].id]['items'];}}});};}});$.fn.extend({activateNavigator:$.activateNavigator.construct});})(jQuery);;(function($){$.extend({activateTable:new function(){this.construct=function(settings){return this.each(function(){var $this=$(this);var $parentCheckbox;var $childCheckboxes;var $checkboxSelectionDependants;findCheckboxes();$this.multicheckboxes({selectedClass:"selected",unselectedClass:"",toSelectClass:"selected",toUselectClass:"",selectAllSelector:".toggleAll:has(input)",updateElement:"tr",useState:false,isMultiCheckbox:function($checkbox){return $checkbox.parent(".toggleAll").size()==1||$checkbox.parent(".toggleSelection").size()==1;},getChildCheckboxes:function($checkbox){return $checkbox.parent(".toggleAll").size()==1?$childCheckboxes:$([]);},getParentCheckbox:function($checkbox){return $checkbox.parent(".toggleSelection").size()==1?$parentCheckbox:$([]);}});$this.bind("multichange",function(){if($childCheckboxes.filter(":checked").size()>0){$checkboxSelectionDependants.removeClass('inactive');}
else{$checkboxSelectionDependants.addClass('inactive');}});$childCheckboxes.filter(":checked").each(function(){$(this).parents('tr').addClass('selected');});$this.delegate('mouseover mouseout','tbody tr',function(event){$(this).toggleClass('hilite');});$this.bind("dataUpdate",function(){findCheckboxes();});function findCheckboxes(){$parentCheckbox=$this.find('.toggleAll input');$childCheckboxes=$this.find('.toggleSelection input');$checkboxSelectionDependants=$this.find('.activeIfSelected');}});};}});$.fn.extend({activateTable:$.activateTable.construct});$(document).ready(function(){$('.tableWrapper').activateTable();});})(jQuery);;(function($){$.tablesorter.addParser({id:'currencyDiff',is:function(s){return/^[+-][$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^-+0-9.]/g),""));},type:'numeric'});})(jQuery);;function max_formSetRequirements(obj,descr,req,check)
{if(typeof(check)=='undefined'){check='present';}
if(check.substr(0,7)=='number+'){if(check.length==7){return;}}
if(check.substr(0,6)=='float+'){if(check.length==6){return;}}
if(check.substr(0,8)=='compare:'){if(check.length==8){return;}}
obj=findObj(obj);if(obj){obj.validateReq=req;obj.validateCheck=check;obj.validateDescr=descr;}}
function max_formSetUnique(obj,unique)
{obj=findObj(obj);if(obj){obj.validateUnique=unique;}}
function max_formSetLength(obj,length)
{obj=findObj(obj);if(obj){if(length&&length.min&&length.min>0){obj.minLength=length.min;}
if(length&&length.max){obj.maxLength=length.max;}}}
function max_formSetConditionalValidate(obj,condition)
{obj=findObj(obj);if(obj){obj.valCondition=condition;}}
function max_formValidateElement(obj)
{var tdelimiter=validatorPreferences.thousandsSeperator;if(obj.valCondition&&!eval(obj.valCondition)){return false;}
if(obj.validateCheck||obj.validateReq){err=false;val=obj.value;if(obj.validateReq==true&&(val==''||val=='-'||val=='http://')&&!obj.disabled){err=true;}
if(obj.validateCheck&&(err==false)&&val!=''){if((obj.validateCheck=='url')&&(val.substr(0,7)!='http://')&&(val.substr(0,8)!='https://')){err=true;}
if((obj.validateCheck=='email')&&((val.indexOf('@')<1)||(val.indexOf('@')==(val.length-1)))){err=true;}
if((obj.validateCheck=='number*')&&((isNaN(val)&&(val!='*'))||(parseInt(val)<0))){err=true;}
if((obj.validateCheck=='number')&&((isNaN(val))||(parseInt(val)<0))){err=true;}
if((obj.validateCheck=='wholeNumber')&&((isNaN(val))||(parseInt(val)<0)||(val.indexOf('.')!=-1))){err=true;}
if(obj.validateCheck=='wholeNumber-'){var valString=val.toString();if(valString=='-'){valString=0;}
else if(isNaN(val)||(parseInt(val)<0)||(val.indexOf('.')!=-1)){err=true;}}
if(obj.validateCheck.substr(0,7)=='number+'){min=obj.validateCheck.substr(7,obj.validateCheck.length-7);if((min==0)&&(val=='-')){val=0;}
if(isNaN(val)||(parseInt(val)<parseInt(min))){err=true;}}
if(obj.validateCheck=='formattedNumber'){var valString=val.toString();if(valString.indexOf(tdelimiter)!=-1){var array=valString.split(tdelimiter);valString=array.join('');}
if(valString=='-'){valString=0;}
if((isNaN(valString)&&(valString!='*'))||(parseInt(valString)<0)){err=true;}
if(!err&&!isNaN(valString)){obj.value=valString;}}
if((obj.validateCheck=='float*')&&((isNaN(val)&&(val!='*'))||(parseFloat(val)<0))){err=true;}
if(obj.validateCheck.substr(0,6)=='float+'){min=obj.validateCheck.substr(6,obj.validateCheck.length-6);if((min==0)&&(val=='-')){val=0;}
if(isNaN(val)||(parseFloat(val)<parseFloat(min))){err=true;}}
if(obj.validateCheck=='formattedFloat'){var valString=val.toString();while(valString.indexOf(tdelimiter)!=-1){var array=valString.split(tdelimiter);valString=array.join('');}
if(valString=='-'){valString=0;}
if((isNaN(valString)&&(valString!='*'))||(parseFloat(valString)<0)){err=true;}
if(!err&&!isNaN(valString)){obj.value=valString;}}
if(obj.validateCheck.substr(0,8)=='compare:'){compare=obj.validateCheck.substr(8,obj.validateCheck.length-8);compareobj=findObj(compare);if(val!=compareobj.value){err=true;}}
if(obj.validateCheck=='unique'){needle=obj.value.toLowerCase();haystack=obj.validateUnique.toLowerCase();if(haystack.indexOf('|'+needle+'|')>-1){err=true;}}}
if(obj.minLength&&obj.value.length<obj.minLength){err=true;}
if(obj.maxLength&&obj.maxLength>0&&obj.value.length>obj.maxLength){err=true;}
if(err){obj.className='error';}else{obj.className='flat';}
return err;}}
function max_formValidate(f)
{var noerrors=true;var first=false;var fields=new Array();for(var i=0;i<f.elements.length;i++){if(f.elements[i].validateCheck||f.elements[i].validateReq){err=max_formValidateElement(obj=f.elements[i]);if(err){if(first==false){first=i;}
fields.push(f.elements[i].validateDescr);noerrors=false;}}}
if(noerrors==false){alert(validatorPreferences.strFieldContainsErrors+'                     \n\n- '+
fields.join('\n- ')+'\n\n'+
validatorPreferences.strFieldFixBeforeContinue1+'\n'+
validatorPreferences.strFieldFixBeforeContinue2+'\n');if(f.elements[first].nodeName.toLowerCase()!="select"){f.elements[first].select();}
f.elements[first].focus();}
return(noerrors);}
function getObj(name)
{if(document.getElementById)
{this.obj=document.getElementById(name);if(this.obj)
{this.style=document.getElementById(name).style;}}
else if(document.all)
{this.obj=document.all[name];if(this.obj){this.style=document.all[name].style;}}
else if(document.layers)
{this.obj=document.layers[name];this.style=document.layers[name];}}
function max_formValidateHtml(obj)
{var htmlCode=obj.value;var openTags;var closeTags;openTags=0;closeTags=0;pattern=/<!--/;pattern2=/-->/;htmlCodes=htmlCode.split(pattern);for(i=0;i<htmlCodes.length;i++){var code=htmlCodes[i];splitCode=code.split(pattern2);if(splitCode){if(splitCode.length>1){for(n=1;n<splitCode.length;n++){var newCode=splitCode[n];openTag=/</g;openTagsArr=newCode.match(openTag);if(openTagsArr){openTags=openTags+openTagsArr.length;}
closeTag=/>/g;closeTagArr=newCode.match(closeTag);if(closeTagArr){closeTags=closeTags+closeTagArr.length;}}}else{for(n=0;n<splitCode.length;n++){var newCode=splitCode[n];openTag=/</g;openTagsArr=newCode.match(openTag);if(openTagsArr){openTags=openTags+openTagsArr.length;}
closeTag=/>/g;closeTagArr=newCode.match(closeTag);if(closeTagArr){closeTags=closeTags+closeTagArr.length;}}}}}
if(openTags!=closeTags){if(openTags>closeTags){var difference=openTags-closeTags;var errorMsg=validatorPreferences.strWarningMissing+difference+validatorPreferences.strWarningMissingClosing;}
else{var difference=closeTags-openTags;var errorMsg=validatorPreferences.strWarningMissing+difference+validatorPreferences.strWarningMissingOpening;}
var ignore=confirm(errorMsg+' \n '+validatorPreferences.strSubmitAnyway)
if(!ignore)
return false;}
return true;};var accessKeyEnabled=true;function useAccessKey(evt){if(accessKeyEnabled==true){if(event.altKey){event.srcElement.click();}}else{event.srcElement.blur();accessKeyEnabled=true;}}
function releaseAccessKey(){if(accessKeyEnabled==false){accessKeyEnabled=true;}}
function initAccessKey(){if(navigator.appName=="Microsoft Internet Explorer"){for(i=0;i<document.all.length;i++){a=document.all(i);if(a.tagName=='A'&&a.accessKey!=''){a.blur();a.onfocus=useAccessKey;}}
if(event.altKey){accessKeyEnabled=false;document.onkeyup=releaseAccessKey;setTimeout('releaseAccessKey()',100);}}}
function findObj(n,d){var p,i,x;if(!d)d=document;if((p=n.indexOf("?"))>0&&parent.frames.length){d=parent.frames[n.substring(p+1)].document;n=n.substring(0,p);}
if(!(x=d[n])&&d.all)x=d.all[n];for(i=0;!x&&i<d.forms.length;i++)x=d.forms[i][n];for(i=0;!x&&d.layers&&i<d.layers.length;i++)x=findObj(n,d.layers[i].document);if(!x&&document.getElementById)x=document.getElementById(n);return x;}
function openWindow(theURL,winName,features){window.open(theURL,winName,features);return false;}
function setTextOfLayer(objName,newText){while(obj=document.getElementById(objName)){with(obj)
if(document.layers){document.write(unescape(newText));document.close();}
else innerHTML=unescape(newText);obj.id='';}}
function confirm_submit(o,str)
{f=findObj(o);if(confirm(str))f.submit();}
function search_window(keyword,where)
{path=where+'?keyword='+keyword;SearchWindow=window.open("","Search","toolbar=no,location=no,status=no,scrollbars=yes,width=700,height=500,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");if(SearchWindow.frames.length==0)
{SearchWindow=window.open(path,"Search","toolbar=no,location=no,status=no,scrollbars=yes,width=800,height=600,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");}
else
{SearchWindow.location.href=path;SearchWindow.focus();}}
function help_window(path)
{SearchWindow=window.open("","Help","toolbar=no,location=no,status=no,scrollbars=yes,width=700,height=500,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");if(SearchWindow.frames.length==0)
{SearchWindow=window.open(path,"Help","toolbar=no,location=no,status=no,scrollbars=yes,width=800,height=600,screenX=100,screenY=100,pageXoffset=100,pageYoffset=100,resizable=yes");}
else
{SearchWindow.location.href=path;SearchWindow.focus();}}
function login_focus()
{if(document.login.username.value==''){document.login.username.focus();}else{document.login.password.focus();}}
function max_CopyClipboard(obj)
{obj=findObj(obj);if(obj){window.clipboardData.setData('Text',obj.value);}}
function initPage()
{initAccessKey();boxrow_init();};function boxrow_init()
{var obj=document.body.getElementsByTagName("DIV");for(var i=0;i<obj.length;i++){if(obj[i].className=='boxrow'){obj[i].onmouseover=boxrow_over;obj[i].onmouseout=boxrow_leave;obj[i].onclick=boxrow_click;j=0;while(j<obj[i].childNodes.length){if(obj[i].childNodes[j].tagName=='INPUT')
obj[i].childNodes[j].onclick=boxrow_nonbubble;j++;}}}}
function boxrow_over(e)
{if(!e&&window.event){e=window.event;}
if(e.srcElement){o=e.srcElement;}else{o=e.target;}
while(o.tagName!="DIV"){o=o.parentNode;}
o.style.backgroundColor='#F6F6F6';}
function boxrow_leave(e)
{if(!e&&window.event)
e=window.event;if(e.srcElement){o=e.srcElement;}else{o=e.target;}
while(o.tagName!="DIV"){o=o.parentNode;}
o.style.backgroundColor='#FFFFFF';}
function boxrow_click(e)
{if(!e&&window.event)
e=window.event;if(e.srcElement){o=e.srcElement;}else{o=e.target;}
if(o.tagName=='IMG'){return;}
while(o.tagName!="DIV"){o=o.parentNode;}
i=0;while(i<o.childNodes.length){if(o.childNodes[i].tagName=='INPUT'){o.childNodes[i].checked=!o.childNodes[i].checked;return true;}
i++;}}
function boxrow_nonbubble(e)
{if(!e&&window.event){e=window.event;}
if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}};(function($){$.extend({queueMessage:new function(){var active=null;var button=null;var queue=[];var defaults={id:null,text:'',location:'global',type:'normal',timeout:5000,animate:!(jQuery.browser.msie&&parseInt(jQuery.browser.version)<7)};function show(){active=queue.shift();active.element=jQuery("<div class='message'><div class='panel "+active.settings.type+"'><div class='icon'></div><p>"+active.settings.text+"</p><div class='topleft'></div><div class='topright'></div><div class='bottomleft'></div><div class='bottomright'></div></div></div>");if(active.settings.location!='form'&&active.settings.timeout<=0){button=jQuery("<div class='close'>x</div>");$(button).click(function(){if(active.settings.animate){active.element.slideUp(function(){active.element.remove();active=null;ping();});}else{active.element.remove();active=null;ping();}});$(active.element).children('div.panel').append(button);}
if(active.settings.location!='global'&&active.container.find('#messagePlaceholder').length>0){active.container=active.container.find('#messagePlaceholder');active.element.addClass(active.settings.location+'Message');}else{active.settings.location='global';active.element.addClass('globalMessage');}
if(active.settings.animate&&active.settings.location=='global'){active.element.hide();active.container.prepend(active.element);active.element.slideDown();}else{active.container.prepend(active.element);}
if(active.settings.timeout>0){window.setTimeout(function(){if(active.settings.animate){active.element.slideUp(function(){active.element.remove();active=null;ping();});}else{active.element.remove();active=null;ping();}},active.settings.timeout);}}
function ping(){if(!active&&queue.length){show();}}
this.construct=function(settings){return this.each(function(){var message={settings:$.extend(null,defaults,settings),element:null,container:$(this)};if(message.settings.id&&message.settings.id<=parseInt(window.name)){return;}
queue.push(message);if(message.settings.id){window.name=message.settings.id;}
ping();});};}});$.fn.extend({queueMessage:$.queueMessage.construct});})(jQuery);;(function($){var defaults={userNameCheckUrl:'usernamecheck.php',userNameParameterName:'username',checkTimeout:500,availableResultText:'available',indicatorSelector:'#user-check-indicator',availableClass:'available',unavailableClass:'unavailable',checkingClass:'checking',errorClass:'error',callback:function(textElement,userAvailable){}};jQuery.fn.userNameCheck=function(options){if(!jQuery.fn.typeWatch){return this;}
var o=$.extend({},defaults,options);var checkUserNameAvailability=function(userNameToCheck,element){var ajaxData={};ajaxData[o.userNameParameterName]=userNameToCheck;var $indicator=$(o.indicatorSelector);if($.trim(userNameToCheck).length==0){$indicator.hide();o.callback.apply(element,[false]);return;}
$indicator.addClass(o.checkingClass).removeClass(o.unavailableClass).removeClass(o.availableClass);$indicator.show();$.ajax({url:o.userNameCheckUrl,data:ajaxData,success:function(data){$indicator.removeClass(o.checkingClass).removeClass(o.errorClass);if(data==o.availableResultText){$indicator.addClass(o.availableClass).removeClass(o.unavailableClass);o.callback.apply(element,[element,true]);}else{$indicator.removeClass(o.availableClass).addClass(o.unavailableClass);o.callback.apply(element,[element,false]);}},error:function(){$indicator.removeClass(o.checkingClass).addClass(o.errorClass);}});};return this.filter(":text").each(function(){$this=$(this);$this.typeWatch({callback:checkUserNameAvailability,wait:o.checkTimeout,highlight:true,enterkey:true});checkUserNameAvailability($this.val(),$this.get(0));}).end();};})(jQuery);;(function($){$.fn.accountswitch=function(options){var defaults={action:'init',searchUrl:'account-switch-search.php',searchInputSelector:'#accountSearch',progressIndicatorSelector:'#accountLoading',searchPrompt:'account name',searchDelay:400};var settings=$.extend({},defaults,options);var $switcher=this;var $accountsArea=this.find(".result");var $search=this.find(settings.searchInputSelector);if(settings.action=='show'){if($search.size()!=0){if($search.val()!=$accountsArea.find("ul li:first").text()){$search.val("");}
$search.focus().get(0).select();}else{$accountsArea.find("a:first").focus();}
return;}
$search.example(settings.searchPrompt);$search.keydown(function(event){if(event.keyCode==13&&$search.val().length>0){var $link=$accountsArea.find("a:first");if($link.size()>0){document.location.href=$link.attr('href');}}
return true;});$search.typeWatch({wait:settings.searchDelay,captureLength:1,callback:updateAccounts,submitOnEnter:false});return this;function updateAccounts()
{$(settings.progressIndicatorSelector).show();$.ajax({url:settings.searchUrl,data:{q:$search.val()},type:"GET",complete:function(){$(settings.progressIndicatorSelector).hide();},error:function(request,status){$accountsArea.html("<div id='accountLoadingError'>Failed to load accounts: "+status+"</div>");},success:function(data){if(checkReload(data)){return;}
var $accounts=$(data).find("#accounts");if($accounts.size()>0){$accountsArea.html($accounts);}else{$accountsArea.html("<div id='accountLoadingError'>Account data not found in: "+data+"</div>");}
$switcher.find("li > a").parent().hover(function(){$this=$(this);if(!$this.is(".opt")){$this.addClass("hover");}},function(){$(this).removeClass("hover");});}});}
function checkReload(data){if(data.indexOf("<!-- install -->")>=0||data.indexOf("<!-- login -->")>=0){document.location.reload();return true;}
return false;}};})(jQuery);;function validatePublisher(form,suffix,fieldSuffix,errorSuffix,customAction)
{$("#url-empty"+suffix+errorSuffix).hide();$("#required-missing"+suffix+errorSuffix).hide();if($("#url"+fieldSuffix).get(0).value.length==0)
{$("#url"+fieldSuffix).addClass("inerror");$("#url-empty"+suffix+errorSuffix).show();}
else
{$("#url"+fieldSuffix).removeClass("inerror");}
if(customAction)
{customAction(form,suffix,fieldSuffix);}
var result=$("#url"+fieldSuffix).get(0).value.length>0;return result;}
function initInstallerSites()
{$("#add-new-site").click(installerAddNewSite);$(".remove-site").click(installerRemoveSite);$(".site-url").keyup(checkAddSiteEnabled);initHelp();checkAddSiteEnabled();}
function installerAddNewSite()
{document.lastTabIndex=document.lastTabIndex-2;var maxId=$("#max-id").get(0);maxId.value=parseInt(maxId.value)+1;var clone=$("#site-proto").clone(true);clone.get(0).id="site-cont"+maxId.value;$("#sites").append(clone).removeClass("one-site");$("#url-empty",clone).get(0).id+=maxId.value;$("#required-missing",clone).get(0).id+=maxId.value;$(":input",clone).each(function(){if($.trim(this.id).length>0)
{this.id=this.id+maxId.value;this.tabIndex=document.lastTabIndex++;}});$("label",clone).each(function(){if($.trim(this.htmlFor).length>0)
{this.htmlFor+=maxId.value;}});checkAddSiteEnabled();$("#add-new-site").get(0).tabIndex=document.lastTabIndex++;$("#btn_tagssetup").get(0).tabIndex=document.lastTabIndex++;}
function installerRemoveSite()
{$(this).parents(".site").remove();if($("#sites .site").size()<2){$("#sites").addClass("one-site");}
checkAddSiteEnabled();}
function checkAddSiteEnabled()
{var enabled=true;$("#sites .site-url").each(function(i){if($.trim(this.value).length==0&&this.id!='url')
{enabled=false;}});$("#add-new-site").get(0).disabled=!enabled;if(enabled)
{$("#add-new-site-info").fadeOut("fast");}
else
{$("#add-new-site-info").fadeIn("fast");}}
function installerValidateSites()
{var maxId=$("#max-id").get(0).value;var form=$("#frmOpenads").get(0);var valid=true;for(var i=1;i<=maxId;i++)
{if($("#url"+i).get(0))
{valid=valid&&validatePublisher(form,"",i+"",i+"",function(form,suffix,fieldSuffix){if($("#url"+fieldSuffix).get(0).value.length==0)
{$("#site-cont"+fieldSuffix).addClass("url-error");}
else
{$("#site-cont"+fieldSuffix).removeClass("url-error");}});}}
return valid;}
function initInstallerTags()
{$("#tag-type").change(tagTypeChanged);$("#ad-size").change(adSizeChanged);$("#site").change(siteChanged);$('pre').bind('mouseover',selectElement);}
function tagTypeChanged()
{if(this.value=="js")
{$("#header-script").show();}
else
{$("#header-script").hide();}
$("pre.invocation-codes:not(."+this.value+")").hide();$("pre.invocation-codes").filter("."+this.value).show();}
function adSizeChanged()
{if(this.value=="*")
{$(".zone-cont").show();}
else
{$(".zone-cont:not(."+this.value+")").hide();$("."+this.value).show();}}
function siteChanged()
{if(this.value=="*")
{$(".publisher-cont").show();}
else
{$(".publisher-cont").hide();$("#"+this.value).show();}}
function initHelp()
{$(".advsignup-help").add(".popup-help-link").click(showHelp);$(".popup-help").click(hideOaHelp);}
function showHelp()
{$(".popup-help").hide();var $help=$(this).prev();if($(this).attr("help")!=undefined){$help=$("#"+$(this).attr("help"));}
$help.fadeIn("fast").css("display","inline");}
function hideOaHelp()
{$(this).fadeOut("fast");}
function selectElement()
{if(window.getSelection)
{var r=document.createRange();r.selectNodeContents($(this)[0]);var s=window.getSelection();if(s.rangeCount)
{s.collapseToStart();s.removeAllRanges();}
s.addRange(r);}
else if(document.body.createTextRange)
{var r=document.body.createTextRange();r.moveToElementText($(this)[0]);r.select();}}
function initRejectedOARows()
{$(".oa td.sts:contains('Rejected')").each(function(){var cell=$(this);var statusRow=cell.parents("tr").next("tr").hide();cell.css("color","green").click(function(){statusRow.show();});});}
function copyValidationConstraints(fromObj,toObj)
{toObj.validateCheck=fromObj.validateCheck;toObj.validateReq=fromObj.validateReq;toObj.validateDescr=fromObj.validateDescr;}
function initAccoutSwitcher(searchUrl)
{$switcher=$("#oaNavigationExtra .accountSwitcher");$switcher.accountswitch({searchUrl:searchUrl});$breadcrumb=$("#thirdLevelHeader > .breadcrumb");$(".switchTrigger").hover(function(){$(".triggerContainer").addClass("hover");},function(){$(".triggerContainer").removeClass("hover");});$(".switchTrigger, .triggerContainer > a",$switcher).click(function(){$breadcrumb.toggleClass("reduced");$switcher.toggleClass("expanded");$switcher.accountswitch({action:'show'});$(".accountSwitcherOverlay").toggle();return false;});$(".accountsPanel li").hover(function(){$this=$(this);if(!$this.is(".opt,.more")){$this.addClass("hover");}},function(){$(this).removeClass("hover");});$(document).click(function(event){if($(event.target).parents(".expanded").length==0){$breadcrumb.removeClass("reduced");$switcher.removeClass("expanded");$(".accountSwitcherOverlay").hide();}});$(document).keydown(function(event){if($(".expanded").length>0&&event.keyCode==27){$breadcrumb.removeClass("reduced");$switcher.removeClass("expanded");$(".accountSwitcherOverlay").hide();}
return true;});}
function maskNonNumeric(event)
{if(event.charCode&&(event.charCode<48||event.charCode>57)){event.preventDefault();}}
function initCampaignStatus()
{var statusRows=$("[@id^='rsn_row']");statusRows.hide();if($("#sts_reject").attr("checked")==true){statusRows.show();}
$("input[name='status']").click(function(){if(this.value=="22"){statusRows.show();}
else{statusRows.hide();}});}
function initCampaignForm(formId)
{Calendar.setup({inputField:'start',ifFormat:'%d %B %Y',button:'start_button',align:'Bl',weekNumbers:false,firstDay:calendarBeginOfWeek,electric:false,onUpdate:function(){$("#start").change();}});Calendar.setup({inputField:'end',ifFormat:'%d %B %Y',button:'end_button',align:'Bl',weekNumbers:false,firstDay:calendarBeginOfWeek,electric:false,onUpdate:function(){$("#end").change();}});var $impressionsField=$("#impressions");var $impressionsUnlimitedField=$("#impr_unlimited");var $clicksField=$("#clicks");var $clicksUnlimitedField=$("#click_unlimited");var $conversionsField=$("#conversions");var $conversionsUnlimitedField=$("#conv_unlimited");var $pricingField=$("#pricing_revenue_type");var $revenueField=$("#revenue");var $startDateField=$("#start");var $endDateField=$("#end");var $priorityField=$("#high_priority_value");var $dateFields=$("input[id$='Set_immediate']");$("#priority-h, #priority-e, #priority-l").click(function(){var infoId='info-'+this.id;$("div[id^='info-priority']").not('#'+infoId).slideFadeOut('slow');$('#'+infoId).slideFadeIn('slow');updateCampaignTypeForm();});$('#weight').keypress(maskNonNumeric);$("#pricing_revenue_type").change(function(){updateCampaignPricingSection();updateCampaignDateAndLimitsAndType();});initCampaignBookedInput($impressionsField,$impressionsUnlimitedField,'openadsRemainingImpressions');initCampaignBookedInput($clicksField,$clicksUnlimitedField,'openadsRemainingClicks');if($conversionsField&&$conversionsUnlimitedField){initCampaignBookedInput($conversionsField,$conversionsUnlimitedField);}
initEcpmInput($pricingField);initEcpmInput($revenueField);initEcpmInput($startDateField);initEcpmInput($endDateField);initEcpmInput($priorityField);initEcpmInput($dateFields);updateEcpm(false);$("#priority-e, #endSet_immediate, #endSet_specific, #impr_unlimited, #click_unlimited, #conv_unlimited").click(function(){updateCampaignDateAndLimitsAndType();updateCampaignPrioritySection();});$("#high_priority_value").change(function(){updateCampaignTypeForm();});$("#startSet_immediate, #startSet_specific, #endSet_immediate, #endSet_specific").click(updateCampaignDateSection);$("#startSet_immediate").click(function(){campaignFormDateReset('start');});$("#endSet_immediate").click(function(){campaignFormDateReset('end');});$("#start").change(function(){campaignFormDateCheck('start');});$("#end").change(function(){campaignFormDateCheck('end');updateCampaignPrioritySection();});$("#"+formId).submit(function(){formUnFormat(this.impressions);formUnFormat(this.clicks);formUnFormat(this.conversions);return campaignFormPriorityCheck(this)&&campaignFormDatesRangeCheck(this);});formFormat($impressionsField.get(0),true);formFormat($clicksField.get(0),true);if($conversionsField){formFormat($conversionsField.get(0),true);}
updateCampaignTypeForm();updateTypeNotes(true);}
function updateCampaignDateAndLimitsAndType()
{var campaignType=getCampaignType();var $limitFields=$("#impressions, #clicks, #conversions");var $unlimitedCheckboxes=$("#impr_unlimited, #click_unlimited, #conv_unlimited");var dateSet=$("#endSet_specific").attr('checked');var limitClicked=false;$unlimitedCheckboxes.each(function(){if(this.checked==false){limitClicked=true;return false;}});if(campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_OVERRIDE)
{$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").hide();if(dateSet==true){$limitFields.val("").attr("disabled","true");$unlimitedCheckboxes.attr({checked:true,disabled:true});showHideLimitDisabledNotes();}
else{$unlimitedCheckboxes.attr("disabled",false);$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();if(limitClicked){$("#endSet_specific").attr("disabled",true);$("#date-section-limit-date-set").show();}
else{$("#endSet_specific").attr("disabled",false);$("#date-section-limit-date-set").hide();}}}
else{$unlimitedCheckboxes.attr("disabled",false);$("#endSet_specific").attr("disabled",false);$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();$("#date-section-limit-date-set").hide();if((campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM)&&dateSet&&limitClicked){$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").show();$("#priority-e, #priority-l").attr("disabled",true);}
else{$("#excl-limit-date-both-set, #low-limit-date-both-set, #ecpm-limit-date-both-set").hide();$("#priority-e, #priority-l").attr("disabled",false);}}
updateCampaignPricingSection();}
function showHideLimitDisabledNotes()
{var pricing=$("#pricing_revenue_type").val();if(MODEL_CPM==pricing){$("#click-disabled-note, #conv-disabled-note").hide();$("#impr-disabled-note").show();}
else if(MODEL_CPC==pricing){$("#impr-disabled-note, #conv-disabled-note").hide();$("#click-disabled-note").show();}
else if(MODEL_CPA==pricing){$("#impr-disabled-note, #click-disabled-note").hide();$("#conv-disabled-note").show();}
if(MODEL_MT==pricing){$("#impr-disabled-note, #click-disabled-note, #conv-disabled-note").hide();}}
function initEcpmInput($input)
{$input.change(function(){updateEcpm(true);});}
function initCampaignBookedInput($input,$unlimitedField,centralRemainingId)
{$input.focus(function(){formUnFormat(this);}).keypress(maskNonNumeric).keyup(function(){updateCampaignPricingSectionNotes(this);updateCampaignPrioritySection();}).blur(function(){formFormat(this,true);updateCampaignPricingSectionNotes(this);updateCampaignPrioritySection();});$unlimitedField.click(function(){campaignFormUnlimitedUpdate(this,$input.get(0),true,centralRemainingId);updateCampaignPricingSectionNotes($input.get(0),this);});}
function updateCampaignTypeForm()
{var $allSectionsButPriority=$("#sect_date, #sect_pricing, #sect_cap, #sect_misc");var campaignType=getCampaignType();var minImpressions=$("[id^='ecpm_min_row']");var remnantEcpmNote=$("#remnant_ecpm_note");var contractEcpmNote=$("#contract_ecpm_note");updateCampaignDateAndLimitsAndType();if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM||campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM){$allSectionsButPriority.show();updateCampaignDateSection();updateCampaignPricingSection();updateCampaignPrioritySection();}else{$allSectionsButPriority.hide();$("#sect_priority_low_excl, #sect_priority_high").hide();}
if(campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){$("#sect_priority_low_excl").hide();$("[id^='sect_priority_ecpm']").show();}else{$("[id^='sect_priority_ecpm']").hide();}
if(campaignType==CAMPAIGN_TYPE_ECPM){minImpressions.show();remnantEcpmNote.show();contractEcpmNote.hide();}else{minImpressions.hide();remnantEcpmNote.hide();contractEcpmNote.show();}}
function updateTypeNotes(fast)
{var infoId=null;$("#priority-h, #priority-e, #priority-l").each(function(){if(this.checked==true){infoId='info-'+this.id;return false;}});if(infoId){if(fast==true){$("div[id^='info-priority']").not('#'+infoId).hide();$('#'+infoId).show();}
else{$("div[id^='info-priority']").not('#'+infoId).slideFadeOut('slow');$('#'+infoId).slideFadeIn('slow');}}}
function updateCampaignDateSection()
{var $startDateSpan=$("#specificStartDateSpan");var $endDateSpan=$("#specificEndDateSpan");if($("#startSet_immediate").attr("checked")==true){$startDateSpan.hide();}
else{$startDateSpan.show();}
if($("#endSet_immediate").attr("checked")==true){$endDateSpan.hide();}
else{$endDateSpan.show();}}
function updateCampaignPricingSection()
{var pricing=$("#pricing_revenue_type").val();var revenueRows=$("[@id^='pricing_revenue_row']");var imprRows=$("[@id^='pricing_impr_booked']");var clickRows=$("[@id^='pricing_click_booked']");var convRows=$("[@id^='pricing_conv_booked']");imprRows.hide();clickRows.hide();convRows.hide();if(''==pricing){revenueRows.hide();}
else if(MODEL_CPM==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);revenueRows.show();imprRows.show();}
else if(MODEL_CPC==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);campaignFormUnlimitedUpdate(clicksUnlimitedField,clicksField);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);updateCampaignPricingSectionNotes(clicksField,clicksUnlimitedField);revenueRows.show();clickRows.show();imprRows.show();}
else if(MODEL_CPA==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);var conversionsField=$("#conversions").get(0);var conversionsUnlimitedField=$("#conv_unlimited").get(0);campaignFormUnlimitedUpdate(impressionsUnlimitedField,impressionsField,false);campaignFormUnlimitedUpdate(clicksUnlimitedField,clicksField,false);campaignFormUnlimitedUpdate(conversionsUnlimitedField,conversionsField,false);updateCampaignPricingSectionNotes(impressionsField,impressionsUnlimitedField);updateCampaignPricingSectionNotes(clicksField,clicksUnlimitedField);updateCampaignPricingSectionNotes(conversionsField,conversionsUnlimitedField);revenueRows.show();convRows.show();clickRows.show();imprRows.show();}
else if(MODEL_MT==pricing){revenueRows.show();}}
function updateCampaignPrioritySection()
{var $highPrioritySection=$("#sect_priority_high");var $lowExclPrioritySection=$("#sect_priority_low_excl");var campaignType=getCampaignType();if(campaignType==CAMPAIGN_TYPE_REMNANT||campaignType==CAMPAIGN_TYPE_ECPM){$highPrioritySection.hide();if(campaignType==CAMPAIGN_TYPE_REMNANT){$lowExclPrioritySection.show();}}
else if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){if(campaignType==CAMPAIGN_TYPE_OVERRIDE){$highPrioritySection.hide();$lowExclPrioritySection.show();}
else{$lowExclPrioritySection.hide();if($("#endSet_specific").attr("checked")==true&&campaignHasAnyLimitSet()){$("#high_distribution_span").hide();}
else{$("#high_distribution_span").show();}
$highPrioritySection.show();}}}
function campaignHasAnyLimitSet()
{var pricing=$("#pricing_revenue_type").val();if(''==pricing){return false;}
else if(MODEL_CPM==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField);}
else if(MODEL_CPC==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField)||campaignLimitIsSet(clicksField,clicksUnlimitedField);}
else if(MODEL_CPA==pricing){var impressionsField=$("#impressions").get(0);var impressionsUnlimitedField=$("#impr_unlimited").get(0);var clicksField=$("#clicks").get(0);var clicksUnlimitedField=$("#click_unlimited").get(0);var conversionsField=$("#conversions").get(0);var conversionsUnlimitedField=$("#conv_unlimited").get(0);return campaignLimitIsSet(impressionsField,impressionsUnlimitedField)||campaignLimitIsSet(clicksField,clicksUnlimitedField)||campaignLimitIsSet(conversionsField,conversionsUnlimitedField);}
else if(MODEL_MT==pricing){return false;}}
function campaignLimitIsSet(input,unlimitedInput)
{return unlimitedInput.checked==false&&input.value!=''&&input.value!='-'}
function campaignFormPriorityCheck(form)
{var campaignType=getCampaignType();if(campaignType==CAMPAIGN_TYPE_CONTRACT_NORMAL||campaignType==CAMPAIGN_TYPE_OVERRIDE||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM)
{if(campaignType==CAMPAIGN_TYPE_OVERRIDE&&!parseInt($("#weight").val())){return confirm(strCampaignWarningOverrideNoWeight);}
else if(campaignType!=CAMPAIGN_TYPE_OVERRIDE&&($("#endSet_immediate").attr("checked")==true||!campaignHasAnyLimitSet())&&!parseInt($("#target_value").val())){return confirm(strCampaignWarningNoTargetMessage);}}
if(campaignType==CAMPAIGN_TYPE_REMNANT){if(!parseInt($("#weight").val())){return confirm(strCampaignWarningRemnantNoWeight);}}
if(campaignType==CAMPAIGN_TYPE_ECPM||campaignType==CAMPAIGN_TYPE_CONTRACT_ECPM){if(!parseFloat($("#revenue").val())||parseFloat($("#revenue").val())<=0){return confirm(strCampaignWarningEcpmNoRevenue);}}
return true;}
function getCampaignType()
{if($("#priority-h, #priority-e, #priority-l").length>0){if($("#priority-h").attr("checked")==true){if(($("[@name=contract_ecpm_enabled]").val()==1)&&$("#high_priority_value").val()>=PRIORITY_ECPM_FROM&&$("#high_priority_value").val()<=PRIORITY_ECPM_TO){return CAMPAIGN_TYPE_CONTRACT_ECPM;}else{return CAMPAIGN_TYPE_CONTRACT_NORMAL;}}
else if($("#priority-e").attr("checked")==true){return CAMPAIGN_TYPE_OVERRIDE;}
else if($("#priority-l").attr("checked")==true){if($("[@name=remnant_ecpm_enabled]").val()==1){return CAMPAIGN_TYPE_ECPM;}else{return CAMPAIGN_TYPE_REMNANT;}}
return null;}
else{return $("#campaign_type").val();}}
function campaignFormDatesRangeCheck(form)
{var activeDate;var expireDate;var activation_enabled=isDateSetActive('start',form);var expiry_enabled=isDateSetActive('end',form);if(activation_enabled){activateDate=newDateFromNamedFields(document,form,'start');if(!activateDate){alert('The start date of this campaign is not a valid date');return false;}}
if(expiry_enabled){expireDate=newDateFromNamedFields(document,form,'end');if(!expireDate){alert('The end date of this campaign is not a valid date');return false;}}
if(activation_enabled&&expiry_enabled){if(!isDateEqual(activateDate,expireDate)&&isDateBefore(expireDate,activateDate)){alert('The selected dates for this campaign are invalid\n(Campaign ends before it starts!).\n');return false;}}
return true;}
function campaignFormDateCheck(elemName)
{var date=$("#"+elemName).val();if(date==''){$("[@name='"+elemName+"Set']").get(0).checked=true;}
else{$("[@name='"+elemName+"Set']").get(1).checked=true;}
updateCampaignDateSection();}
function campaignFormDateReset(elemToReset)
{$("#"+elemToReset).val('');}
function formFormat(field,allowzero)
{if(typeof(allowzero)=='undefined'){allowzero=false;}
if((field.value=='')||(field.value==0&&allowzero==false)){field.value='-';}
if(field.value!='-'){field.value=max_formatNumberIgnoreDecimals(field.value);}}
function formUnFormat(field)
{if(field.value!='-'&&field.value!=''){field.value=max_formattedNumberStringToFloat(field.value);}
else{field.value='';}}
(function($){$.fn.expandableContainer=function(){return this.each(function(){var o={hookClass:"more-less",moreContainerClass:"moreContainer"};var $container=$(this);var $moreContainer=$('.'+o.moreContainerClass,$container);var $hook=$('.'+o.hookClass,$container);$moreContainer.hide();$hook.show();$container.find("li a.hasForm").click(showForm);$hook.toggle(expand,collapse);function showForm()
{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$(this).siblings('.form').show();}
else{$(this).siblings('.form').show('normal');}
$(this).parent('li').addClass('expanded');}
function expand()
{if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$moreContainer.stop().show();}
else{$moreContainer.stop().slideFadeIn('normal');}
$hook.addClass('expanded');}
function collapse()
{$container.find("li .form").hide('normal');if(jQuery.browser.msie&&parseInt(jQuery.browser.version)==6){$moreContainer.stop().hide();}
else{$moreContainer.stop().slideFadeOut('normal');}
$hook.removeClass('expanded');}});};})(jQuery);(function($){$.fn.selectText=function(){return this.each(function(){$(this).bind('mousedown',selectText).bind('click',selectText).bind('mousemove',selectText);function selectText()
{$(this).select();}});};})(jQuery);(function($){$.fn.selectFile=function(){return this.each(function(){$form=$(this);});};})(jQuery);;(function($){$.fn.initForm=function(options){var defaults={rules:{},messages:{}};var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this);if(!$this.is("form")){return true;}
if(isEmpty(settings.rules)){return;}
$this.validate({event:"keyup",focusInvalid:true,errorPlacement:function($error,$element){if($element.is("input[type=checkbox]")||$element.is("input[type=radio]")){$nextSibling=$element.next();if($nextSibling.is("label")){$error.insertAfter($nextSibling);$("<br>").insertAfter($nextSibling);}
else{$error.insertAfter($element);}}
else{$nextSibling=$element.next();if($nextSibling.is("label[for="+$element.attr('id')+"]")){$error.insertAfter($nextSibling);}
else{$error.insertAfter($element);}}},errorContainer:'#errors_'+$this.attr('id'),rules:settings.rules,messages:settings.messages});});function isEmpty(ob){for(var i in ob){if(ob.hasOwnProperty(i)){return false;}}
return true;}};})(jQuery);;(function($){$.fn.help=function(s){return this.each(function(){new $.fn.helpObject(this,s);});};$.fn.helpObject=function(help,settings){var defaults={'parentXOffset':0,'parentYOffset':0}
var options=$.extend({},defaults,settings);$(help).hide();var $wrapper=wrap($(help));$("[help='"+help.id+"']").addClass("popup-help-link").bind('click',{'elementId':$wrapper.get(0).id},show);$wrapper.click(hide);function show(event,pageX,pageY)
{var $wrapper=$("#"+event.data['elementId']);$(".popup-help").fadeOut("fast");var clickPosition=getClickPositionInDocument(event,pageX,pageY);var posX=clickPosition.X-options.parentXOffset;var posY=clickPosition.Y+5-options.parentYOffset;$wrapper.fadeIn("fast").css("display","block");var wrapperWidth=$wrapper.outerWidth({margin:true});var wrapperHeight=$wrapper.outerHeight({margin:true});var scrollY=event.pageY-event.clientY;var xDiff=$(window).width()-(posX+wrapperWidth+10);var yDiff=$(window).height()-(posY-scrollY+wrapperHeight);if(xDiff<=0){posX-=Math.abs(xDiff);posX=Math.max(10,posX);}
if(yDiff<=0){posY-=(wrapperHeight+10);posY=Math.max(10+scrollY,posY);}
$wrapper.css({top:posY,left:posX});}
function hide()
{$(this).fadeOut("fast");}
function wrap($help)
{var $wrapper=$help.wrap("<div class='popup-help'></div>").parent();$wrapper.attr("id",$help.get(0).id+"wrapper");$wrapper.prepend("<div class='close'> <span class='link'>[x]</span> </div>");$wrapper.hide();$help.addClass("help-content").show();return $wrapper;}
function getClickPositionInDocument(e,pageX,pageY)
{if(e.pageX){clickX=e.pageX;}
else if(pageX){clickX=pageX;}
else if(e.clientX){if(document.documentElement.scrollLeft){scrollX=document.documentElement.scrollLeft;}
else{scrollX=document.body.scrollLeft;}
clickX=e.clientX+scrollX;}
if(e.pageY){clickY=e.pageY;}
else if(pageY){clickY=pageY;}
else if(e.clientY){if(document.documentElement.scrollTop){scrollY=document.documentElement.scrollTop;}
else{scrollY=document.body.scrollTop;}
clickY=e.clientY+scrollY;}
if(clickX<0){clickX=0;}
if(clickY<0){clickY=0;}
return{'X':clickX,'Y':clickY};}};})(jQuery);(function($){$(document).ready(function(){$("[id^='help-']").help({'parentXOffset':200,'parentYOffset':200});});})(jQuery);;jQuery.fn.submitOnChange=function(){return this.each(function()
{$(this).bind("change",function()
{if(this.form){this.form.submit();}});});};$(document).ready(function(){$("select.submit-on-change").submitOnChange();});jQuery.fn.confirmed=function(dialogSelector,mainButtonLabel,mainButtonClass){return this.each(function(){$(this).click(function(){var $link=$(this);var buttons={};buttons[mainButtonLabel]=function(){location.href=$link.attr("href");$(this).dialog("close");};buttons['Cancel']=function(){$(this).dialog("close");};$(dialogSelector).find("#title-placeholder").html($link.attr("title")+" ");$(dialogSelector).dialog({modal:true,overlay:{opacity:0.5,background:"black"},buttons:buttons,close:function(){$(this).dialog("destroy");},width:600,height:140});$(".ui-dialog-titlebar-close > span").html("&nbsp;");if(mainButtonClass){$(".ui-dialog-buttonpane > button:eq(0)").addClass(mainButtonClass);}
$(dialogSelector).show();return false;});});};jQuery.fn.showWithOverlay=function(zIndex){var $this=this;var $overlay=$("#bg-ovlay");if($overlay.size()==0){$overlay=$("<div id='bg-ovlay' style='position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: "+zIndex+" '></div>");$overlay.prependTo("body").click(function(){$this.hide();$overlay.remove();});}
return this.show();};jQuery.removeOverlay=function(){$("#bg-ovlay").remove();}
jQuery.fn.slideFadeOut=function(speed,callback)
{return this.animate({height:'hide',opacity:'hide',marginTop:'hide',marginBottom:'hide'},speed,callback);};jQuery.fn.slideFadeIn=function(speed,callback)
{return this.animate({height:'show',opacity:'show',marginTop:'show',marginBottom:'show'},speed,callback);};jQuery.fn.sweepFadeIn=function(speed,callback)
{return this.animate({width:'show',opacity:'show',marginLeft:'show',marginLeft:'show'},speed,callback);};(function($){$.fn.selectText=function(){return this.each(function(){$(this).bind('mousedown',selectText).bind('click',selectText).bind('mousemove',selectText);function selectText()
{$(this).select();}});};})(jQuery);(function($){$.fn.selectElement=function(){return this.each(function(){$(this).bind('mousedown',selectElementText).bind('click',selectElementText).bind('mousemove',selectElementText);function selectElementText(){if(window.getSelection){var r=document.createRange();r.selectNodeContents($(this)[0]);var s=window.getSelection();if(s.rangeCount){s.collapseToStart();s.removeAllRanges();}
s.addRange(r);}
else if(document.body.createTextRange){var r=document.body.createTextRange();r.moveToElementText($(this)[0]);r.select();}}});};})(jQuery);$.fn.hideElement=function(animate,callback)
{if(!jQuery.browser.msie&&animate){this.stop().slideUp(300,callback);}
else{this.hide();}
return this;}
$.fn.showElement=function(animate,callback)
{if(!jQuery.browser.msie&&animate){this.stop().slideDown(300,callback);}
else{this.show();}
return this;}
$.fn.setElementVisible=function(visible,animate,callback)
{if(visible){return this.showElement(animate,callback);}else{return this.hideElement(animate,callback);}}
$.fn.setElementVisibility=function(visible)
{return this.css("visibility",(visible?"visible":"hidden"));}
$.fn.indicator=function(action,text,message){return this.each(function(){var $this=$(this);var currentText='';var currentMessage='';if(action=='saved'){currentText='Changes saved';$this.removeClass('iconLoading iconWarning').addClass('iconConfirm').show();window.setTimeout(function(){$this.fadeOut(200);},4000);}else if(action=='error'){currentText='Error';currentMessage='An error has occurred, please try again';$this.addClass('iconWarning').removeClass('iconConfirm iconLoading').show();}else{currentText='Loading...';$this.addClass('iconLoading').removeClass('iconConfirm iconWarning').show();}
if(typeof text!='undefined'){$this.html(text);}else{$this.html(currentText);}
if(typeof message!='undefined'){$this.attr('title',message);}else{$this.attr('title',currentMessage);}});}
$.fn.disableLink=function(message){return this.each(function(){var $this=$(this);$this.attr("hrefbak",$this.attr("href"));$this.attr("disabled",true);$this.removeAttr("href");$this.addClass("disabled");if(typeof message!='undefined'){$this.attr("titlebak",$this.attr("title"));$this.attr("title",message);}});};$.fn.enableLink=function(){return this.each(function(){var $this=$(this);$this.attr("href",$this.attr("hrefbak"))
$this.removeAttr("hrefbak").removeAttr("disabled");$this.removeClass("disabled");$this.attr("title",$this.attr("titlebak"));});};$.fn.disabledClick=function(callback){return this.each(function(){var $this=$(this);$this.click(function(){if(!$this.attr("disabled")){return callback.call($this.get(0));}else{return false;}});});};$.fn.synchronizedCheckboxes=function(){var $checkboxes=this;this.change(function(){var $this=$(this);$checkboxes.not($this).attr('checked',$this.is(":checked"));});return this;};jQuery.fn.visible=function(visible)
{return this.each(function(){if(visible){$(this).show();}
else{$(this).hide();}});};jQuery.fn.selectedText=function(visible)
{if(this.size()==0){return;}
var select=this[0];return select.options[select.selectedIndex].text;};$(document).ready(function(){$("form.validate").each(function(){$(this).validate();});});jQuery.fn.confirmedLink=function(triggerLinkClass,closeIdPrefix)
{$("#"+closeIdPrefix+"confirmation-dialog").jqm({modal:true,overlay:40,trigger:"."+triggerLinkClass,onShow:function(hash){$("#"+closeIdPrefix+"cd-submit").one("click",function(){location.href=hash.t.href;});hash.w.fadeIn("fast");}}).jqmAddClose("#"+closeIdPrefix+"cd-cancel");};jQuery.terms=function(triggerLinksSelector,closeIdPrefix){if($.browser.msie&&(parseInt($.browser.version)==6)){return this;}
$("#"+closeIdPrefix+"terms-dialog").jqm({modal:true,overlay:40,trigger:triggerLinksSelector,onShow:function(hash){var windowHeight=$(window).height();var topOffset=0.15;var extraHeader=70;var $termsContents=$("#"+closeIdPrefix+"terms-contents");$termsContents.height(windowHeight*(1-2*topOffset)-extraHeader);$termsContents.html("<a href='"+hash.t.href+"' target='_blank'>"+hash.t.title+"</a>");$termsContents.load(hash.t.href,null,function(){this.scrollTop=0;});$("#"+closeIdPrefix+"terms-title").html("&nbsp;&nbsp;"+hash.t.title);$("#"+hash.t.id+"c").attr("checked",false);$("#"+closeIdPrefix+"terms-submit").one("click",function(){$("#"+hash.t.id+"c").attr("checked",true);$("#"+closeIdPrefix+"terms-dialog").jqmHide();});hash.w.fadeIn("fast");}}).jqmAddClose("#"+closeIdPrefix+"terms-cancel");};jQuery.fn.toggleContent=function(checkedContentSelector,uncheckedContentSelector){return this.eq(0).click(function(){if(this.checked){$(checkedContentSelector).show();$(uncheckedContentSelector).hide();}else{$(checkedContentSelector).hide();$(uncheckedContentSelector).show();}}).end();};$(document).ready(function(){function resizeContentBox(){$("#thirdLevelContent").each(function(){var offset=document.documentElement.clientHeight;offset-=$(this).offset().top;offset-=parseInt($(this).css('paddingTop'));offset-=parseInt($(this).css('paddingBottom'));$(this).css(jQuery.browser.msie&&jQuery.browser.version<7?'height':'minHeight',offset+'px');if($.browser.msie){$(this).css('zoom',1);}});}
resizeContentBox();window.setInterval(resizeContentBox,300);});;(function($){$.fn.multicheckboxcondition=function(settings){return this.each(function(){var defaults={childSelector:"[@id^='"+this.id+"_']",childAffectParent:true,condition:function(checkbox,parentChecked){return true;}};var options=$.extend({},defaults,settings);var $parent=$(this);$(options.childSelector).click(function(event){if(options.childAffectParent){var allChecked=true;$(options.childSelector).each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);}
event.stopPropagation();}).bind('stateUpdate',function(event,parentId){if(parentId!=$parent.attr('id')){var allChecked=true;if(options.childAffectParent){$(options.childSelector).each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);}}});$parent.click(function(event){var parent=this;$(options.childSelector).each(function(){if(options.condition(this,parent.checked)==true){$(this).attr("checked",parent.checked);$(this).trigger('stateUpdate',[parent.id]);}});event.stopPropagation();});});};$.fn.multicheckbox=function(){return this.each(function(){var $parent=$(this);$("[@id^='"+this.id+"_']").click(function(event){var allChecked=true;$("[@id^='"+$parent.attr("id")+"_']").each(function(){if(!this.checked){allChecked=false;return false;}});$parent.attr("checked",allChecked);event.stopPropagation();});$parent.click(function(event){$("[@id^='"+this.id+"_']").attr("checked",this.checked);event.stopPropagation();});});};$.fn.multicheckboxes=function(settings){return this.each(function(){var defaults={id:Math.random(),clickElement:null,updateElement:null,containerClicked:fold,checkboxClicked:null,updateChildren:synchronizeChildrenWithParent,updateParent:synchronizeParentWithChildren,toSelectClass:"to-select",toUselectClass:"to-unselect",selectAllSelector:"#select-all",isMultiCheckbox:function($checkbox){return $checkbox.attr("id");},getChildCheckboxes:function($parentCheckbox){return $("[@id^='"+$parentCheckbox.attr("id")+"_']");},getParentCheckbox:function($childCheckbox){var checkboxId=$childCheckbox.attr("id");return $("#"+checkboxId.substring(0,checkboxId.indexOf("_")));}};var options=$.extend({},defaults,settings);var cache=new Object();var $container=$(this);$container.bind('stateUpdate',function(event,internalId,$checkboxes){if(internalId==options.id){}
else{var parentCache=new Array();$checkboxes.each(function(){var $checkbox=$(this);if($checkbox.size()!=0&&cacheableIsMultiCheckbox($checkbox)){var $parent=cacheableGetParentCheckbox($checkbox);if($parent&&$parent.size()>0){var cacheId=getCacheId($parent);if(!parentCache[cacheId]){handleCheckboxStateChange($checkbox,$checkbox,false);parentCache[cacheId]=true;}}
else{handleCheckboxStateChange($checkbox,$checkbox,false);}}});$container.trigger("multichange");}});$container.bind('dataUpdate',clearCache);$container.click(function(event){var $target=$(event.target);if(options.containerClicked){options.containerClicked.call($target);}
var ie6=$.browser.msie&&(parseInt($.browser.version)==6);var $checkbox;if($target.is(":checkbox")){$checkbox=$target;}
else if(options.clickElement&&($target.is(options.clickElement)||(ie6&&$target.is("label")))){$checkbox=$target.parent().find(":checkbox");if(!$checkbox.get(0)){return;}
$checkbox.get(0).checked=!$checkbox.get(0).checked;}
else{return;}
if($checkbox.is(options.selectAllSelector)){handleSelectAllChange($checkbox);}
else{handleCheckboxStateChange($checkbox,$target,true);}});function handleCheckboxStateChange($checkbox,$target,triggerMultichange)
{if($checkbox.size()!=0&&cacheableIsMultiCheckbox($checkbox)){if(options.checkboxClicked){options.checkboxClicked.call($checkbox);}
var $parent=cacheableGetParentCheckbox($checkbox);if($parent&&$parent.size()!=0){options.updateParent.call($target,$parent,cacheableGetChildCheckboxes($parent));updateTableRow($checkbox,options);updateTableRow($parent,options);}
else{var $children=cacheableGetChildCheckboxes($checkbox);if($children&&$children.size()!=0){options.updateChildren.call($target,$children,$checkbox.get(0).checked);updateTableRow($children,options);updateTableRow($checkbox,options);$container.trigger('stateUpdate',[options.id,$children]);}}
if(options.selectAllSelector&&!$checkbox.is(":checked")){$(options.selectAllSelector).attr("checked",false);}
if(triggerMultichange){$container.trigger("multichange");}}
else{}}
function handleSelectAllChange($checkbox)
{var $checkboxes=$container.find(":checkbox").not(options.selectAllSelector);var allChecked=$checkbox.is(":checked");$checkboxes.attr("checked",allChecked);if(options.updateElement){var $elements=$container.find(options.updateElement);if(allChecked){$elements.addClass(options.toSelectClass);}else{$elements.removeClass(options.toSelectClass);}}
$container.trigger("multichange");}
function clearCache()
{cache=new Object();}
function cacheableIsMultiCheckbox($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('IsMultiCheckbox'+uniqueId,$container,options.isMultiCheckbox,[$checkbox]);return result;}
function cacheableGetChildCheckboxes($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('GetChildCheckboxes'+uniqueId,$container,options.getChildCheckboxes,[$checkbox]);return result;}
function cacheableGetParentCheckbox($checkbox)
{var uniqueId=getCacheId($checkbox);var result=callWithCache('GetParentCheckbox'+uniqueId,$container,options.getParentCheckbox,[$checkbox]);return result;}
function callWithCache(key,object,callback,args)
{if(cache[key]){return cache[key];}
var result=callback.apply(object,args);cache[key]=result;return result;}
function getCacheId($element)
{var cacheId=$.data($element.get(0),'mc_cache_id');if(!cacheId){cacheId='cid'+$.data($element);$.data($element.get(0),'mc_cache_id',cacheId);}
return cacheId;}
function updateTableRow($checkboxes,options){if(options.updateElement){$checkboxes.each(function(){var $checkbox=$(this);var $row=cacheableGetElementParent($checkbox,options.updateElement);if($row.size()==0){return true;}
var newState=$checkbox.get(0).checked;if(newState){$row.addClass(options.toSelectClass);}
else{$row.removeClass(options.toSelectClass);}});}}
function cacheableGetElementParent($element,parentType)
{var uniqueId=getCacheId($element);var result=callWithCache('GetElementParent'+parentType+uniqueId,$container,function($element,parentType){return $element.parents(parentType).eq(0);},[$element,parentType]);return result;}});};function fold()
{if(this.is("td.handle")||this.is("span")){this.parents("tr:eq(0)").find("table").toggle();}}
function synchronizeChildrenWithParent($children,parentChecked)
{$children.attr("checked",parentChecked);}
function clearChildrenIfParentChecked($children,parentChecked)
{if(parentChecked){$children.attr("checked",false);}}
function synchronizeParentWithChildren($parentCheckbox,$children)
{var allChecked=true;$children.each(function(){if(!this.checked){allChecked=false;return false;}});$parentCheckbox.attr("checked",allChecked);}
function clearParentIfAnyChildChecked($parentCheckbox,$children)
{var anyChecked=true;$children.each(function(){if(!this.checked){anyChecked=true;return false;}});if(anyChecked){$parentCheckbox.attr("checked",false);}}
$.multicheckbox={synchronizeChildrenWithParent:synchronizeChildrenWithParent,synchronizeParentWithChildren:synchronizeParentWithChildren,clearChildrenIfParentChecked:clearChildrenIfParentChecked,clearParentIfAnyChildChecked:clearParentIfAnyChildChecked}})(jQuery);;(function($){$.extend({activateDropDown:new function(){var active=null;function onToggle(event){event.stopPropagation();$(this).parent('.dropDown').each(function(){if($(this).hasClass('active')){$(this).removeClass('active');$(this).trigger('dropdownClose');active=null;}else{$(this).addClass('active');$(this).trigger('dropdownOpen',[event.target]);active=this;}});}
function onClose(){$(active).removeClass('active');$(active).trigger('dropdownClose');active=null;}
function onKey(event){if(event.keyCode==27){onClose();}}
function preventClose(event){event.stopPropagation();}
this.construct=function(settings){return this.each(function(){$(this).children('span').bind('click',onToggle);$(this).children('div.mask').bind('click',onToggle);$(this).children('div.panel').children().bind('click',preventClose);$('body').bind('click',onClose);$('body').bind('keydown',onKey);$(this).bind("close",onClose);});};}});$.fn.extend({activateDropDown:$.activateDropDown.construct});$(document).ready(function(){$('.dropDown').activateDropDown();});})(jQuery);;(function($){function listColumn(parent,options,data){this.keydown=function(event){var elem=event.data.list.find('.selected');switch(event.keyCode){case 37:event.preventDefault();if(event.data.onprev){event.data.onprev(false);}
break;case 38:event.preventDefault();var prev=elem.prev();if(prev.length){prev.addClass('selected');elem.removeClass('selected');event.data.change(prev);}
break;case 39:event.preventDefault();if(event.data.onnext){event.data.onnext(false);}
break;case 40:event.preventDefault();var next=elem.next();if(next.length){next.addClass('selected');elem.removeClass('selected');event.data.change(next);}
break;case 32:case 13:event.preventDefault();event.data.select(elem);break;case 9:event.preventDefault();if(event.shiftKey){if(event.data.onnext){event.data.onnext(true);}}else{if(event.data.onprev){event.data.onprev(true);}}
break;}}
this.click=function(event){event.stopPropagation();event.preventDefault();event.data.activate();var target=jQuery(event.target).parents('li');event.data.list.find('li.selected').removeClass('selected');target.addClass('selected');event.data.change(target);event.data.select(target);}
this.select=function(elem){var id=elem[0].id.replace(this.options.name+'_','');if(this.onselect){this.onselect(id);}}
this.change=function(elem){this.focus();var id=elem[0].id.replace(this.options.name+'_','');if(this.onchange){this.onchange(id);}}
this.focus=function(){if(this.list.find('.selected').length){}else{this.list.find('li:first').addClass('selected');}
this.list.find('.selected a').focus();}
this.activate=function(){this.focus();if(this.onactivate){this.onactivate();}
this.list.addClass('active');}
this.deactivate=function(){this.list.removeClass('active');}
this.load=function(data){this.empty();this.list.removeClass('loading');var order=[];for(k in data){order[data[k].idx]=k;}
for(n=0;n<order.length;n++){var k=order[n];var d=this.options.name;var d=this.options.className;var d=data[k].name;var item=jQuery("<li id='"+this.options.name+"_"+k+"'><a href='#' class='inlineIcon "+this.options.className+"' title='"+data[k].name+"'>"+data[k].name+"</a></li>");if(this.options.id==k){item.addClass('selected');}
item.bind('click',this,this.click);item.bind('keydown',this,this.keydown);this.list.append(item);}}
this.empty=function(){this.list.html('');this.list.addClass('loading');}
this.options=options;parent.append(jQuery("<strong>"+this.options.label+"</strong>"));this.list=jQuery("<ul></ul>");parent.append(this.list);this.load(data);};$.extend({activateNavigator:new function(){var container=null;var entities=null;var data=null;var loading=null;function buildColumn(i,entity,data){var column=jQuery("<div class='column'></div>");container.append(column);if(i==0){column.addClass('first');}
entities[i].column=new listColumn(column,entities[i],data);entities[i].column.onnext=function(cycle){if(i<entities.length-1){entities[i+1].column.activate();}else{if(cycle){entities[0].column.activate();}}};entities[i].column.onprev=function(cycle){if(i>0){entities[i-1].column.activate();}else{if(cycle){entities[entities.length-1].column.activate();}}};entities[i].column.onactivate=function(){for(var j=0;j<entities.length;j++){entities[j].column.deactivate();}};entities[i].column.onselect=function(id){if(i==entities.length-1){selectItem(id);}};entities[i].column.onchange=function(id){if(i<entities.length-1){for(var j=i+1;j<entities.length;j++){entities[j].column.empty();}
var columnData=data;for(var j=0;j<i;j++){if(j+1<entities.length){columnData=columnData[entities[j].id]['items'];}}
if(columnData[id]){entities[i].id=id;if(columnData[id]['items']){entities[i+1].column.load(columnData[id]['items']);}else{var parameters='';for(var j=0;j<i;j++){parameters+=entities[j].name+'='+entities[j].id+'&';}
parameters+=entities[i].name+'='+id;loading=entities[i].name+'='+id;$.getJSON("inventory-retrieve.php?"+parameters,function(d){columnData[id]['items']=d;if(loading==entities[i].name+'='+entities[i].id){entities[i+1].column.load(columnData[id]['items']);}});}}}};}
function selectItem(id){var parameters='';for(var i=0;i<entities.length-1;i++){parameters+=entities[i].name+'='+entities[i].id+'&';}
parameters+=entities[entities.length-1].name+'='+id;window.location='?'+parameters;}
function focus(event,target){if(target.tagName=='LI'&&$(target).hasClass('ent')){var className=target.className.match(/icon[a-z]+/i)
for(var i=0;i<entities.length;i++){if(entities[i].className==className){entities[i].column.activate();}}}}
this.construct=function(e,d){return this.each(function(){$(this).bind('dropdownOpen',focus);container=$(this).find('.panel div');entities=e;data=d;var columnData=data;for(var i=0;i<entities.length;i++){buildColumn(i,entities[i],columnData);if(i+1<entities.length){columnData=columnData[entities[i].id]['items'];}}});};}});$.fn.extend({activateNavigator:$.activateNavigator.construct});})(jQuery);;(function($){$.extend({activateTable:new function(){this.construct=function(settings){return this.each(function(){var $this=$(this);var $parentCheckbox;var $childCheckboxes;var $checkboxSelectionDependants;findCheckboxes();$this.multicheckboxes({selectedClass:"selected",unselectedClass:"",toSelectClass:"selected",toUselectClass:"",selectAllSelector:".toggleAll:has(input)",updateElement:"tr",useState:false,isMultiCheckbox:function($checkbox){return $checkbox.parent(".toggleAll").size()==1||$checkbox.parent(".toggleSelection").size()==1;},getChildCheckboxes:function($checkbox){return $checkbox.parent(".toggleAll").size()==1?$childCheckboxes:$([]);},getParentCheckbox:function($checkbox){return $checkbox.parent(".toggleSelection").size()==1?$parentCheckbox:$([]);}});$this.bind("multichange",function(){if($childCheckboxes.filter(":checked").size()>0){$checkboxSelectionDependants.removeClass('inactive');}
else{$checkboxSelectionDependants.addClass('inactive');}});$childCheckboxes.filter(":checked").each(function(){$(this).parents('tr').addClass('selected');});$this.delegate('mouseover mouseout','tbody tr',function(event){$(this).toggleClass('hilite');});$this.bind("dataUpdate",function(){findCheckboxes();});function findCheckboxes(){$parentCheckbox=$this.find('.toggleAll input');$childCheckboxes=$this.find('.toggleSelection input');$checkboxSelectionDependants=$this.find('.activeIfSelected');}});};}});$.fn.extend({activateTable:$.activateTable.construct});$(document).ready(function(){$('.tableWrapper').activateTable();});})(jQuery);;(function($){$.tablesorter.addParser({id:'currencyDiff',is:function(s){return/^[+-][$?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^-+0-9.]/g),""));},type:'numeric'});})(jQuery);;function max_formSetRequirements(obj,descr,req,check)
{if(typeof(check)=='undefined'){check='present';}
if(check.substr(0,7)=='number+'){if(check.length==7){return;}}
if(check.substr(0,6)=='float+'){if(check.length==6){return;}}
if(check.substr(0,8)=='compare:'){if(check.length==8){return;}}
obj=findObj(obj);if(obj){obj.validateReq=req;obj.validateCheck=check;obj.validateDescr=descr;}}
function max_formSetUnique(obj,unique)
{obj=findObj(obj);if(obj){obj.validateUnique=unique;}}
function max_formSetLength(obj,length)
{obj=findObj(obj);if(obj){if(length&&length.min&&length.min>0){obj.minLength=length.min;}
if(length&&length.max){obj.maxLength=length.max;}}}
function max_formSetConditionalValidate(obj,condition)
{obj=findObj(obj);if(obj){obj.valCondition=condition;}}
function max_formValidateElement(obj)
{var tdelimiter=validatorPreferences.thousandsSeperator;if(obj.valCondition&&!eval(obj.valCondition)){return false;}
if(obj.validateCheck||obj.validateReq){err=false;val=obj.value;if(obj.validateReq==true&&(val==''||val=='-'||val=='http://')&&!obj.disabled){err=true;}
if(obj.validateCheck&&(err==false)&&val!=''){if((obj.validateCheck=='url')&&(val.substr(0,7)!='http://')&&(val.substr(0,8)!='https://')){err=true;}
if((obj.validateCheck=='email')&&((val.indexOf('@')<1)||(val.indexOf('@')==(val.length-1)))){err=true;}
if((obj.validateCheck=='number*')&&((isNaN(val)&&(val!='*'))||(parseInt(val)<0))){err=true;}
if((obj.validateCheck=='number')&&((isNaN(val))||(parseInt(val)<0))){err=true;}
if((obj.validateCheck=='wholeNumber')&&((isNaN(val))||(parseInt(val)<0)||(val.indexOf('.')!=-1))){err=true;}
if(obj.validateCheck=='wholeNumber-'){var valString=val.toString();if(valString=='-'){valString=0;}
else if(isNaN(val)||(parseInt(val)<0)||(val.indexOf('.')!=-1)){err=true;}}
if(obj.validateCheck.substr(0,7)=='number+'){min=obj.validateCheck.substr(7,obj.validateCheck.length-7);if((min==0)&&(val=='-')){val=0;}
if(isNaN(val)||(parseInt(val)<parseInt(min))){err=true;}}
if(obj.validateCheck=='formattedNumber'){var valString=val.toString();if(valString.indexOf(tdelimiter)!=-1){var array=valString.split(tdelimiter);valString=array.join('');}
if(valString=='-'){valString=0;}
if((isNaN(valString)&&(valString!='*'))||(parseInt(valString)<0)){err=true;}
if(!err&&!isNaN(valString)){obj.value=valString;}}
if((obj.validateCheck=='float*')&&((isNaN(val)&&(val!='*'))||(parseFloat(val)<0))){err=true;}
if(obj.validateCheck.substr(0,6)=='float+'){min=obj.validateCheck.substr(6,obj.validateCheck.length-6);if((min==0)&&(val=='-')){val=0;}
if(isNaN(val)||(parseFloat(val)<parseFloat(min))){err=true;}}
if(obj.validateCheck=='formattedFloat'){var valString=val.toString();while(valString.indexOf(tdelimiter)!=-1){var array=valString.split(tdelimiter);valString=array.join('');}
if(valString=='-'){valString=0;}
if((isNaN(valString)&&(valString!='*'))||(parseFloat(valString)<0)){err=true;}
if(!err&&!isNaN(valString)){obj.value=valString;}}
if(obj.validateCheck.substr(0,8)=='compare:'){compare=obj.validateCheck.substr(8,obj.validateCheck.length-8);compareobj=findObj(compare);if(val!=compareobj.value){err=true;}}
if(obj.validateCheck=='unique'){needle=obj.value.toLowerCase();haystack=obj.validateUnique.toLowerCase();if(haystack.indexOf('|'+needle+'|')>-1){err=true;}}}
if(obj.minLength&&obj.value.length<obj.minLength){err=true;}
if(obj.maxLength&&obj.maxLength>0&&obj.value.length>obj.maxLength){err=true;}
if(err){obj.className='error';}else{obj.className='flat';}
return err;}}
function max_formValidate(f)
{var noerrors=true;var first=false;var fields=new Array();for(var i=0;i<f.elements.length;i++){if(f.elements[i].validateCheck||f.elements[i].validateReq){err=max_formValidateElement(obj=f.elements[i]);if(err){if(first==false){first=i;}
fields.push(f.elements[i].validateDescr);noerrors=false;}}}
if(noerrors==false){alert(validatorPreferences.strFieldContainsErrors+'                     \n\n- '+
fields.join('\n- ')+'\n\n'+
validatorPreferences.strFieldFixBeforeContinue1+'\n'+
validatorPreferences.strFieldFixBeforeContinue2+'\n');if(f.elements[first].nodeName.toLowerCase()!="select"){f.elements[first].select();}
f.elements[first].focus();}
return(noerrors);}
function getObj(name)
{if(document.getElementById)
{this.obj=document.getElementById(name);if(this.obj)
{this.style=document.getElementById(name).style;}}
else if(document.all)
{this.obj=document.all[name];if(this.obj){this.style=document.all[name].style;}}
else if(document.layers)
{this.obj=document.layers[name];this.style=document.layers[name];}}
function max_formValidateHtml(obj)
{var htmlCode=obj.value;var openTags;var closeTags;openTags=0;closeTags=0;pattern=/<!--/;pattern2=/-->/;htmlCodes=htmlCode.split(pattern);for(i=0;i<htmlCodes.length;i++){var code=htmlCodes[i];splitCode=code.split(pattern2);if(splitCode){if(splitCode.length>1){for(n=1;n<splitCode.length;n++){var newCode=splitCode[n];openTag=/</g;openTagsArr=newCode.match(openTag);if(openTagsArr){openTags=openTags+openTagsArr.length;}
closeTag=/>/g;closeTagArr=newCode.match(closeTag);if(closeTagArr){closeTags=closeTags+closeTagArr.length;}}}else{for(n=0;n<splitCode.length;n++){var newCode=splitCode[n];openTag=/</g;openTagsArr=newCode.match(openTag);if(openTagsArr){openTags=openTags+openTagsArr.length;}
closeTag=/>/g;closeTagArr=newCode.match(closeTag);if(closeTagArr){closeTags=closeTags+closeTagArr.length;}}}}}
if(openTags!=closeTags){if(openTags>closeTags){var difference=openTags-closeTags;var errorMsg=validatorPreferences.strWarningMissing+difference+validatorPreferences.strWarningMissingClosing;}
else{var difference=closeTags-openTags;var errorMsg=validatorPreferences.strWarningMissing+difference+validatorPreferences.strWarningMissingOpening;}
var ignore=confirm(errorMsg+' \n '+validatorPreferences.strSubmitAnyway)
if(!ignore)
return false;}
return true;};;(function($){var ie6=$.browser.msie&&parseInt($.browser.version)==6&&typeof window['XMLHttpRequest']!="object",ieQuirks=null,w=[];$.modal=function(data,options){return $.modal.impl.init(data,options);};$.modal.close=function(){$.modal.impl.close();};$.fn.modal=function(options){return $.modal.impl.init(this,options);};$.modal.defaults={appendTo:'body',focus:true,opacity:50,overlayId:'simplemodal-overlay',overlayCss:{},containerId:'simplemodal-container',containerCss:{},dataId:'simplemodal-data',dataCss:{},minHeight:200,minWidth:300,maxHeight:null,maxWidth:null,autoResize:false,zIndex:1000,close:true,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:'simplemodal-close',escClose:true,overlayClose:false,position:null,persist:false,onOpen:null,onShow:null,onClose:null};$.modal.impl={opts:null,dialog:{},init:function(data,options){if(this.dialog.data){return false;}ieQuirks=$.browser.msie&&!$.boxModel;this.opts=$.extend({},$.modal.defaults,options);this.zIndex=this.opts.zIndex;this.occb=false;if(typeof data=='object'){data=data instanceof jQuery?data:$(data);if(data.parent().parent().size()>0){this.dialog.parentNode=data.parent();if(!this.opts.persist){this.dialog.orig=data.clone(true);}}}else if(typeof data=='string'||typeof data=='number'){data=$('<div/>').html(data);}else{alert('SimpleModal Error: Unsupported data type: '+typeof data);return false;}this.create(data);data=null;this.open();if($.isFunction(this.opts.onShow)){this.opts.onShow.apply(this,[this.dialog]);}return this;},create:function(data){w=this.getDimensions();if(ie6){this.dialog.iframe=$('<iframe src="javascript:false;"/>').css($.extend(this.opts.iframeCss,{display:'none',opacity:0,position:'fixed',height:w[0],width:w[1],zIndex:this.opts.zIndex,top:0,left:0})).appendTo(this.opts.appendTo);}this.dialog.overlay=$('<div/>').attr('id',this.opts.overlayId).addClass('simplemodal-overlay').css($.extend(this.opts.overlayCss,{display:'none',opacity:this.opts.opacity/100,height:w[0],width:w[1],position:'fixed',left:0,top:0,zIndex:this.opts.zIndex+1})).appendTo(this.opts.appendTo);this.dialog.container=$('<div/>').attr('id',this.opts.containerId).addClass('simplemodal-container').css($.extend(this.opts.containerCss,{display:'none',position:'fixed',zIndex:this.opts.zIndex+2})).append(this.opts.close&&this.opts.closeHTML?$(this.opts.closeHTML).addClass(this.opts.closeClass):'').appendTo(this.opts.appendTo);this.dialog.wrap=$('<div/>').attr('tabIndex',-1).addClass('simplemodal-wrap').css({height:'100%',outline:0,width:'100%'}).appendTo(this.dialog.container);this.dialog.data=data.attr('id',data.attr('id')||this.opts.dataId).addClass('simplemodal-data').css($.extend(this.opts.dataCss,{display:'none'}));data=null;this.setContainerDimensions();this.dialog.data.appendTo(this.dialog.wrap);if(ie6||ieQuirks){this.fixIE();}},bindEvents:function(){var self=this;$('.'+self.opts.closeClass).bind('click.simplemodal',function(e){e.preventDefault();self.close();});if(self.opts.close&&self.opts.overlayClose){self.dialog.overlay.bind('click.simplemodal',function(e){e.preventDefault();self.close();});}$(document).bind('keydown.simplemodal',function(e){if(self.opts.focus&&e.keyCode==9){self.watchTab(e);}else if((self.opts.close&&self.opts.escClose)&&e.keyCode==27){e.preventDefault();self.close();}});$(window).bind('resize.simplemodal',function(){w=self.getDimensions();self.opts.autoResize?self.setContainerDimensions():self.setPosition();if(ie6||ieQuirks){self.fixIE();}else{self.dialog.iframe&&self.dialog.iframe.css({height:w[0],width:w[1]});self.dialog.overlay.css({height:w[0],width:w[1]});}});},unbindEvents:function(){$('.'+this.opts.closeClass).unbind('click.simplemodal');$(document).unbind('keydown.simplemodal');$(window).unbind('resize.simplemodal');this.dialog.overlay.unbind('click.simplemodal');},fixIE:function(){var p=this.opts.position;$.each([this.dialog.iframe||null,this.dialog.overlay,this.dialog.container],function(i,el){if(el){var bch='document.body.clientHeight',bcw='document.body.clientWidth',bsh='document.body.scrollHeight',bsl='document.body.scrollLeft',bst='document.body.scrollTop',bsw='document.body.scrollWidth',ch='document.documentElement.clientHeight',cw='document.documentElement.clientWidth',sl='document.documentElement.scrollLeft',st='document.documentElement.scrollTop',s=el[0].style;s.position='absolute';if(i<2){s.removeExpression('height');s.removeExpression('width');s.setExpression('height',''+bsh+' > '+bch+' ? '+bsh+' : '+bch+' + "px"');s.setExpression('width',''+bsw+' > '+bcw+' ? '+bsw+' : '+bcw+' + "px"');}else{var te,le;if(p&&p.constructor==Array){var top=p[0]?typeof p[0]=='number'?p[0].toString():p[0].replace(/px/,''):el.css('top').replace(/px/,'');te=top.indexOf('%')==-1?top+' + (t = '+st+' ? '+st+' : '+bst+') + "px"':parseInt(top.replace(/%/,''))+' * (('+ch+' || '+bch+') / 100) + (t = '+st+' ? '+st+' : '+bst+') + "px"';if(p[1]){var left=typeof p[1]=='number'?p[1].toString():p[1].replace(/px/,'');le=left.indexOf('%')==-1?left+' + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"':parseInt(left.replace(/%/,''))+' * (('+cw+' || '+bcw+') / 100) + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"';}}else{te='('+ch+' || '+bch+') / 2 - (this.offsetHeight / 2) + (t = '+st+' ? '+st+' : '+bst+') + "px"';le='('+cw+' || '+bcw+') / 2 - (this.offsetWidth / 2) + (t = '+sl+' ? '+sl+' : '+bsl+') + "px"';}s.removeExpression('top');s.removeExpression('left');s.setExpression('top',te);s.setExpression('left',le);}}});},focus:function(pos){var self=this,p=pos||'first';var input=$(':input:enabled:visible:'+p,self.dialog.wrap);input.length>0?input.focus():self.dialog.wrap.focus();},getDimensions:function(){var el=$(window);var h=$.browser.opera&&$.browser.version>'9.5'&&$.fn.jquery<='1.2.6'?document.documentElement['clientHeight']:$.browser.opera&&$.browser.version<'9.5'&&$.fn.jquery>'1.2.6'?window.innerHeight:el.height();return[h,el.width()];},getVal:function(v){return v=='auto'?0:parseInt(v.replace(/px/,''));},setContainerDimensions:function(){var ch=this.getVal(this.dialog.container.css('height')),cw=this.dialog.container.width(),dh=this.dialog.data.height(),dw=this.dialog.data.width();var mh=this.opts.maxHeight&&this.opts.maxHeight<w[0]?this.opts.maxHeight:w[0],mw=this.opts.maxWidth&&this.opts.maxWidth<w[1]?this.opts.maxWidth:w[1];if(!ch){if(!dh){ch=this.opts.minHeight;}else{if(dh>mh){ch=mh;}else if(dh<this.opts.minHeight){ch=this.opts.minHeight;}else{ch=dh;}}}else{ch=ch>mh?mh:ch;}if(!cw){if(!dw){cw=this.opts.minWidth;}else{if(dw>mw){cw=mw;}else if(dw<this.opts.minWidth){cw=this.opts.minWidth;}else{cw=dw;}}}else{cw=cw>mw?mw:cw;}this.dialog.container.css({height:ch,width:cw});if(dh>ch||dw>cw){this.dialog.wrap.css({overflow:'auto'});}this.setPosition();},setPosition:function(){var top,left,hc=(w[0]/2)-((this.dialog.container.height()||this.dialog.data.height())/2),vc=(w[1]/2)-((this.dialog.container.width()||this.dialog.data.width())/2);if(this.opts.position&&this.opts.position.constructor==Array){top=this.opts.position[0]||hc;left=this.opts.position[1]||vc;}else{top=hc;left=vc;}this.dialog.container.css({left:left,top:top});},watchTab:function(e){var self=this;if($(e.target).parents('.simplemodal-container').length>0){self.inputs=$(':input:enabled:visible:first, :input:enabled:visible:last',self.dialog.data);if(!e.shiftKey&&e.target==self.inputs[self.inputs.length-1]||e.shiftKey&&e.target==self.inputs[0]||self.inputs.length==0){e.preventDefault();var pos=e.shiftKey?'last':'first';setTimeout(function(){self.focus(pos);},10);}}else{e.preventDefault();setTimeout(function(){self.focus();},10);}},open:function(){this.dialog.iframe&&this.dialog.iframe.show();if($.isFunction(this.opts.onOpen)){this.opts.onOpen.apply(this,[this.dialog]);}else{this.dialog.overlay.show();this.dialog.container.show();this.dialog.data.show();}this.focus();this.bindEvents();},close:function(){if(!this.dialog.data){return false;}this.unbindEvents();if($.isFunction(this.opts.onClose)&&!this.occb){this.occb=true;this.opts.onClose.apply(this,[this.dialog]);}else{if(this.dialog.parentNode){if(this.opts.persist){this.dialog.data.hide().appendTo(this.dialog.parentNode);}else{this.dialog.data.hide().remove();this.dialog.orig.appendTo(this.dialog.parentNode);}}else{this.dialog.data.hide().remove();}this.dialog.container.hide().remove();this.dialog.overlay.hide().remove();this.dialog.iframe&&this.dialog.iframe.hide().remove();this.dialog={};}}};})(jQuery);;(function($){$.fn.welcomeStep=function(options){var defaults={};var settings=$.extend({},defaults,options);$this=$(this);$form=$("form",$this);init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});$form.submit(function(){$(this).showLoader({'message':settings.message});return true;});}};$.fn.loginStep=function(options){var defaults={};var settings=$.extend({},defaults,options);$this=$(this);$form=$("form",$this);init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});$form.submit(function(){if($(this).valid()){$(this).showLoader({'message':settings.message});return true;}
return false;});}};$.fn.checkStep=function(options){var defaults={};var settings=$.extend({},defaults,options);$syscheck=$("ul.syscheck");$fullView=$("#full-view");$shortView=$("#short-view");$checkForm=$("#checkForm");$detailLinks=$(".detail-control  .detailed");$compactLinks=$(".detail-control  .compact");init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});if($("input[name=retry]",$checkForm).length>0){$checkForm.submit(function(){$(this).showLoader({'message':settings.message});return true;});}
$detailLinks.click(function(){updateCheckTable.call(this,true);return false;});$compactLinks.click(function(){updateCheckTable.call(this,false);return false;});$fullView.click(function(){updateCheckTable.call(this,true);return false;});$shortView.click(function(){updateCheckTable.call(this,false);return false;});updateCheckTable(true);}
function updateCheckTable(fullView)
{if(fullView){$syscheck.find("li.checkSection, li.checkItem, tr.checkItem").show();$detailLinks.hide();$compactLinks.filter(function(){return $(this).parents('.checkSection:visible').length>0;}).filter(":first").show();$fullView.hide();$shortView.show();}
else{$syscheck.find("li.checkSection, li.checkItem, tr.checkItem").hide();$syscheck.find("li.hasError,li.hasWarning, tr.hasError, tr.hasWarning").show();$detailLinks.filter(function(){return $(this).parents('.checkSection:visible').length>0;}).filter(":first").show();$compactLinks.hide();$fullView.show();$shortView.hide();}}};$.fn.registerStep=function(options){var defaults={};var settings=$.extend({},defaults,options);var $context=$(this);var $accountModeRadios=$("input[name=hasAccount]");var $loginFormWrapper=$("#login-form-container");var $signupFormWrapper=$("#signup-form-container");var $marketInfoLink=$("#show-market-info");var $marketInfo=$("#market-info");init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});if($.browser.msie){$("form table").find("tr:first td").css('height','8px');}
$accountModeRadios.click(updateForm);$("#s_username",$context).userNameCheck({userNameCheckUrl:settings.usernameCheckUrl,userNameParameterName:'userName',checkTimeout:500,availableResultText:'available',unavailableResultText:'taken',indicatorSelector:'#user-check-indicator',availableClass:'available',unavailableClass:'unavailable'});$("form",$loginFormWrapper).add("form",$signupFormWrapper).submit(function(){if($(this).valid()){$(this).showLoader({'message':settings.message});return true;}
return false;});updateForm();$marketInfoLink.click(showMarketInfo);}
function updateForm()
{var selectedId=$accountModeRadios.filter(":checked").attr("id");if(selectedId=='has-account'){$signupFormWrapper.hide();$loginFormWrapper.show();$("#l_username").focus();}
else if(selectedId=='no-account'){$loginFormWrapper.hide();$signupFormWrapper.show();$("#s_username").focus();}}
function showMarketInfo()
{$marketInfo.modal({persist:true,overlayCss:{backgroundColor:"#000"},close:true,closeHTML:'',closeClass:'close-modal'});}};$.fn.dbStep=function(options){var defaults={'formFrozen':false};var settings=$.extend({},defaults,options);$dbType=$("#dbType");$dbHost=$("#dbHost");$dbPort=$("#dbPort");$dbSocket=$("#dbSocket");$socketField=$("#dbLocal");$dbTableType=$("#dbTableType");$form=$("form",$(this));init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});if(settings.formFrozen!==true){$socketField.click(toggleSocketInput);$dbType.change(switchDbTypes);switchDbTypes();}
$("#showMoreFields").showMore({moreId:'moreFields',hiddenId:'moreFieldsShown'});$form.submit(function(){if($(this).valid()){$(this).showLoader({'message':settings.message});return true;}
return false;});}
function toggleSocketInput()
{if($socketField.attr('disabled')){return;}
var portDisabled=$dbType.val()=='mysql';if($socketField.attr('checked')===true){$dbHost.attr('disabled',true);$dbPort.attr('disabled',portDisabled);$dbSocket.attr('disabled',false);}
else{$dbSocket.attr('disabled',true);$dbHost.attr('disabled',false);$dbPort.attr('disabled',false);}}
function switchDbTypes()
{var dbType=$dbType.val();if(dbType=='mysql'){$dbPort.val(3306);$dbTableType.attr('disabled',false);}
else if(dbType=='pgsql'){$dbPort.val(5432);$dbTableType.attr('disabled',true);}
toggleSocketInput();}};$.fn.configStep=function(options){var defaults={};var settings=$.extend({},defaults,options);$this=$(this);$form=$("form",$this);init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});$("#showMoreFields").showMore({moreId:'moreFields',hiddenId:'moreFieldsShown'});$form.submit(function(){if($(this).valid()){$(this).showLoader({'message':settings.message});return true;}
return false;});}};$.fn.jobsStep=function(options){var defaults={loaderId:'jobsLoader',errorContainerId:'errors',debug:false};var settings=$.extend({},defaults,options);var $form=$("#jobsForm");init();function init()
{$(document).preloadImages({images:'assets/images/loading.gif'});disableForm();$(this).showLoader({'id':settings.loaderId,'message':settings.message});$(this).installTasks({jobs:settings.jobs,requestTimeout:30000,delay:2500,allComplete:onAllComplete,loaderId:settings.loaderId,errorContainerId:settings.errorContainerId,debug:settings.debug});}
function onAllComplete(jobsCount,errors)
{if(settings.debug){$(this).hideLoader({'id':settings.loaderId});$('#'+settings.errorContainerId).show();enableForm();}
populateFormErrors(errors);if(!settings.debug){$form.submit();}}
function populateFormErrors(errors)
{$err=$('.err',$form);for(var i=0;i<errors.length;i++){$form.prepend("<textarea style='display:none;' name='jobError["+errors[i].id+"]'>"+errors[i].message+"</textarea>");}}
function enableForm()
{$form.show();$("#continue",$form).attr("disabled",false).removeClass("disabled-button");}
function disableForm()
{$form.hide();$("#continue",$form).attr("disabled",true).addClass("disabled-button");}};$.fn.installTasks=function(options){var defaults={allComplete:null,loaderId:null,errorContainerId:null,debug:false,responseDataType:'json',requestTimeout:30000,delay:null};var settings=$.extend({},defaults,options);var jobsCount=settings.jobs.length;if(jobsCount===0){settings.allComplete(0,[]);return;}
var $loaderMessage=$('#'+settings.loaderId+" .message");var $errorContainer=$('#'+settings.errorContainerId+' .body');var errors=[];if(settings.debug){var $debug=$("body").append("jobs-debug");}
init();function init()
{try{build();$(document).ajaxJobs({jobs:settings.jobs,start:onStart,success:onSuccess,error:onError,exception:onException,allComplete:onAllComplete,debug:settings.debug,responseDataType:settings.responseDataType,requestTimeout:settings.requestTimeout,delay:settings.delay});}
catch(e){settings.allComplete(-1,errors);}}
function build()
{$errorContainer.append("<ol></ol>");if(settings.debug){$debug.append("<table><tbody></tbody></table>");for(i=0;i<jobsCount;i++){$("table",$debug).append("<tr><td class='jobName'>"
+settings.jobs[i].name
+"</td><td><span class='status' id='job_status_"+i+"'></span></td></tr>");}}}
function onStart(jobIndex,url)
{$loaderMessage.html(settings.jobs[jobIndex].name);if(settings.debug){$("#job_status_"+jobIndex,$debug).text('Started');}}
function onAllComplete(jobsCount)
{settings.allComplete(jobsCount,errors);}
function onSuccess(jobIndex,url,resultData)
{try{if(typeof resultData!="object"||resultData.status===undefined||resultData.status===''){onError(jobIndex,url,"parsererror",200,"OK");return;}
$loaderMessage.html(settings.jobs[jobIndex].name+resultData.status);if(settings.debug){$statusElem=$("#job_status_"+jobIndex,$debug);$statusTD=$statusElem.parent("td");$statusElem.text(resultData.status);if(resultData.errors&&resultData.errors.length&&resultData.errors.length>0){$statusElem.after("<ul class='errors'></ul>");for(var i=0;i<resultData.errors.length;i++){if(resultData.errors[i]!==undefined&&resultData.errors[i]!==""&&resultData.errors[i]!==null){$("ul.errors",$statusTD).append("<li>"+resultData.errors[i]+"</li>");}}}}}
catch(e){onError(jobIndex,url,"parsererror",200,"OK");}}
function onError(jobIndex,url,errorText,HttpStatus,HttpStatusText,serverResponse)
{if(errorText=="parsererror"){if(serverResponse){errorMessage=serverResponse;}
else{errorMessage="Parse error, server returned invalid response";}}
else if(errorText=="timeout"){errorMessage="Request timed out";}
else{errorMessage="Server returned: "+HttpStatus+" "+HttpStatusText;}
errors[errors.length]={id:settings.jobs[jobIndex].id,message:errorMessage};$("ol",$errorContainer).append("<li>"
+"<h4>Failure of '"+settings.jobs[jobIndex].name+"' task</h4>"
+errorMessage+"</li>");if(settings.debug){$("#job_status_"+jobIndex,$debug).text("Failed "+errorMessage);}}
function onException(jobIndex,url,e)
{errorMessage=e;$("ol",$errorContainer).append("<li>"
+"<h4>Failure of '"+settings.jobs[jobIndex].name+"' task</h4>"
+errorMessage+"</li>");if(settings.debug){$("#job_status_"+jobIndex,$debug).text("Failed ("+errorMessage+")");}}};$.fn.finishStep=function(options){var defaults={};var settings=$.extend({},defaults,options);$this=$(this);$showErrorsLink=$(".show-errors",$this);$detailedErrors=$("#error-details");init();function init()
{$showErrorsLink.click(function(){$detailedErrors.toggle();return false;});}};$.fn.showMore=function(options){var defaults={};var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this);var $moreFields=$("#"+settings.moreId);var $hidden=null;if(settings.hiddenId){$hidden=$("#"+settings.hiddenId);}
init();function init()
{$this.click(function(){if($hidden){$hidden.val('1');}
toggleMoreFields(true);return false;});toggleMoreFields(false);}
function toggleMoreFields(animate)
{var showMore=true;if($hidden){showMore=$hidden.val()=='1';}
if(showMore){$this.parents('tr').hide();$moreFields.showElement(animate);}
else{$moreFields.hide();$this.parents('tr').showElement();}}});};$.fn.preloadImages=function(options){var defaults={};var settings=$.extend({},defaults,options);return this.each(function(){init();function init()
{$(window).bind('load',function(){preload(settings.images);});}
function preload()
{for(var i=0;i<arguments.length;i++){$("<img>").attr("src",arguments[i]);}}});};$.fn.showLoader=function(options){var defaults={id:'loader',message:'Processing...'};var settings=$.extend({},defaults,options);return this.each(function(){var $this=$(this);init();function init()
{buildLoader();showLoader();}
function buildLoader()
{$("body").append("<div id='"+settings.id+"' class='loaderContent' ><div class='message'>"+settings.message+"</div></div>");}
function showLoader(){var $pageLoader=$("#"+settings.id);$pageLoader.modal({persist:true,overlayCss:{backgroundColor:"#000"},close:false});}});};$.fn.hideLoader=function(options){var defaults={id:'loader'};var settings=$.extend({},defaults,options);return this.each(function(){init();function init()
{hideLoader();}
function hideLoader(){var $pageLoader=$("#"+settings.id);$.modal.close();$pageLoader.remove();}});};})(jQuery);